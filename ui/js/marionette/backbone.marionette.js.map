{"version":3,"file":"backbone.marionette.js","sources":["src/utils/proxy.js","src/utils/extend.js","src/utils/deprecate.js","src/common/is-node-attached.js","src/common/merge-options.js","src/common/get-option.js","src/common/normalize-methods.js","src/common/trigger-method.js","src/common/monitor-view-events.js","src/error.js","src/common/bind-events.js","src/common/bind-requests.js","src/utils/set-options.js","src/mixins/common.js","src/mixins/radio.js","src/object.js","src/template-cache.js","src/utils/invoke.js","src/mixins/behaviors.js","src/mixins/delegate-entity-events.js","src/utils/get-unique-event-name.js","src/mixins/triggers.js","src/mixins/ui.js","src/mixins/view.js","src/utils/destroy-backbone-view.js","src/region.js","src/common/build-region.js","src/mixins/regions.js","src/config/renderer.js","src/view.js","src/utils/emulate-collection.js","src/child-view-container.js","src/collection-view.js","src/composite-view.js","src/behavior.js","src/application.js","src/app-router.js","src/config/behaviors-lookup.js","src/config/features.js","src/backbone.marionette.js"],"sourcesContent":["//Internal utility for creating context style global utils\nconst proxy = function(method) {\n  return function(context, ...args) {\n    return method.apply(context, args);\n  };\n};\n\nexport default proxy;\n","// Marionette.extend\n// -----------------\n\nimport Backbone from 'backbone';\n\n// Borrow the Backbone `extend` method so we can use it as needed\nconst extend = Backbone.Model.extend;\n\nexport default extend;\n","/* global console */\n\nimport _ from 'underscore';\n\nimport Marionette from '../backbone.marionette';\n\nconst deprecate = function(message, test) {\n  if (_.isObject(message)) {\n    message = (\n      message.prev + ' is going to be removed in the future. ' +\n      'Please use ' + message.next + ' instead.' +\n      (message.url ? ' See: ' + message.url : '')\n    );\n  }\n\n  if (!Marionette.DEV_MODE) {\n    return;\n  }\n\n  if ((test === undefined || !test) && !deprecate._cache[message]) {\n    deprecate._warn('Deprecation warning: ' + message);\n    deprecate._cache[message] = true;\n  }\n};\n\ndeprecate._console = typeof console !== 'undefined' ? console : {};\ndeprecate._warn = function() {\n  const warn = deprecate._console.warn || deprecate._console.log || _.noop;\n  return warn.apply(deprecate._console, arguments);\n};\ndeprecate._cache = {};\n\nexport default deprecate;\n","// Marionette.isNodeAttached\n// -------------------------\n\nimport Backbone from 'backbone';\n\n// Determine if `el` is a child of the document\nconst isNodeAttached = function(el) {\n  return Backbone.$.contains(document.documentElement, el);\n};\n\nexport default isNodeAttached;\n","import _ from 'underscore';\n\n// Merge `keys` from `options` onto `this`\nconst mergeOptions = function(options, keys) {\n  if (!options) { return; }\n\n  _.each(keys, (key) => {\n    const option = options[key];\n    if (option !== undefined) {\n      this[key] = option;\n    }\n  });\n};\n\nexport default mergeOptions;\n","// Marionette.getOption\n// --------------------\n\n// Retrieve an object, function or other value from the\n// object or its `options`, with `options` taking precedence.\nconst getOption = function(optionName) {\n  if (!optionName) { return; }\n  if (this.options && (this.options[optionName] !== undefined)) {\n    return this.options[optionName];\n  } else {\n    return this[optionName];\n  }\n};\n\nexport default getOption;\n","import _ from 'underscore';\n\n// Marionette.normalizeMethods\n// ----------------------\n\n// Pass in a mapping of events => functions or function names\n// and return a mapping of events => functions\nconst normalizeMethods = function(hash) {\n  return _.reduce(hash, (normalizedHash, method, name) => {\n    if (!_.isFunction(method)) {\n      method = this[method];\n    }\n    if (method) {\n      normalizedHash[name] = method;\n    }\n    return normalizedHash;\n  }, {});\n};\n\nexport default normalizeMethods;\n","// Trigger Method\n// --------------\n\nimport _         from 'underscore';\nimport getOption from './get-option';\n\n// split the event name on the \":\"\nconst splitter = /(^|:)(\\w)/gi;\n\n// take the event section (\"section1:section2:section3\")\n// and turn it in to uppercase name onSection1Section2Section3\nfunction getEventName(match, prefix, eventName) {\n  return eventName.toUpperCase();\n}\n\nconst getOnMethodName = _.memoize(function(event) {\n  return 'on' + event.replace(splitter, getEventName);\n});\n\n// Trigger an event and/or a corresponding method name. Examples:\n//\n// `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\n// call the \"onFoo\" method.\n//\n// `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\n// call the \"onFooBar\" method.\nexport function triggerMethod(event, ...args) {\n  // get the method name from the event name\n  const methodName = getOnMethodName(event);\n  const method = getOption.call(this, methodName);\n  let result;\n\n  // call the onMethodName if it exists\n  if (_.isFunction(method)) {\n    // pass all args, except the event name\n    result = method.apply(this, args);\n  }\n\n  // trigger the event\n  this.trigger.apply(this, arguments);\n\n  return result;\n}\n\n// triggerMethodOn invokes triggerMethod on a specific context\n//\n// e.g. `Marionette.triggerMethodOn(view, 'show')`\n// will trigger a \"show\" event or invoke onShow the view.\nexport function triggerMethodOn(context, ...args) {\n  if (_.isFunction(context.triggerMethod)) {\n    return context.triggerMethod.apply(context, args);\n  }\n\n  return triggerMethod.apply(context, args);\n}\n","// DOM Refresh\n// -----------\n\nimport _ from 'underscore';\nimport { triggerMethodOn } from './trigger-method';\n\n// Trigger method on children unless a pure Backbone.View\nfunction triggerMethodChildren(view, event, shouldTrigger) {\n  if (!view._getImmediateChildren) { return; }\n  _.each(view._getImmediateChildren(), child => {\n    if (!shouldTrigger(child)) { return; }\n    triggerMethodOn(child, event, child);\n  });\n}\n\nfunction shouldTriggerAttach(view) {\n  return !view._isAttached;\n}\n\nfunction shouldAttach(view) {\n  if (!shouldTriggerAttach(view)) { return false; }\n  view._isAttached = true;\n  return true;\n}\n\nfunction shouldTriggerDetach(view) {\n  return view._isAttached;\n}\n\nfunction shouldDetach(view) {\n  if (!shouldTriggerDetach(view)) { return false; }\n  view._isAttached = false;\n  return true;\n}\n\nfunction triggerDOMRefresh(view) {\n  if (view._isAttached && view._isRendered) {\n    triggerMethodOn(view, 'dom:refresh', view);\n  }\n}\n\nfunction handleBeforeAttach() {\n  triggerMethodChildren(this, 'before:attach', shouldTriggerAttach);\n}\n\nfunction handleAttach() {\n  triggerMethodChildren(this, 'attach', shouldAttach);\n  triggerDOMRefresh(this);\n}\n\nfunction handleBeforeDetach() {\n  triggerMethodChildren(this, 'before:detach', shouldTriggerDetach);\n}\n\nfunction handleDetach() {\n  triggerMethodChildren(this, 'detach', shouldDetach);\n}\n\nfunction handleRender() {\n  triggerDOMRefresh(this);\n}\n\n// Monitor a view's state, propagating attach/detach events to children and firing dom:refresh\n// whenever a rendered view is attached or an attached view is rendered.\nfunction monitorViewEvents(view) {\n  if (view._areViewEventsMonitored) { return; }\n\n  view._areViewEventsMonitored = true;\n\n  view.on({\n    'before:attach': handleBeforeAttach,\n    'attach': handleAttach,\n    'before:detach': handleBeforeDetach,\n    'detach': handleDetach,\n    'render': handleRender\n  });\n}\n\nexport default monitorViewEvents;\n","// Error\n// -----\n\nimport _      from 'underscore';\nimport extend from './utils/extend';\nimport {version} from '../package.json';\n\nconst errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];\n\nconst MarionetteError = extend.call(Error, {\n  urlRoot: `http://marionettejs.com/docs/v${version}/`,\n\n  constructor(message, options) {\n    if (_.isObject(message)) {\n      options = message;\n      message = options.message;\n    } else if (!options) {\n      options = {};\n    }\n\n    const error = Error.call(this, message);\n    _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));\n\n    this.captureStackTrace();\n\n    if (options.url) {\n      this.url = this.urlRoot + options.url;\n    }\n  },\n\n  captureStackTrace() {\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, MarionetteError);\n    }\n  },\n\n  toString() {\n    return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');\n  }\n});\n\nMarionetteError.extend = extend;\n\nexport default MarionetteError;\n","// Bind Entity Events & Unbind Entity Events\n// -----------------------------------------\n//\n// These methods are used to bind/unbind a backbone \"entity\" (e.g. collection/model)\n// to methods on a target object.\n//\n// The first parameter, `target`, must have the Backbone.Events module mixed in.\n//\n// The second parameter is the `entity` (Backbone.Model, Backbone.Collection or\n// any object that has Backbone.Events mixed in) to bind the events from.\n//\n// The third parameter is a hash of { \"event:name\": \"eventHandler\" }\n// configuration. Multiple handlers can be separated by a space. A\n// function can be supplied instead of a string handler name.\n\nimport _               from 'underscore';\nimport MarionetteError from '../error';\n\n// Bind/unbind the event to handlers specified as a string of\n// handler names on the target object\nfunction bindFromStrings(target, entity, evt, methods, actionName) {\n  const methodNames = methods.split(/\\s+/);\n\n  _.each(methodNames, function(methodName) {\n    const method = target[methodName];\n    if (!method) {\n      throw new MarionetteError(`Method \"${methodName}\" was configured as an event handler, but does not exist.`);\n    }\n\n    target[actionName](entity, evt, method);\n  });\n}\n\n// generic looping function\nfunction iterateEvents(target, entity, bindings, actionName) {\n  if (!entity || !bindings) { return; }\n\n  // type-check bindings\n  if (!_.isObject(bindings)) {\n    throw new MarionetteError({\n      message: 'Bindings must be an object.',\n      url: 'marionette.functions.html#marionettebindevents'\n    });\n  }\n\n  // iterate the bindings and bind/unbind them\n  _.each(bindings, function(method, evt) {\n\n    // allow for a list of method names as a string\n    if (_.isString(method)) {\n      bindFromStrings(target, entity, evt, method, actionName);\n      return;\n    }\n\n    target[actionName](entity, evt, method);\n  });\n}\n\nfunction bindEvents(entity, bindings) {\n  iterateEvents(this, entity, bindings, 'listenTo');\n  return this;\n}\n\nfunction unbindEvents(entity, bindings) {\n  iterateEvents(this, entity, bindings, 'stopListening');\n  return this;\n}\n\n// Export Public API\nexport {\n  bindEvents,\n  unbindEvents\n};\n","// Bind/Unbind Radio Requests\n// -----------------------------------------\n//\n// These methods are used to bind/unbind a backbone.radio request\n// to methods on a target object.\n//\n// The first parameter, `target`, will set the context of the reply method\n//\n// The second parameter is the `Radio.channel` to bind the reply to.\n//\n// The third parameter is a hash of { \"request:name\": \"replyHandler\" }\n// configuration. A function can be supplied instead of a string handler name.\n\nimport _ from 'underscore';\nimport normalizeMethods from './normalize-methods';\nimport MarionetteError from '../error';\n\nfunction iterateReplies(target, channel, bindings, actionName) {\n  if (!channel || !bindings) { return; }\n\n  // type-check bindings\n  if (!_.isObject(bindings)) {\n    throw new MarionetteError({\n      message: 'Bindings must be an object.',\n      url: 'marionette.functions.html#marionettebindrequests'\n    });\n  }\n\n  const normalizedRadioRequests = normalizeMethods.call(target, bindings);\n\n  channel[actionName](normalizedRadioRequests, target);\n}\n\nfunction bindRequests(channel, bindings) {\n  iterateReplies(this, channel, bindings, 'reply');\n  return this;\n}\n\nfunction unbindRequests(channel, bindings) {\n  iterateReplies(this, channel, bindings, 'stopReplying');\n  return this;\n}\n\nexport {\n  bindRequests,\n  unbindRequests\n};\n","import _ from 'underscore';\n\n// Internal utility for setting options consistently across Mn\nconst setOptions = function(...args) {\n  this.options = _.extend({}, _.result(this, 'options'), ...args);\n};\n\nexport default setOptions;\n","import _setOptions              from '../utils/set-options';\nimport getOption                from '../common/get-option';\nimport mergeOptions             from '../common/merge-options';\nimport normalizeMethods         from '../common/normalize-methods';\nimport {\n  bindEvents,\n  unbindEvents\n}                               from '../common/bind-events';\n\nexport default {\n\n  // Imports the \"normalizeMethods\" to transform hashes of\n  // events=>function references/names to a hash of events=>function references\n  normalizeMethods: normalizeMethods,\n\n  _setOptions: _setOptions,\n\n  // A handy way to merge passed-in options onto the instance\n  mergeOptions: mergeOptions,\n\n  // Enable getting options from this or this.options by name.\n  getOption: getOption,\n\n  // Enable binding view's events from another entity.\n  bindEvents: bindEvents,\n\n  // Enable unbinding view's events from another entity.\n  unbindEvents: unbindEvents\n};\n","import _ from 'underscore';\nimport Radio from 'backbone.radio';\n\nimport {\n  bindRequests,\n  unbindRequests\n} from '../common/bind-requests';\n\nimport {\n  bindEvents,\n  unbindEvents\n} from '../common/bind-events';\n\nimport MarionetteError from '../error';\n\n// MixinOptions\n// - channelName\n// - radioEvents\n// - radioRequests\n\nexport default {\n\n  _initRadio() {\n    const channelName = _.result(this, 'channelName');\n\n    if (!channelName) {\n      return;\n    }\n\n    /* istanbul ignore next */\n    if (!Radio) {\n      throw new MarionetteError({\n        name: 'BackboneRadioMissing',\n        message: 'The dependency \"backbone.radio\" is missing.'\n      });\n    }\n\n    const channel = this._channel = Radio.channel(channelName);\n\n    const radioEvents = _.result(this, 'radioEvents');\n    this.bindEvents(channel, radioEvents);\n\n    const radioRequests = _.result(this, 'radioRequests');\n    this.bindRequests(channel, radioRequests);\n\n    this.on('destroy', this._destroyRadio);\n  },\n\n  _destroyRadio() {\n    this._channel.stopReplying(null, null, this);\n  },\n\n  getChannel() {\n    return this._channel;\n  },\n\n  // Proxy `bindEvents`\n  bindEvents: bindEvents,\n\n  // Proxy `unbindEvents`\n  unbindEvents: unbindEvents,\n\n  // Proxy `bindRequests`\n  bindRequests: bindRequests,\n\n  // Proxy `unbindRequests`\n  unbindRequests: unbindRequests\n\n};\n","// Object\n// ------\n\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport extend from './utils/extend';\nimport { triggerMethod } from './common/trigger-method';\nimport CommonMixin from './mixins/common';\nimport RadioMixin from './mixins/radio';\n\nconst ClassOptions = [\n  'channelName',\n  'radioEvents',\n  'radioRequests'\n];\n\n// A Base Class that other Classes should descend from.\n// Object borrows many conventions and utilities from Backbone.\nconst MarionetteObject = function(options) {\n  this._setOptions(options);\n  this.mergeOptions(options, ClassOptions);\n  this.cid = _.uniqueId(this.cidPrefix);\n  this._initRadio();\n  this.initialize.apply(this, arguments);\n};\n\nMarionetteObject.extend = extend;\n\n// Object Methods\n// --------------\n\n// Ensure it can trigger events with Backbone.Events\n_.extend(MarionetteObject.prototype, Backbone.Events, CommonMixin, RadioMixin, {\n  cidPrefix: 'mno',\n\n  // for parity with Marionette.AbstractView lifecyle\n  _isDestroyed: false,\n\n  isDestroyed() {\n    return this._isDestroyed;\n  },\n\n  //this is a noop method intended to be overridden by classes that extend from this base\n  initialize() {},\n\n  destroy(...args) {\n    if (this._isDestroyed) { return this; }\n\n    this.triggerMethod('before:destroy', this, ...args);\n\n    this._isDestroyed = true;\n    this.triggerMethod('destroy', this, ...args);\n    this.stopListening();\n\n    return this;\n  },\n\n  triggerMethod: triggerMethod\n});\n\nexport default MarionetteObject;\n","// Template Cache\n// --------------\n\nimport _               from 'underscore';\nimport Backbone        from 'backbone';\nimport MarionetteError from './error';\n\n// Manage templates stored in `<script>` blocks,\n// caching them for faster access.\nconst TemplateCache = function(templateId) {\n  this.templateId = templateId;\n};\n\n// TemplateCache object-level methods. Manage the template\n// caches from these method calls instead of creating\n// your own TemplateCache instances\n_.extend(TemplateCache, {\n  templateCaches: {},\n\n  // Get the specified template by id. Either\n  // retrieves the cached version, or loads it\n  // from the DOM.\n  get(templateId, options) {\n    let cachedTemplate = this.templateCaches[templateId];\n\n    if (!cachedTemplate) {\n      cachedTemplate = new TemplateCache(templateId);\n      this.templateCaches[templateId] = cachedTemplate;\n    }\n\n    return cachedTemplate.load(options);\n  },\n\n  // Clear templates from the cache. If no arguments\n  // are specified, clears all templates:\n  // `clear()`\n  //\n  // If arguments are specified, clears each of the\n  // specified templates from the cache:\n  // `clear(\"#t1\", \"#t2\", \"...\")`\n  clear(...args) {\n    let i;\n    const length = args.length;\n\n    if (length > 0) {\n      for (i = 0; i < length; i++) {\n        delete this.templateCaches[args[i]];\n      }\n    } else {\n      this.templateCaches = {};\n    }\n  }\n});\n\n// TemplateCache instance methods, allowing each\n// template cache object to manage its own state\n// and know whether or not it has been loaded\n_.extend(TemplateCache.prototype, {\n\n  // Internal method to load the template\n  load(options) {\n    // Guard clause to prevent loading this template more than once\n    if (this.compiledTemplate) {\n      return this.compiledTemplate;\n    }\n\n    // Load the template and compile it\n    const template = this.loadTemplate(this.templateId, options);\n    this.compiledTemplate = this.compileTemplate(template, options);\n\n    return this.compiledTemplate;\n  },\n\n  // Load a template from the DOM, by default. Override\n  // this method to provide your own template retrieval\n  // For asynchronous loading with AMD/RequireJS, consider\n  // using a template-loader plugin as described here:\n  // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs\n  loadTemplate(templateId, options) {\n    const $template = Backbone.$(templateId);\n\n    if (!$template.length) {\n      throw new MarionetteError({\n        name: 'NoTemplateError',\n        message: `Could not find template: \"${templateId}\"`\n      });\n    }\n    return $template.html();\n  },\n\n  // Pre-compile the template before caching it. Override\n  // this method if you do not need to pre-compile a template\n  // (JST / RequireJS for example) or if you want to change\n  // the template engine used (Handebars, etc).\n  compileTemplate(rawTemplate, options) {\n    return _.template(rawTemplate, options);\n  }\n});\n\nexport default TemplateCache;\n","// Implementation of the invoke method (http://underscorejs.org/#invoke) with support for\n// lodash v3, v4, and underscore.js\nimport _ from 'underscore';\n\nexport default _.invokeMap || _.invoke;\n","import _                        from 'underscore';\nimport _invoke                  from '../utils/invoke';\nimport { triggerMethod }        from '../common/trigger-method';\nimport Marionette               from '../backbone.marionette';\n\n// MixinOptions\n// - behaviors\n\n// Takes care of getting the behavior class\n// given options and a key.\n// If a user passes in options.behaviorClass\n// default to using that.\n// If a user passes in a Behavior Class directly, use that\n// Otherwise delegate the lookup to the users `behaviorsLookup` implementation.\nfunction getBehaviorClass(options, key) {\n  if (options.behaviorClass) {\n    return options.behaviorClass;\n    //treat functions as a Behavior constructor\n  } else if (_.isFunction(options)) {\n    return options;\n  }\n\n  // behaviorsLookup can be either a flat object or a method\n  if (_.isFunction(Marionette.Behaviors.behaviorsLookup)) {\n    return Marionette.Behaviors.behaviorsLookup(options, key)[key];\n  }\n\n  return Marionette.Behaviors.behaviorsLookup[key];\n}\n\n// Iterate over the behaviors object, for each behavior\n// instantiate it and get its grouped behaviors.\n// This accepts a list of behaviors in either an object or array form\nfunction parseBehaviors(view, behaviors) {\n  return _.chain(behaviors).map(function(options, key) {\n    const BehaviorClass = getBehaviorClass(options, key);\n    //if we're passed a class directly instead of an object\n    const _options = options === BehaviorClass ? {} : options;\n    const behavior = new BehaviorClass(_options, view);\n    const nestedBehaviors = parseBehaviors(view, _.result(behavior, 'behaviors'));\n\n    return [behavior].concat(nestedBehaviors);\n  }).flatten().value();\n}\n\nexport default {\n  _initBehaviors() {\n    const behaviors = _.result(this, 'behaviors');\n\n    // Behaviors defined on a view can be a flat object literal\n    // or it can be a function that returns an object.\n    this._behaviors = _.isObject(behaviors) ? parseBehaviors(this, behaviors) : {};\n  },\n\n  _getBehaviorTriggers() {\n    const triggers = _invoke(this._behaviors, 'getTriggers');\n    return _.extend({}, ...triggers);\n  },\n\n  _getBehaviorEvents() {\n    const events = _invoke(this._behaviors, 'getEvents');\n    return _.extend({}, ...events);\n  },\n\n  // proxy behavior $el to the view's $el.\n  _proxyBehaviorViewProperties() {\n    _invoke(this._behaviors, 'proxyViewProperties');\n  },\n\n  // delegate modelEvents and collectionEvents\n  _delegateBehaviorEntityEvents() {\n    _invoke(this._behaviors, 'delegateEntityEvents');\n  },\n\n  // undelegate modelEvents and collectionEvents\n  _undelegateBehaviorEntityEvents() {\n    _invoke(this._behaviors, 'undelegateEntityEvents');\n  },\n\n  _destroyBehaviors(args) {\n    // Call destroy on each behavior after\n    // destroying the view.\n    // This unbinds event listeners\n    // that behaviors have registered for.\n    _invoke(this._behaviors, 'destroy', ...args);\n  },\n\n  _bindBehaviorUIElements() {\n    _invoke(this._behaviors, 'bindUIElements');\n  },\n\n  _unbindBehaviorUIElements() {\n    _invoke(this._behaviors, 'unbindUIElements');\n  },\n\n  _triggerEventOnBehaviors() {\n    const behaviors = this._behaviors;\n    // Use good ol' for as this is a very hot function\n    for (let i = 0, length = behaviors && behaviors.length; i < length; i++) {\n      triggerMethod.apply(behaviors[i], arguments);\n    }\n  }\n};\n","import _ from 'underscore';\n\nimport {\n  bindEvents,\n  unbindEvents\n} from '../common/bind-events';\n\n// MixinOptions\n// - collectionEvents\n// - modelEvents\n\nexport default {\n  // Handle `modelEvents`, and `collectionEvents` configuration\n  _delegateEntityEvents(model, collection) {\n    this._undelegateEntityEvents(model, collection);\n\n    const modelEvents = _.result(this, 'modelEvents');\n    bindEvents.call(this, model, modelEvents);\n\n    const collectionEvents = _.result(this, 'collectionEvents');\n    bindEvents.call(this, collection, collectionEvents);\n  },\n\n  _undelegateEntityEvents(model, collection) {\n    const modelEvents = _.result(this, 'modelEvents');\n    unbindEvents.call(this, model, modelEvents);\n\n    const collectionEvents = _.result(this, 'collectionEvents');\n    unbindEvents.call(this, collection, collectionEvents);\n  }\n};\n","import _ from 'underscore';\n\n// Borrow event splitter from Backbone\nconst delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\nfunction uniqueName(eventName, selector) {\n  return [eventName + _.uniqueId('.evt'), selector].join(' ');\n}\n\n// Set event name to be namespaced using a unique index\n// to generate a non colliding event namespace\n// http://api.jquery.com/event.namespace/\nconst getUniqueEventName = function(eventName) {\n  const match = eventName.match(delegateEventSplitter);\n  return uniqueName(match[1], match[2]);\n};\n\nexport default getUniqueEventName;\n","import _ from 'underscore';\nimport getUniqueEventName from '../utils/get-unique-event-name';\n\n// Internal method to create an event handler for a given `triggerDef` like\n// 'click:foo'\nfunction buildViewTrigger(view, triggerDef) {\n  if (_.isString(triggerDef)) {\n    triggerDef = {event: triggerDef};\n  }\n\n  const eventName = triggerDef.event;\n  const shouldPreventDefault = triggerDef.preventDefault !== false;\n  const shouldStopPropagation = triggerDef.stopPropagation !== false;\n\n  return function(e) {\n    if (shouldPreventDefault) {\n      e.preventDefault();\n    }\n\n    if (shouldStopPropagation) {\n      e.stopPropagation();\n    }\n\n    view.triggerMethod(eventName, view);\n  };\n}\n\nexport default {\n\n  // Configure `triggers` to forward DOM events to view\n  // events. `triggers: {\"click .foo\": \"do:foo\"}`\n  _getViewTriggers(view, triggers) {\n    // Configure the triggers, prevent default\n    // action and stop propagation of DOM events\n    return _.reduce(triggers, (events, value, key) => {\n      key = getUniqueEventName(key);\n      events[key] = buildViewTrigger(view, value);\n      return events;\n    }, {});\n  }\n\n};\n","import _ from 'underscore';\n// allows for the use of the @ui. syntax within\n// a given key for triggers and events\n// swaps the @ui with the associated selector.\n// Returns a new, non-mutated, parsed events hash.\nconst normalizeUIKeys = function(hash, ui) {\n  return _.reduce(hash, (memo, val, key) => {\n    const normalizedKey = normalizeUIString(key, ui);\n    memo[normalizedKey] = val;\n    return memo;\n  }, {});\n};\n\n// utility method for parsing @ui. syntax strings\n// into associated selector\nconst normalizeUIString = function(uiString, ui) {\n  return uiString.replace(/@ui\\.[a-zA-Z-_$0-9]*/g, (r) => {\n    return ui[r.slice(4)];\n  });\n};\n\n// allows for the use of the @ui. syntax within\n// a given value for regions\n// swaps the @ui with the associated selector\nconst normalizeUIValues = function(hash, ui, properties) {\n  _.each(hash, (val, key) => {\n    if (_.isString(val)) {\n      hash[key] = normalizeUIString(val, ui);\n    } else if (_.isObject(val) && _.isArray(properties)) {\n      _.extend(val, normalizeUIValues(_.pick(val, properties), ui));\n      /* Value is an object, and we got an array of embedded property names to normalize. */\n      _.each(properties, (property) => {\n        const propertyVal = val[property];\n        if (_.isString(propertyVal)) {\n          val[property] = normalizeUIString(propertyVal, ui);\n        }\n      });\n    }\n  });\n  return hash;\n};\n\nexport default {\n\n  // normalize the keys of passed hash with the views `ui` selectors.\n  // `{\"@ui.foo\": \"bar\"}`\n  normalizeUIKeys(hash) {\n    const uiBindings = this._getUIBindings();\n    return normalizeUIKeys(hash, uiBindings);\n  },\n\n  // normalize the passed string with the views `ui` selectors.\n  // `\"@ui.bar\"`\n  normalizeUIString(uiString) {\n    const uiBindings = this._getUIBindings();\n    return normalizeUIString(uiString, uiBindings);\n  },\n\n  // normalize the values of passed hash with the views `ui` selectors.\n  // `{foo: \"@ui.bar\"}`\n  normalizeUIValues(hash, properties) {\n    const uiBindings = this._getUIBindings();\n    return normalizeUIValues(hash, uiBindings, properties);\n  },\n\n  _getUIBindings() {\n    const uiBindings = _.result(this, '_uiBindings');\n    const ui = _.result(this, 'ui');\n    return uiBindings || ui;\n  },\n\n  // This method binds the elements specified in the \"ui\" hash inside the view's code with\n  // the associated jQuery selectors.\n  _bindUIElements() {\n    if (!this.ui) { return; }\n\n    // store the ui hash in _uiBindings so they can be reset later\n    // and so re-rendering the view will be able to find the bindings\n    if (!this._uiBindings) {\n      this._uiBindings = this.ui;\n    }\n\n    // get the bindings result, as a function or otherwise\n    const bindings = _.result(this, '_uiBindings');\n\n    // empty the ui so we don't have anything to start with\n    this._ui = {};\n\n    // bind each of the selectors\n    _.each(bindings, (selector, key) => {\n      this._ui[key] = this.$(selector);\n    });\n\n    this.ui = this._ui;\n  },\n\n  _unbindUIElements() {\n    if (!this.ui || !this._uiBindings) { return; }\n\n    // delete all of the existing ui bindings\n    _.each(this.ui, ($el, name) => {\n      delete this.ui[name];\n    });\n\n    // reset the ui element to the original bindings configuration\n    this.ui = this._uiBindings;\n    delete this._uiBindings;\n    delete this._ui;\n  },\n\n  _getUI(name) {\n    return this._ui[name];\n  }\n};\n","// ViewMixin\n//  ---------\n\nimport Backbone from 'backbone';\nimport _ from 'underscore';\nimport { triggerMethod } from '../common/trigger-method';\nimport BehaviorsMixin from './behaviors';\nimport CommonMixin from './common';\nimport DelegateEntityEventsMixin from './delegate-entity-events';\nimport TriggersMixin from './triggers';\nimport UIMixin from './ui';\nimport View from '../view';\nimport MarionetteError from '../error';\n\n// MixinOptions\n// - behaviors\n// - childViewEventPrefix\n// - childViewEvents\n// - childViewTriggers\n// - collectionEvents\n// - modelEvents\n// - triggers\n// - ui\n\n\nconst ViewMixin = {\n  supportsRenderLifecycle: true,\n  supportsDestroyLifecycle: true,\n\n  _isDestroyed: false,\n\n  isDestroyed() {\n    return !!this._isDestroyed;\n  },\n\n  _isRendered: false,\n\n  isRendered() {\n    return !!this._isRendered;\n  },\n\n  _isAttached: false,\n\n  isAttached() {\n    return !!this._isAttached;\n  },\n\n  // Overriding Backbone.View's `delegateEvents` to handle\n  // `events` and `triggers`\n  delegateEvents(eventsArg) {\n\n    this._proxyBehaviorViewProperties();\n    this._buildEventProxies();\n\n    const viewEvents = this._getEvents(eventsArg);\n\n    if (typeof eventsArg === 'undefined') {\n      this.events = viewEvents;\n    }\n\n    const combinedEvents = _.extend({},\n      this._getBehaviorEvents(),\n      viewEvents,\n      this._getBehaviorTriggers(),\n      this.getTriggers()\n    );\n\n    Backbone.View.prototype.delegateEvents.call(this, combinedEvents);\n\n    return this;\n  },\n\n  _getEvents(eventsArg) {\n    const events = eventsArg || this.events;\n\n    if (_.isFunction(events)) {\n      return this.normalizeUIKeys(events.call(this));\n    }\n\n    return this.normalizeUIKeys(events);\n  },\n\n  // Configure `triggers` to forward DOM events to view\n  // events. `triggers: {\"click .foo\": \"do:foo\"}`\n  getTriggers() {\n    if (!this.triggers) { return; }\n\n    // Allow `triggers` to be configured as a function\n    const triggers = this.normalizeUIKeys(_.result(this, 'triggers'));\n\n    // Configure the triggers, prevent default\n    // action and stop propagation of DOM events\n    return this._getViewTriggers(this, triggers);\n  },\n\n  // Handle `modelEvents`, and `collectionEvents` configuration\n  delegateEntityEvents() {\n    this._delegateEntityEvents(this.model, this.collection);\n\n    // bind each behaviors model and collection events\n    this._delegateBehaviorEntityEvents();\n\n    return this;\n  },\n\n  // Handle unbinding `modelEvents`, and `collectionEvents` configuration\n  undelegateEntityEvents() {\n    this._undelegateEntityEvents(this.model, this.collection);\n\n    // unbind each behaviors model and collection events\n    this._undelegateBehaviorEntityEvents();\n\n    return this;\n  },\n\n  // Internal helper method to verify whether the view hasn't been destroyed\n  _ensureViewIsIntact() {\n    if (this._isDestroyed) {\n      throw new MarionetteError({\n        name: 'ViewDestroyedError',\n        message: `View (cid: \"${this.cid}\") has already been destroyed and cannot be used.`\n      });\n    }\n  },\n\n  // Handle destroying the view and its children.\n  destroy(...args) {\n    if (this._isDestroyed) { return this; }\n    const shouldTriggerDetach = !!this._isAttached;\n\n    this.triggerMethod('before:destroy', this, ...args);\n    if (shouldTriggerDetach) {\n      this.triggerMethod('before:detach', this);\n    }\n\n    // unbind UI elements\n    this.unbindUIElements();\n\n    // remove the view from the DOM\n    // https://github.com/jashkenas/backbone/blob/1.2.3/backbone.js#L1235\n    this._removeElement();\n\n    if (shouldTriggerDetach) {\n      this._isAttached = false;\n      this.triggerMethod('detach', this);\n    }\n\n    // remove children after the remove to prevent extra paints\n    this._removeChildren();\n\n    this._destroyBehaviors(args);\n\n    this._isDestroyed = true;\n    this._isRendered = false;\n    this.triggerMethod('destroy', this, ...args);\n\n    this.stopListening();\n\n    return this;\n  },\n\n  bindUIElements() {\n    this._bindUIElements();\n    this._bindBehaviorUIElements();\n\n    return this;\n  },\n\n  // This method unbinds the elements specified in the \"ui\" hash\n  unbindUIElements() {\n    this._unbindUIElements();\n    this._unbindBehaviorUIElements();\n\n    return this;\n  },\n\n  getUI(name) {\n    this._ensureViewIsIntact();\n    return this._getUI(name);\n  },\n\n  // used as the prefix for child view events\n  // that are forwarded through the layoutview\n  childViewEventPrefix: 'childview',\n\n  // import the `triggerMethod` to trigger events with corresponding\n  // methods if the method exists\n  triggerMethod() {\n    const ret = triggerMethod.apply(this, arguments);\n\n    this._triggerEventOnBehaviors.apply(this, arguments);\n    this._triggerEventOnParentLayout.apply(this, arguments);\n\n    return ret;\n  },\n\n  // Cache `childViewEvents` and `childViewTriggers`\n  _buildEventProxies() {\n    this._childViewEvents = _.result(this, 'childViewEvents');\n    this._childViewTriggers = _.result(this, 'childViewTriggers');\n  },\n\n  _triggerEventOnParentLayout() {\n    const layoutView = this._parentView();\n    if (!layoutView) {\n      return;\n    }\n\n    layoutView._childViewEventHandler.apply(layoutView, arguments);\n  },\n\n  // Walk the _parent tree until we find a view (if one exists).\n  // Returns the parent view hierarchically closest to this view.\n  _parentView() {\n    let parent = this._parent;\n\n    while (parent) {\n      if (parent instanceof View) {\n        return parent;\n      }\n      parent = parent._parent;\n    }\n  },\n\n  _childViewEventHandler(eventName, ...args) {\n    const childViewEvents = this.normalizeMethods(this._childViewEvents);\n\n    // call collectionView childViewEvent if defined\n    if (typeof childViewEvents !== 'undefined' && _.isFunction(childViewEvents[eventName])) {\n      childViewEvents[eventName].apply(this, args);\n    }\n\n    // use the parent view's proxyEvent handlers\n    const childViewTriggers = this._childViewTriggers;\n\n    // Call the event with the proxy name on the parent layout\n    if (childViewTriggers && _.isString(childViewTriggers[eventName])) {\n      this.triggerMethod(childViewTriggers[eventName], ...args);\n    }\n\n    const prefix = _.result(this, 'childViewEventPrefix');\n\n    if (prefix !== false) {\n      const childEventName = prefix + ':' + eventName;\n\n      this.triggerMethod(childEventName, ...args);\n    }\n  }\n};\n\n_.extend(ViewMixin, BehaviorsMixin, CommonMixin, DelegateEntityEventsMixin, TriggersMixin,  UIMixin);\n\nexport default ViewMixin;\n","import { triggerMethodOn } from '../common/trigger-method';\n\nexport default function destroyBackboneView(view) {\n  if (!view.supportsDestroyLifecycle) {\n    triggerMethodOn(view, 'before:destroy', view);\n  }\n\n  const shouldTriggerDetach = !!view._isAttached;\n\n  if (shouldTriggerDetach) {\n    triggerMethodOn(view, 'before:detach', view);\n  }\n\n  view.remove();\n\n  if (shouldTriggerDetach) {\n    view._isAttached = false;\n    triggerMethodOn(view, 'detach', view);\n  }\n\n  view._isDestroyed = true;\n\n  if (!view.supportsDestroyLifecycle) {\n    triggerMethodOn(view, 'destroy', view);\n  }\n}\n","// Region\n// ------\n\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport deprecate from './utils/deprecate';\nimport destroyBackboneView from './utils/destroy-backbone-view';\nimport monitorViewEvents from './common/monitor-view-events';\nimport isNodeAttached from './common/is-node-attached';\nimport { triggerMethodOn } from './common/trigger-method';\nimport MarionetteObject from './object';\nimport MarionetteError from './error';\n\nconst ClassOptions = [\n  'allowMissingEl',\n  'parentEl',\n  'replaceElement'\n];\n\nconst Region = MarionetteObject.extend({\n  cidPrefix: 'mnr',\n  replaceElement: false,\n  _isReplaced: false,\n\n  constructor(options) {\n    this._setOptions(options);\n\n    this.mergeOptions(options, ClassOptions);\n\n    // getOption necessary because options.el may be passed as undefined\n    this._initEl = this.el = this.getOption('el');\n\n    // Handle when this.el is passed in as a $ wrapped element.\n    this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;\n\n    if (!this.el) {\n      throw new MarionetteError({\n        name: 'NoElError',\n        message: 'An \"el\" must be specified for a region.'\n      });\n    }\n\n    this.$el = this.getEl(this.el);\n    MarionetteObject.call(this, options);\n  },\n\n  // Displays a backbone view instance inside of the region. Handles calling the `render`\n  // method for you. Reads content directly from the `el` attribute. The `preventDestroy`\n  // option can be used to prevent a view from the old view being destroyed on show.\n  show(view, options) {\n    if (!this._ensureElement(options)) {\n      return;\n    }\n    this._ensureView(view);\n    if (view === this.currentView) { return this; }\n\n    this.triggerMethod('before:show', this, view, options);\n\n    monitorViewEvents(view);\n\n    this.empty(options);\n\n    // We need to listen for if a view is destroyed in a way other than through the region.\n    // If this happens we need to remove the reference to the currentView since once a view\n    // has been destroyed we can not reuse it.\n    view.on('destroy', this._empty, this);\n\n    // Make this region the view's parent.\n    // It's important that this parent binding happens before rendering so that any events\n    // the child may trigger during render can also be triggered on the child's ancestor views.\n    view._parent = this;\n\n    this._renderView(view);\n\n    this._attachView(view, options);\n\n    this.triggerMethod('show', this, view, options);\n    return this;\n  },\n\n  _renderView(view) {\n    if (view._isRendered) {\n      return;\n    }\n\n    if (!view.supportsRenderLifecycle) {\n      triggerMethodOn(view, 'before:render', view);\n    }\n\n    view.render();\n\n    if (!view.supportsRenderLifecycle) {\n      view._isRendered = true;\n      triggerMethodOn(view, 'render', view);\n    }\n  },\n\n  _attachView(view, options = {}) {\n    const shouldTriggerAttach = !view._isAttached && isNodeAttached(this.el);\n    const shouldReplaceEl = typeof options.replaceElement === 'undefined' ? !!_.result(this, 'replaceElement') : !!options.replaceElement;\n\n    if (shouldTriggerAttach) {\n      triggerMethodOn(view, 'before:attach', view);\n    }\n\n    if (shouldReplaceEl) {\n      this._replaceEl(view);\n    } else {\n      this.attachHtml(view);\n    }\n\n    if (shouldTriggerAttach) {\n      view._isAttached = true;\n      triggerMethodOn(view, 'attach', view);\n    }\n\n    this.currentView = view;\n  },\n\n  _ensureElement(options = {}) {\n    if (!_.isObject(this.el)) {\n      this.$el = this.getEl(this.el);\n      this.el = this.$el[0];\n    }\n\n    if (!this.$el || this.$el.length === 0) {\n      const allowMissingEl = typeof options.allowMissingEl === 'undefined' ? !!_.result(this, 'allowMissingEl') : !!options.allowMissingEl;\n\n      if (allowMissingEl) {\n        return false;\n      } else {\n        throw new MarionetteError(`An \"el\" must exist in DOM for this region ${this.cid}`);\n      }\n    }\n    return true;\n  },\n\n  _ensureView(view) {\n    if (!view) {\n      throw new MarionetteError({\n        name: 'ViewNotValid',\n        message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'\n      });\n    }\n\n    if (view._isDestroyed) {\n      throw new MarionetteError({\n        name: 'ViewDestroyedError',\n        message: `View (cid: \"${view.cid}\") has already been destroyed and cannot be used.`\n      });\n    }\n  },\n\n  // Override this method to change how the region finds the DOM element that it manages. Return\n  // a jQuery selector object scoped to a provided parent el or the document if none exists.\n  getEl(el) {\n    return Backbone.$(el, _.result(this, 'parentEl'));\n  },\n\n  _replaceEl(view) {\n    // always restore the el to ensure the regions el is present before replacing\n    this._restoreEl();\n\n    const parent = this.el.parentNode;\n\n    parent.replaceChild(view.el, this.el);\n    this._isReplaced = true;\n  },\n\n  // Restore the region's element in the DOM.\n  _restoreEl() {\n    // There is nothing to replace\n    if (!this._isReplaced) {\n      return;\n    }\n\n    const view = this.currentView;\n\n    if (!view) {\n      return;\n    }\n\n    const parent = view.el.parentNode;\n\n    if (!parent) {\n      return;\n    }\n\n    parent.replaceChild(this.el, view.el);\n    this._isReplaced = false;\n  },\n\n  // Check to see if the region's el was replaced.\n  isReplaced() {\n    return !!this._isReplaced;\n  },\n\n  // Override this method to change how the new view is appended to the `$el` that the\n  // region is managing\n  attachHtml(view) {\n    this.el.appendChild(view.el);\n  },\n\n  // Destroy the current view, if there is one. If there is no current view, it does\n  // nothing and returns immediately.\n  empty(options = { allowMissingEl: true }) {\n    const view = this.currentView;\n\n    // If there is no view in the region we should only detach current html\n    if (!view) {\n      if (this._ensureElement(options)) {\n        this.detachHtml();\n      }\n      return this;\n    }\n\n    const shouldDestroy = !options.preventDestroy;\n\n    if (!shouldDestroy) {\n      deprecate('The preventDestroy option is deprecated. Use Region#detachView');\n    }\n\n    this._empty(view, shouldDestroy);\n    return this;\n  },\n\n  _empty(view, shouldDestroy) {\n    view.off('destroy', this._empty, this);\n    this.triggerMethod('before:empty', this, view);\n\n    this._restoreEl();\n\n    delete this.currentView;\n\n    if (!view._isDestroyed) {\n      this._removeView(view, shouldDestroy);\n      delete view._parent;\n    }\n\n    this.triggerMethod('empty', this, view);\n  },\n\n  _removeView(view, shouldDestroy) {\n    if (!shouldDestroy) {\n      this._detachView(view);\n      return;\n    }\n\n    if (view.destroy) {\n      view.destroy();\n    } else {\n      destroyBackboneView(view);\n    }\n  },\n\n  detachView() {\n    const view = this.currentView;\n\n    if (!view) {\n      return;\n    }\n\n    this._empty(view);\n\n    return view;\n  },\n\n  _detachView(view) {\n    const shouldTriggerDetach = !!view._isAttached;\n    if (shouldTriggerDetach) {\n      triggerMethodOn(view, 'before:detach', view);\n    }\n\n    this.detachHtml();\n\n    if (shouldTriggerDetach) {\n      view._isAttached = false;\n      triggerMethodOn(view, 'detach', view);\n    }\n  },\n\n  // Override this method to change how the region detaches current content\n  detachHtml() {\n    this.$el.contents().detach();\n  },\n\n  // Checks whether a view is currently present within the region. Returns `true` if there is\n  // and `false` if no view is present.\n  hasView() {\n    return !!this.currentView;\n  },\n\n  // Reset the region by destroying any existing view and clearing out the cached `$el`.\n  // The next time a view is shown via this region, the region will re-query the DOM for\n  // the region's `el`.\n  reset(options) {\n    this.empty(options);\n\n    if (this.$el) {\n      this.el = this._initEl;\n    }\n\n    delete this.$el;\n    return this;\n  },\n\n  destroy(options) {\n    this.reset(options);\n    return MarionetteObject.prototype.destroy.apply(this, arguments);\n  }\n});\n\nexport default Region;\n","import _ from 'underscore';\nimport deprecate from '../utils/deprecate';\nimport MarionetteError from '../error';\nimport Region from '../region';\n\n// return the region instance from the definition\nexport default function(definition, defaults) {\n  if (definition instanceof Region) {\n    return definition;\n  }\n\n  return buildRegionFromDefinition(definition, defaults);\n}\n\nfunction buildRegionFromDefinition(definition, defaults) {\n  const opts = _.extend({}, defaults);\n\n  if (_.isString(definition)) {\n    _.extend(opts, { el: definition });\n\n    return buildRegionFromObject(opts);\n  }\n\n  if (_.isFunction(definition)) {\n    _.extend(opts, { regionClass: definition });\n\n    return buildRegionFromObject(opts);\n  }\n\n  if (_.isObject(definition)) {\n    if (definition.selector) {\n      deprecate('The selector option on a Region definition object is deprecated. Use el to pass a selector string');\n    }\n\n    _.extend(opts, { el: definition.selector }, definition);\n\n    return buildRegionFromObject(opts);\n  }\n\n  throw new MarionetteError({\n    message: 'Improper region configuration type.',\n    url: 'marionette.region.html#region-configuration-types'\n  });\n}\n\nfunction buildRegionFromObject(definition) {\n  const RegionClass = definition.regionClass\n\n  const options = _.omit(definition, 'regionClass');\n\n  return new RegionClass(options);\n}\n","import _ from 'underscore';\nimport _invoke from '../utils/invoke';\nimport buildRegion from '../common/build-region';\nimport Region from '../region';\n\n// MixinOptions\n// - regions\n// - regionClass\n\nexport default {\n  regionClass: Region,\n\n  // Internal method to initialize the regions that have been defined in a\n  // `regions` attribute on this View.\n  _initRegions() {\n\n    // init regions hash\n    this.regions =  this.regions || {};\n    this._regions = {};\n\n    this.addRegions(_.result(this, 'regions'));\n  },\n\n  // Internal method to re-initialize all of the regions by updating\n  // the `el` that they point to\n  _reInitRegions() {\n    _invoke(this._regions, 'reset');\n  },\n\n  // Add a single region, by name, to the View\n  addRegion(name, definition) {\n    const regions = {};\n    regions[name] = definition;\n    return this.addRegions(regions)[name];\n  },\n\n  // Add multiple regions as a {name: definition, name2: def2} object literal\n  addRegions(regions) {\n    // If there's nothing to add, stop here.\n    if (_.isEmpty(regions)) {\n      return;\n    }\n\n    // Normalize region selectors hash to allow\n    // a user to use the @ui. syntax.\n    regions = this.normalizeUIValues(regions, ['selector', 'el']);\n\n    // Add the regions definitions to the regions property\n    this.regions = _.extend({}, this.regions, regions);\n\n    return this._addRegions(regions);\n  },\n\n  // internal method to build and add regions\n  _addRegions(regionDefinitions) {\n    const defaults = {\n      regionClass: this.regionClass,\n      parentEl: _.partial(_.result, this, 'el')\n    };\n\n    return _.reduce(regionDefinitions, (regions, definition, name) => {\n      regions[name] = buildRegion(definition, defaults);\n      this._addRegion(regions[name], name);\n      return regions;\n    }, {});\n  },\n\n  _addRegion(region, name) {\n    this.triggerMethod('before:add:region', this, name, region);\n\n    region._parent = this;\n\n    this._regions[name] = region;\n\n    this.triggerMethod('add:region', this, name, region);\n  },\n\n  // Remove a single region from the View, by name\n  removeRegion(name) {\n    const region = this._regions[name];\n\n    this._removeRegion(region, name);\n\n    return region;\n  },\n\n  // Remove all regions from the View\n  removeRegions() {\n    const regions = this.getRegions();\n\n    _.each(this._regions, _.bind(this._removeRegion, this));\n\n    return regions;\n  },\n\n  _removeRegion(region, name) {\n    this.triggerMethod('before:remove:region', this, name, region);\n\n    region.destroy();\n\n    delete this.regions[name];\n    delete this._regions[name];\n\n    this.triggerMethod('remove:region', this, name, region);\n  },\n\n  // Empty all regions in the region manager, but\n  // leave them attached\n  emptyRegions() {\n    const regions = this.getRegions();\n    _invoke(regions, 'empty');\n    return regions;\n  },\n\n  // Checks to see if view contains region\n  // Accepts the region name\n  // hasRegion('main')\n  hasRegion(name) {\n    return !!this.getRegion(name);\n  },\n\n  // Provides access to regions\n  // Accepts the region name\n  // getRegion('main')\n  getRegion(name) {\n    return this._regions[name];\n  },\n\n  // Get all regions\n  getRegions() {\n    return _.clone(this._regions);\n  },\n\n  showChildView(name, view, ...args) {\n    const region = this.getRegion(name);\n    return region.show(view, ...args);\n  },\n\n  detachChildView(name) {\n    return this.getRegion(name).detachView();\n  },\n\n  getChildView(name) {\n    return this.getRegion(name).currentView;\n  }\n\n};\n","// Renderer\n// --------\n\nimport _               from 'underscore';\nimport MarionetteError from '../error';\nimport TemplateCache   from '../template-cache';\n\n// Render a template with data by passing in the template\n// selector and the data to render.\nconst Renderer = {\n\n  // Render a template with data. The `template` parameter is\n  // passed to the `TemplateCache` object to retrieve the\n  // template function. Override this method to provide your own\n  // custom rendering and template handling for all of Marionette.\n  render(template, data) {\n    if (!template) {\n      throw new MarionetteError({\n        name: 'TemplateNotFoundError',\n        message: 'Cannot render the template since its false, null or undefined.'\n      });\n    }\n\n    const templateFunc = _.isFunction(template) ? template : TemplateCache.get(template);\n\n    return templateFunc(data);\n  }\n};\n\nexport default Renderer;\n","// View\n// ---------\n\nimport _                  from 'underscore';\nimport Backbone           from 'backbone';\nimport isNodeAttached     from './common/is-node-attached';\nimport monitorViewEvents  from './common/monitor-view-events';\nimport ViewMixin          from './mixins/view';\nimport RegionsMixin       from './mixins/regions';\nimport Renderer           from './config/renderer';\n\nconst ClassOptions = [\n  'behaviors',\n  'childViewEventPrefix',\n  'childViewEvents',\n  'childViewTriggers',\n  'collectionEvents',\n  'events',\n  'modelEvents',\n  'regionClass',\n  'regions',\n  'template',\n  'templateContext',\n  'triggers',\n  'ui'\n];\n\n// The standard view. Includes view events, automatic rendering\n// of Underscore templates, nested views, and more.\nconst View = Backbone.View.extend({\n\n  constructor(options) {\n    this.render = _.bind(this.render, this);\n\n    this._setOptions(options);\n\n    this.mergeOptions(options, ClassOptions);\n\n    monitorViewEvents(this);\n\n    this._initBehaviors();\n    this._initRegions();\n\n    const args = Array.prototype.slice.call(arguments);\n    args[0] = this.options;\n    Backbone.View.prototype.constructor.apply(this, args);\n\n    this.delegateEntityEvents();\n  },\n\n  // Serialize the view's model *or* collection, if\n  // it exists, for the template\n  serializeData() {\n    if (!this.model && !this.collection) {\n      return {};\n    }\n\n    // If we have a model, we serialize that\n    if (this.model) {\n      return this.serializeModel();\n    }\n\n    // Otherwise, we serialize the collection,\n    // making it available under the `items` property\n    return {\n      items: this.serializeCollection()\n    };\n  },\n\n  // Prepares the special `model` property of a view\n  // for being displayed in the template. By default\n  // we simply clone the attributes. Override this if\n  // you need a custom transformation for your view's model\n  serializeModel() {\n    if (!this.model) { return {}; }\n    return _.clone(this.model.attributes);\n  },\n\n  // Serialize a collection by cloning each of\n  // its model's attributes\n  serializeCollection() {\n    if (!this.collection) { return {}; }\n    return this.collection.map(function(model) { return _.clone(model.attributes); });\n  },\n\n  // Overriding Backbone.View's `setElement` to handle\n  // if an el was previously defined. If so, the view might be\n  // rendered or attached on setElement.\n  setElement() {\n    const hasEl = !!this.el;\n\n    Backbone.View.prototype.setElement.apply(this, arguments);\n\n    if (hasEl) {\n      this._isRendered = !!this.$el.length;\n      this._isAttached = isNodeAttached(this.el);\n    }\n\n    if (this._isRendered) {\n      this.bindUIElements();\n    }\n\n    return this;\n  },\n\n  // Render the view, defaulting to underscore.js templates.\n  // You can override this in your view definition to provide\n  // a very specific rendering for your view. In general, though,\n  // you should override the `Marionette.Renderer` object to\n  // change how Marionette renders views.\n  // Subsequent renders after the first will re-render all nested\n  // views.\n  render() {\n    this._ensureViewIsIntact();\n\n    this.triggerMethod('before:render', this);\n\n    // If this is not the first render call, then we need to\n    // re-initialize the `el` for each region\n    if (this._isRendered) {\n      this._reInitRegions();\n    }\n\n    this._renderTemplate();\n    this.bindUIElements();\n\n    this._isRendered = true;\n    this.triggerMethod('render', this);\n\n    return this;\n  },\n\n  // Internal method to render the template with the serialized data\n  // and template context via the `Marionette.Renderer` object.\n  _renderTemplate() {\n    const template = this.getTemplate();\n\n    // Allow template-less views\n    if (template === false) {\n      return;\n    }\n\n    // Add in entity data and template context\n    const data = this.mixinTemplateContext(this.serializeData());\n\n    // Render and add to el\n    const html = Renderer.render(template, data, this);\n    this.attachElContent(html);\n  },\n\n  // Get the template for this view\n  // instance. You can set a `template` attribute in the view\n  // definition or pass a `template: \"whatever\"` parameter in\n  // to the constructor options.\n  getTemplate() {\n    return this.template;\n  },\n\n  // Mix in template context methods. Looks for a\n  // `templateContext` attribute, which can either be an\n  // object literal, or a function that returns an object\n  // literal. All methods and attributes from this object\n  // are copies to the object passed in.\n  mixinTemplateContext(target = {}) {\n    const templateContext = _.result(this, 'templateContext');\n    return _.extend(target, templateContext);\n  },\n\n  // Attaches the content of a given view.\n  // This method can be overridden to optimize rendering,\n  // or to render in a non standard way.\n  //\n  // For example, using `innerHTML` instead of `$el.html`\n  //\n  // ```js\n  // attachElContent(html) {\n  //   this.el.innerHTML = html;\n  //   return this;\n  // }\n  // ```\n  attachElContent(html) {\n    this.$el.html(html);\n\n    return this;\n  },\n\n  // called by ViewMixin destroy\n  _removeChildren() {\n    this.removeRegions();\n  },\n\n  _getImmediateChildren() {\n    return _.chain(this.getRegions())\n      .map('currentView')\n      .compact()\n      .value();\n  }\n});\n\n_.extend(View.prototype, ViewMixin, RegionsMixin);\n\nexport default View;\n","// Mix in methods from Underscore, for iteration, and other\n// collection related features.\n// Borrowing this code from Backbone.Collection:\n// https://github.com/jashkenas/backbone/blob/1.1.2/backbone.js#L962\n\nimport _ from 'underscore';\n\nconst methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n                'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n                'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n                'last', 'without', 'isEmpty', 'pluck', 'reduce'];\n\nconst emulateCollection = function(object, listProperty) {\n  _.each(methods, function(method) {\n    object[method] = function() {\n      const list = _.values(_.result(this, listProperty));\n      const args = [list].concat(_.toArray(arguments));\n      return _[method].apply(_, args);\n    };\n  });\n};\n\nexport default emulateCollection;\n","import _ from 'underscore';\nimport emulateCollection from './utils/emulate-collection';\n\n// Provide a container to store, retrieve and\n// shut down child views.\nconst Container = function(views) {\n  this._views = {};\n  this._indexByModel = {};\n  this._indexByCustom = {};\n  this._updateLength();\n\n  _.each(views, _.bind(this.add, this));\n};\n\nemulateCollection(Container.prototype, '_views');\n\n// Container Methods\n// -----------------\n\n_.extend(Container.prototype, {\n\n  // Add a view to this container. Stores the view\n  // by `cid` and makes it searchable by the model\n  // cid (and model itself). Optionally specify\n  // a custom key to store an retrieve the view.\n  add(view, customIndex) {\n    return this._add(view, customIndex)._updateLength();\n  },\n\n  // To be used when avoiding call _updateLength\n  // When you are done adding all your new views\n  // call _updateLength\n  _add(view, customIndex) {\n    const viewCid = view.cid;\n\n    // store the view\n    this._views[viewCid] = view;\n\n    // index it by model\n    if (view.model) {\n      this._indexByModel[view.model.cid] = viewCid;\n    }\n\n    // index by custom\n    if (customIndex) {\n      this._indexByCustom[customIndex] = viewCid;\n    }\n\n    return this;\n  },\n\n  // Find a view by the model that was attached to\n  // it. Uses the model's `cid` to find it.\n  findByModel(model) {\n    return this.findByModelCid(model.cid);\n  },\n\n  // Find a view by the `cid` of the model that was attached to\n  // it. Uses the model's `cid` to find the view `cid` and\n  // retrieve the view using it.\n  findByModelCid(modelCid) {\n    const viewCid = this._indexByModel[modelCid];\n    return this.findByCid(viewCid);\n  },\n\n  // Find a view by a custom indexer.\n  findByCustom(index) {\n    const viewCid = this._indexByCustom[index];\n    return this.findByCid(viewCid);\n  },\n\n  // Find by index. This is not guaranteed to be a\n  // stable index.\n  findByIndex(index) {\n    return _.values(this._views)[index];\n  },\n\n  // retrieve a view by its `cid` directly\n  findByCid(cid) {\n    return this._views[cid];\n  },\n\n  // Remove a view\n  remove(view) {\n    return this._remove(view)._updateLength();\n  },\n\n  // To be used when avoiding call _updateLength\n  // When you are done adding all your new views\n  // call _updateLength\n  _remove(view) {\n    const viewCid = view.cid;\n\n    // delete model index\n    if (view.model) {\n      delete this._indexByModel[view.model.cid];\n    }\n\n    // delete custom index\n    _.some(this._indexByCustom, _.bind(function(cid, key) {\n      if (cid === viewCid) {\n        delete this._indexByCustom[key];\n        return true;\n      }\n    }, this));\n\n    // remove the view from the container\n    delete this._views[viewCid];\n\n    return this;\n  },\n\n  // Update the `.length` attribute on this container\n  _updateLength() {\n    this.length = _.size(this._views);\n\n    return this;\n  }\n});\n\nexport default Container;\n","// Collection View\n// ---------------\n\nimport _                  from 'underscore';\nimport Backbone           from 'backbone';\nimport destroyBackboneView from './utils/destroy-backbone-view';\nimport isNodeAttached     from './common/is-node-attached';\nimport monitorViewEvents  from './common/monitor-view-events';\nimport { triggerMethodOn } from './common/trigger-method';\nimport ChildViewContainer from './child-view-container';\nimport MarionetteError    from './error';\nimport ViewMixin          from './mixins/view';\n\nconst ClassOptions = [\n  'behaviors',\n  'childView',\n  'childViewEventPrefix',\n  'childViewEvents',\n  'childViewOptions',\n  'childViewTriggers',\n  'collectionEvents',\n  'events',\n  'filter',\n  'emptyView',\n  'emptyViewOptions',\n  'modelEvents',\n  'reorderOnSort',\n  'sort',\n  'triggers',\n  'ui',\n  'viewComparator'\n];\n\n// A view that iterates over a Backbone.Collection\n// and renders an individual child view for each model.\nconst CollectionView = Backbone.View.extend({\n\n  // flag for maintaining the sorted order of the collection\n  sort: true,\n\n  // constructor\n  // option to pass `{sort: false}` to prevent the `CollectionView` from\n  // maintaining the sorted order of the collection.\n  // This will fallback onto appending childView's to the end.\n  //\n  // option to pass `{viewComparator: compFunction()}` to allow the `CollectionView`\n  // to use a custom sort order for the collection.\n  constructor(options) {\n    this.render = _.bind(this.render, this);\n\n    this._setOptions(options);\n\n    this.mergeOptions(options, ClassOptions);\n\n    monitorViewEvents(this);\n\n    this._initBehaviors();\n    this.once('render', this._initialEvents);\n    this._initChildViewStorage();\n    this._bufferedChildren = [];\n\n    const args = Array.prototype.slice.call(arguments);\n    args[0] = this.options;\n    Backbone.View.prototype.constructor.apply(this, args);\n\n    this.delegateEntityEvents();\n  },\n\n  // Instead of inserting elements one by one into the page, it's much more performant to insert\n  // elements into a document fragment and then insert that document fragment into the page\n  _startBuffering() {\n    this._isBuffering = true;\n  },\n\n  _endBuffering() {\n    const shouldTriggerAttach = !!this._isAttached;\n    const triggerOnChildren = shouldTriggerAttach ? this._getImmediateChildren() : [];\n\n    this._isBuffering = false;\n\n    _.each(triggerOnChildren, child => {\n      triggerMethodOn(child, 'before:attach', child);\n    });\n\n    this.attachBuffer(this, this._createBuffer());\n\n    _.each(triggerOnChildren, child => {\n      child._isAttached = true;\n      triggerMethodOn(child, 'attach', child);\n    });\n\n    this._bufferedChildren = [];\n  },\n\n  _getImmediateChildren() {\n    return _.values(this.children._views);\n  },\n\n  // Configured the initial events that the collection view binds to.\n  _initialEvents() {\n    if (this.collection) {\n      this.listenTo(this.collection, 'add', this._onCollectionAdd);\n      this.listenTo(this.collection, 'update', this._onCollectionUpdate);\n      this.listenTo(this.collection, 'reset', this.render);\n\n      if (this.sort) {\n        this.listenTo(this.collection, 'sort', this._sortViews);\n      }\n    }\n  },\n\n  // Handle a child added to the collection\n  _onCollectionAdd(child, collection, opts) {\n    // `index` is present when adding with `at` since BB 1.2; indexOf fallback for < 1.2\n    let index = opts.at !== undefined && (opts.index || collection.indexOf(child));\n\n    // When filtered or when there is no initial index, calculate index.\n    if (this.filter || index === false) {\n      index = _.indexOf(this._filteredSortedModels(index), child);\n    }\n\n    if (this._shouldAddChild(child, index)) {\n      this._destroyEmptyView();\n      this._addChild(child, index)\n    }\n  },\n\n  // Handle collection update model removals\n  _onCollectionUpdate(collection, options) {\n    const changes = options.changes;\n    this._removeChildModels(changes.removed);\n  },\n\n  // Remove the child views and destroy them.\n  // This function also updates the indices of later views\n  // in the collection in order to keep the children in sync with the collection.\n  // \"models\" is an array of models and the corresponding views\n  // will be removed and destroyed from the CollectionView\n  _removeChildModels(models, {checkEmpty} = {}) {\n    const shouldCheckEmpty = checkEmpty !== false;\n\n    // Used to determine where to update the remaining\n    // sibling view indices after these views are removed.\n    const removedViews = this._getRemovedViews(models);\n\n    if (!removedViews.length) {\n      return;\n    }\n\n    this.children._updateLength();\n\n    // decrement the index of views after this one\n    this._updateIndices(removedViews, false);\n\n    if (shouldCheckEmpty) {\n      this._checkEmpty();\n    }\n  },\n\n  // Returns the views that will be used for re-indexing\n  // through CollectionView#_updateIndices.\n  _getRemovedViews(models) {\n\n    // Returning a view means something was removed.\n    return _.reduce(models, (removingViews, model) => {\n      const view = this.children.findByModel(model);\n\n      if (!view || view._isDestroyed) {\n        return removingViews;\n      }\n\n      this._removeChildView(view);\n\n      removingViews.push(view);\n\n      return removingViews;\n    }, []);\n  },\n\n  _findGreatestIndexedView(views) {\n\n    return _.reduce(views, (greatestIndexedView, view) => {\n      // Even if the index is `undefined`, a view will get returned.\n      if (!greatestIndexedView || greatestIndexedView._index < view._index) {\n        return view;\n      }\n\n      return greatestIndexedView;\n    }, undefined);\n  },\n\n  _removeChildView(view) {\n    this.triggerMethod('before:remove:child', this, view);\n\n    this.children._remove(view);\n    if (view.destroy) {\n      view.destroy();\n    } else {\n      destroyBackboneView(view);\n    }\n\n    delete view._parent;\n    this.stopListening(view);\n    this.triggerMethod('remove:child', this, view);\n  },\n\n  // Overriding Backbone.View's `setElement` to handle\n  // if an el was previously defined. If so, the view might be\n  // attached on setElement.\n  setElement() {\n    const hasEl = !!this.el;\n\n    Backbone.View.prototype.setElement.apply(this, arguments);\n\n    if (hasEl) {\n      this._isAttached = isNodeAttached(this.el);\n    }\n\n    return this;\n  },\n\n  // Render children views. Override this method to provide your own implementation of a\n  // render function for the collection view.\n  render() {\n    this._ensureViewIsIntact();\n    this.triggerMethod('before:render', this);\n    this._renderChildren();\n    this._isRendered = true;\n    this.triggerMethod('render', this);\n    return this;\n  },\n\n  // An efficient rendering used for filtering. Instead of modifying the whole DOM for the\n  // collection view, we are only adding or removing the related childrenViews.\n  setFilter(filter, {preventRender} = {}) {\n    const canBeRendered = this._isRendered && !this._isDestroyed;\n    const filterChanged = this.filter !== filter;\n    const shouldRender = canBeRendered && filterChanged && !preventRender;\n\n    if (shouldRender) {\n      const previousModels = this._filteredSortedModels();\n      this.filter = filter;\n      const models = this._filteredSortedModels();\n      this._applyModelDeltas(models, previousModels);\n    } else {\n      this.filter = filter;\n    }\n\n    return this;\n  },\n\n  // `removeFilter` is actually an alias for removing filters.\n  removeFilter(options) {\n    return this.setFilter(null, options);\n  },\n\n  // Calculate and apply difference by cid between `models` and `previousModels`.\n  _applyModelDeltas(models, previousModels) {\n    const currentIds = {};\n    _.each(models, (model, index) => {\n      const addedChildNotExists = !this.children.findByModel(model);\n      if (addedChildNotExists) {\n        this._onCollectionAdd(model, this.collection, {at: index});\n      }\n      currentIds[model.cid] = true;\n    });\n\n    const removeModels = _.filter(previousModels, (prevModel) => {\n      return !currentIds[prevModel.cid] && this.children.findByModel(prevModel);\n    });\n\n    this._removeChildModels(removeModels);\n  },\n\n  // Reorder DOM after sorting. When your element's rendering do not use their index,\n  // you can pass reorderOnSort: true to only reorder the DOM after a sort instead of\n  // rendering all the collectionView.\n  reorder() {\n    const children = this.children;\n    const models = this._filteredSortedModels();\n\n    if (!models.length && this._showingEmptyView) { return this; }\n\n    const anyModelsAdded = _.some(models, function(model) {\n      return !children.findByModel(model);\n    });\n\n    // If there are any new models added due to filtering we need to add child views,\n    // so render as normal.\n    if (anyModelsAdded) {\n      this.render();\n    } else {\n\n      const filteredOutModels = [];\n\n      // Get the DOM nodes in the same order as the models and\n      // find the model that were children before but aren't in this new order.\n      const elsToReorder = children.reduce(function(viewEls, view) {\n        const index = _.indexOf(models, view.model);\n\n        if (index === -1) {\n          filteredOutModels.push(view.model);\n          return viewEls;\n        }\n\n        view._index = index;\n\n        viewEls[index] = view.el;\n\n        return viewEls;\n      }, new Array(models.length));\n\n      this.triggerMethod('before:reorder', this);\n\n      // Since append moves elements that are already in the DOM, appending the elements\n      // will effectively reorder them.\n      this._appendReorderedChildren(elsToReorder);\n\n      // remove any views that have been filtered out\n      this._removeChildModels(filteredOutModels);\n\n      this.triggerMethod('reorder', this);\n    }\n    return this;\n  },\n\n  // Render view after sorting. Override this method to change how the view renders\n  // after a `sort` on the collection.\n  resortView() {\n    if (this.reorderOnSort) {\n      this.reorder();\n    } else {\n      this._renderChildren();\n    }\n    return this;\n  },\n\n  // Internal method. This checks for any changes in the order of the collection.\n  // If the index of any view doesn't match, it will render.\n  _sortViews() {\n    const models = this._filteredSortedModels();\n\n    // check for any changes in sort order of views\n    const orderChanged = _.find(models, (item, index) => {\n      const view = this.children.findByModel(item);\n      return !view || view._index !== index;\n    });\n\n    if (orderChanged) {\n      this.resortView();\n    }\n  },\n\n  // Internal reference to what index a `emptyView` is.\n  _emptyViewIndex: -1,\n\n  // Internal method. Separated so that CompositeView can append to the childViewContainer\n  // if necessary\n  _appendReorderedChildren(children) {\n    this.$el.append(children);\n  },\n\n  // Internal method. Separated so that CompositeView can have more control over events\n  // being triggered, around the rendering process\n  _renderChildren() {\n    if (this._isRendered) {\n      this._destroyEmptyView();\n      this._destroyChildren({checkEmpty: false});\n    }\n\n    const models = this._filteredSortedModels();\n    if (this.isEmpty({processedModels: models})) {\n      this._showEmptyView();\n    } else {\n      this.triggerMethod('before:render:children', this);\n      this._startBuffering();\n      this._showCollection(models);\n      this._endBuffering();\n      this.triggerMethod('render:children', this);\n    }\n  },\n\n  _createView(model, index) {\n    const ChildView = this._getChildView(model);\n    const childViewOptions = this._getChildViewOptions(model, index);\n    const view = this.buildChildView(model, ChildView, childViewOptions);\n    return view;\n  },\n\n  _setupChildView(view, index) {\n    view._parent = this;\n\n    monitorViewEvents(view);\n\n    // set up the child view event forwarding\n    this._proxyChildEvents(view);\n\n    if (this.sort) {\n      view._index = index;\n    }\n  },\n\n  // Internal method to loop through collection and show each child view.\n  _showCollection(models) {\n    _.each(models, _.bind(this._addChild, this));\n    this.children._updateLength();\n  },\n\n  // Allow the collection to be sorted by a custom view comparator\n  _filteredSortedModels(addedAt) {\n    if (!this.collection || !this.collection.length) { return []; }\n\n    const viewComparator = this.getViewComparator();\n    let models = this.collection.models;\n    addedAt = Math.min(Math.max(addedAt, 0), models.length - 1);\n\n    if (viewComparator) {\n      let addedModel;\n      // Preserve `at` location, even for a sorted view\n      if (addedAt) {\n        addedModel = models[addedAt];\n        models = models.slice(0, addedAt).concat(models.slice(addedAt + 1));\n      }\n      models = this._sortModelsBy(models, viewComparator);\n      if (addedModel) {\n        models.splice(addedAt, 0, addedModel);\n      }\n    }\n\n    // Filter after sorting in case the filter uses the index\n    models = this._filterModels(models);\n\n    return models;\n  },\n\n  getViewComparator() {\n    return this.viewComparator;\n  },\n\n  // Filter an array of models, if a filter exists\n  _filterModels(models) {\n    if (this.filter) {\n      models = _.filter(models, (model, index) => {\n        return this._shouldAddChild(model, index);\n      });\n    }\n    return models;\n  },\n\n  _sortModelsBy(models, comparator) {\n    if (typeof comparator === 'string') {\n      return _.sortBy(models, (model) => {\n        return model.get(comparator);\n      });\n    } else if (comparator.length === 1) {\n      return _.sortBy(models, _.bind(comparator, this));\n    } else {\n      return models.sort(_.bind(comparator, this));\n    }\n  },\n\n  // Internal method to show an empty view in place of a collection of child views,\n  // when the collection is empty\n  _showEmptyView() {\n    const EmptyView = this._getEmptyView();\n\n    if (EmptyView && !this._showingEmptyView) {\n      this._showingEmptyView = true;\n\n      const model = new Backbone.Model();\n      let emptyViewOptions =\n        this.emptyViewOptions || this.childViewOptions;\n      if (_.isFunction(emptyViewOptions)) {\n        emptyViewOptions = emptyViewOptions.call(this, model, this._emptyViewIndex);\n      }\n\n      const view = this.buildChildView(model, EmptyView, emptyViewOptions);\n\n      this.triggerMethod('before:render:empty', this, view);\n      this.addChildView(view, 0);\n      this.triggerMethod('render:empty', this, view);\n    }\n  },\n\n  // Internal method to destroy an existing emptyView instance if one exists. Called when\n  // a collection view has been rendered empty, and then a child is added to the collection.\n  _destroyEmptyView() {\n    if (this._showingEmptyView) {\n      this.triggerMethod('before:remove:empty', this);\n\n      this._destroyChildren();\n      delete this._showingEmptyView;\n\n      this.triggerMethod('remove:empty', this);\n    }\n  },\n\n  // Retrieve the empty view class\n  _getEmptyView() {\n    const emptyView = this.emptyView;\n\n    if (!emptyView) { return; }\n\n    return this._getView(emptyView);\n  },\n\n  // Retrieve the `childView` class\n  // The `childView` property can be either a view class or a function that\n  // returns a view class. If it is a function, it will receive the model that\n  // will be passed to the view instance (created from the returned view class)\n  _getChildView(child) {\n    let childView = this.childView;\n\n    if (!childView) {\n      throw new MarionetteError({\n        name: 'NoChildViewError',\n        message: 'A \"childView\" must be specified'\n      });\n    }\n\n    childView = this._getView(childView, child);\n\n    if (!childView) {\n      throw new MarionetteError({\n        name: 'InvalidChildViewError',\n        message: '\"childView\" must be a view class or a function that returns a view class'\n      });\n    }\n\n    return childView;\n  },\n\n  // First check if the `view` is a view class (the common case)\n  // Then check if it's a function (which we assume that returns a view class)\n  _getView(view, child) {\n    if (view.prototype instanceof Backbone.View || view === Backbone.View) {\n      return view;\n    } else if (_.isFunction(view)) {\n      return view.call(this, child);\n    }\n  },\n\n  // Internal method for building and adding a child view\n  _addChild(child, index) {\n    const view = this._createView(child, index);\n    this.addChildView(view, index);\n\n    return view;\n  },\n\n  _getChildViewOptions(child, index) {\n    if (_.isFunction(this.childViewOptions)) {\n      return this.childViewOptions(child, index);\n    }\n\n    return this.childViewOptions;\n  },\n\n  // Render the child's view and add it to the HTML for the collection view at a given index.\n  // This will also update the indices of later views in the collection in order to keep the\n  // children in sync with the collection.\n  addChildView(view, index) {\n    this.triggerMethod('before:add:child', this, view);\n    this._setupChildView(view, index);\n\n    // Store the child view itself so we can properly remove and/or destroy it later\n    if (this._isBuffering) {\n      // Add to children, but don't update children's length.\n      this.children._add(view);\n    } else {\n      // increment indices of views after this one\n      this._updateIndices(view, true);\n      this.children.add(view);\n    }\n\n    this._renderView(view);\n\n    this._attachView(view, index);\n\n    this.triggerMethod('add:child', this, view);\n\n    return view;\n  },\n\n  // Internal method. This decrements or increments the indices of views after the added/removed\n  // view to keep in sync with the collection.\n  _updateIndices(views, increment) {\n    if (!this.sort) {\n      return;\n    }\n\n    const view = _.isArray(views) ? this._findGreatestIndexedView(views) : views;\n\n    // update the indexes of views after this one\n    this.children.each((laterView) => {\n      if (laterView._index >= view._index) {\n        laterView._index += increment ? 1 : -1;\n      }\n    });\n  },\n\n  _renderView(view) {\n    if (view._isRendered) {\n      return;\n    }\n\n    if (!view.supportsRenderLifecycle) {\n      triggerMethodOn(view, 'before:render', view);\n    }\n\n    view.render();\n\n    if (!view.supportsRenderLifecycle) {\n      view._isRendered = true;\n      triggerMethodOn(view, 'render', view);\n    }\n  },\n\n  _attachView(view, index) {\n    // Only trigger attach if already attached and not buffering,\n    // otherwise _endBuffering() or Region#show() handles this.\n    const shouldTriggerAttach = !view._isAttached && !this._isBuffering && this._isAttached;\n\n    if (shouldTriggerAttach) {\n      triggerMethodOn(view, 'before:attach', view);\n    }\n\n    this.attachHtml(this, view, index);\n\n    if (shouldTriggerAttach) {\n      view._isAttached = true;\n      triggerMethodOn(view, 'attach', view);\n    }\n  },\n\n  // Build a `childView` for a model in the collection.\n  buildChildView(child, ChildViewClass, childViewOptions) {\n    const options = _.extend({model: child}, childViewOptions);\n    return new ChildViewClass(options);\n  },\n\n  // Remove the child view and destroy it. This function also updates the indices of later views\n  // in the collection in order to keep the children in sync with the collection.\n  removeChildView(view) {\n    if (!view || view._isDestroyed) {\n      return view;\n    }\n\n    this._removeChildView(view);\n    this.children._updateLength();\n    // decrement the index of views after this one\n    this._updateIndices(view, false);\n    return view;\n  },\n\n  // check if the collection is empty or optionally whether an array of pre-processed models is empty\n  isEmpty(options) {\n    let models;\n    if (_.result(options, 'processedModels')) {\n      models = options.processedModels;\n    } else {\n      models = this.collection ? this.collection.models : [];\n      models = this._filterModels(models);\n    }\n    return models.length === 0;\n  },\n\n  // If empty, show the empty view\n  _checkEmpty() {\n    if (this.isEmpty()) {\n      this._showEmptyView();\n    }\n  },\n\n  // You might need to override this if you've overridden attachHtml\n  attachBuffer(collectionView, buffer) {\n    collectionView.$el.append(buffer);\n  },\n\n  // Create a fragment buffer from the currently buffered children\n  _createBuffer() {\n    const elBuffer = document.createDocumentFragment();\n    _.each(this._bufferedChildren, (b) => {\n      elBuffer.appendChild(b.el);\n    });\n    return elBuffer;\n  },\n\n  // Append the HTML to the collection's `el`. Override this method to do something other\n  // than `.append`.\n  attachHtml(collectionView, childView, index) {\n    if (collectionView._isBuffering) {\n      // buffering happens on reset events and initial renders\n      // in order to reduce the number of inserts into the\n      // document, which are expensive.\n      collectionView._bufferedChildren.splice(index, 0, childView);\n    } else {\n      // If we've already rendered the main collection, append\n      // the new child into the correct order if we need to. Otherwise\n      // append to the end.\n      if (!collectionView._insertBefore(childView, index)) {\n        collectionView._insertAfter(childView);\n      }\n    }\n  },\n\n  // Internal method. Check whether we need to insert the view into the correct position.\n  _insertBefore(childView, index) {\n    let currentView;\n    const findPosition = this.sort && (index < this.children.length - 1);\n    if (findPosition) {\n      // Find the view after this one\n      currentView = this.children.find((view) => {\n        return view._index === index + 1;\n      });\n    }\n\n    if (currentView) {\n      currentView.$el.before(childView.el);\n      return true;\n    }\n\n    return false;\n  },\n\n  // Internal method. Append a view to the end of the $el\n  _insertAfter(childView) {\n    this.$el.append(childView.el);\n  },\n\n  // Internal method to set up the `children` object for storing all of the child views\n  _initChildViewStorage() {\n    this.children = new ChildViewContainer();\n  },\n\n  // called by ViewMixin destroy\n  _removeChildren() {\n    this._destroyChildren({checkEmpty: false});\n  },\n\n  // Destroy the child views that this collection view is holding on to, if any\n  _destroyChildren(options) {\n    if (!this.children.length) {\n      return;\n    }\n\n    this.triggerMethod('before:destroy:children', this);\n    const childModels = this.children.map('model');\n    this._removeChildModels(childModels, options);\n    this.triggerMethod('destroy:children', this);\n  },\n\n  // Return true if the given child should be shown. Return false otherwise.\n  // The filter will be passed (child, index, collection), where\n  //  'child' is the given model\n  //  'index' is the index of that model in the collection\n  //  'collection' is the collection referenced by this CollectionView\n  _shouldAddChild(child, index) {\n    const filter = this.filter;\n    return !_.isFunction(filter) || filter.call(this, child, index, this.collection);\n  },\n\n  // Set up the child view event forwarding. Uses a \"childview:\" prefix in front of all forwarded events.\n  _proxyChildEvents(view) {\n    this.listenTo(view, 'all', this._childViewEventHandler);\n  }\n});\n\n_.extend(CollectionView.prototype, ViewMixin);\n\nexport default CollectionView;\n","// Composite View\n// --------------\n\nimport _               from 'underscore';\nimport deprecate       from './utils/deprecate';\nimport MarionetteError from './error';\nimport CollectionView  from './collection-view';\nimport View            from './view';\n\nconst ClassOptions = [\n  'childViewContainer',\n  'template',\n  'templateContext'\n];\n\n// Used for rendering a branch-leaf, hierarchical structure.\n// Extends directly from CollectionView\n// @deprecated\nconst CompositeView = CollectionView.extend({\n\n  // Setting up the inheritance chain which allows changes to\n  // Marionette.CollectionView.prototype.constructor which allows overriding\n  // option to pass '{sort: false}' to prevent the CompositeView from\n  // maintaining the sorted order of the collection.\n  // This will fallback onto appending childView's to the end.\n  constructor(options) {\n    deprecate('CompositeView is deprecated. Convert to View at your earliest convenience');\n\n    this.mergeOptions(options, ClassOptions);\n\n    CollectionView.prototype.constructor.apply(this, arguments);\n  },\n\n  // Configured the initial events that the composite view\n  // binds to. Override this method to prevent the initial\n  // events, or to add your own initial events.\n  _initialEvents() {\n\n    // Bind only after composite view is rendered to avoid adding child views\n    // to nonexistent childViewContainer\n\n    if (this.collection) {\n      this.listenTo(this.collection, 'add', this._onCollectionAdd);\n      this.listenTo(this.collection, 'update', this._onCollectionUpdate);\n      this.listenTo(this.collection, 'reset', this.renderChildren);\n\n      if (this.sort) {\n        this.listenTo(this.collection, 'sort', this._sortViews);\n      }\n    }\n  },\n\n  // Retrieve the `childView` to be used when rendering each of\n  // the items in the collection. The default is to return\n  // `this.childView` or Marionette.CompositeView if no `childView`\n  // has been defined. As happens in CollectionView, `childView` can\n  // be a function (which should return a view class).\n  _getChildView(child) {\n    let childView = this.childView;\n\n    // for CompositeView, if `childView` is not specified, we'll get the same\n    // composite view class rendered for each child in the collection\n    // then check if the `childView` is a view class (the common case)\n    // finally check if it's a function (which we assume that returns a view class)\n    if (!childView) {\n      return this.constructor;\n    }\n\n    childView = this._getView(childView, child);\n\n    if (!childView) {\n      throw new MarionetteError({\n        name: 'InvalidChildViewError',\n        message: '\"childView\" must be a view class or a function that returns a view class'\n      });\n    }\n\n    return childView;\n  },\n\n  // Return the serialized model\n  serializeData() {\n    return this.serializeModel();\n  },\n\n  // Renders the model and the collection.\n  render() {\n    this._ensureViewIsIntact();\n    this._isRendering = true;\n    this.resetChildViewContainer();\n\n    this.triggerMethod('before:render', this);\n\n    this._renderTemplate();\n    this.bindUIElements();\n    this.renderChildren();\n\n    this._isRendering = false;\n    this._isRendered = true;\n    this.triggerMethod('render', this);\n    return this;\n  },\n\n  renderChildren() {\n    if (this._isRendered || this._isRendering) {\n      CollectionView.prototype._renderChildren.call(this);\n    }\n  },\n\n  // You might need to override this if you've overridden attachHtml\n  attachBuffer(compositeView, buffer) {\n    const $container = this.getChildViewContainer(compositeView);\n    $container.append(buffer);\n  },\n\n  // Internal method. Append a view to the end of the $el.\n  // Overidden from CollectionView to ensure view is appended to\n  // childViewContainer\n  _insertAfter(childView) {\n    const $container = this.getChildViewContainer(this, childView);\n    $container.append(childView.el);\n  },\n\n  // Internal method. Append reordered childView'.\n  // Overidden from CollectionView to ensure reordered views\n  // are appended to childViewContainer\n  _appendReorderedChildren(children) {\n    const $container = this.getChildViewContainer(this);\n    $container.append(children);\n  },\n\n  // Internal method to ensure an `$childViewContainer` exists, for the\n  // `attachHtml` method to use.\n  getChildViewContainer(containerView, childView) {\n    if (!!containerView.$childViewContainer) {\n      return containerView.$childViewContainer;\n    }\n\n    let container;\n    const childViewContainer = containerView.childViewContainer;\n    if (childViewContainer) {\n\n      const selector = _.result(containerView, 'childViewContainer');\n\n      if (selector.charAt(0) === '@' && containerView.ui) {\n        container = containerView.ui[selector.substr(4)];\n      } else {\n        container = containerView.$(selector);\n      }\n\n      if (container.length <= 0) {\n        throw new MarionetteError({\n          name: 'ChildViewContainerMissingError',\n          message: `The specified \"childViewContainer\" was not found: ${containerView.childViewContainer}`\n        });\n      }\n\n    } else {\n      container = containerView.$el;\n    }\n\n    containerView.$childViewContainer = container;\n    return container;\n  },\n\n  // Internal method to reset the `$childViewContainer` on render\n  resetChildViewContainer() {\n    if (this.$childViewContainer) {\n      this.$childViewContainer = undefined;\n    }\n  }\n});\n\n// To prevent duplication but allow the best View organization\n// Certain View methods are mixed directly into the deprecated CompositeView\nconst MixinFromView = _.pick(View.prototype, 'serializeModel', 'getTemplate', '_renderTemplate', 'mixinTemplateContext', 'attachElContent');\n_.extend(CompositeView.prototype, MixinFromView);\n\nexport default CompositeView;\n","// Behavior\n// --------\n\n// A Behavior is an isolated set of DOM /\n// user interactions that can be mixed into any View.\n// Behaviors allow you to blackbox View specific interactions\n// into portable logical chunks, keeping your views simple and your code DRY.\n\nimport _                  from 'underscore';\nimport getUniqueEventName from './utils/get-unique-event-name';\nimport MarionetteObject   from './object';\nimport DelegateEntityEventsMixin      from './mixins/delegate-entity-events';\nimport TriggersMixin      from './mixins/triggers';\nimport UIMixin            from './mixins/ui';\n\nconst ClassOptions = [\n  'collectionEvents',\n  'events',\n  'modelEvents',\n  'triggers',\n  'ui'\n];\n\nconst Behavior = MarionetteObject.extend({\n  cidPrefix: 'mnb',\n\n  constructor(options, view) {\n    // Setup reference to the view.\n    // this comes in handle when a behavior\n    // wants to directly talk up the chain\n    // to the view.\n    this.view = view;\n    this.defaults = _.clone(_.result(this, 'defaults', {}));\n    this._setOptions(this.defaults, options);\n    this.mergeOptions(this.options, ClassOptions);\n\n    // Construct an internal UI hash using\n    // the behaviors UI hash and then the view UI hash.\n    // This allows the user to use UI hash elements\n    // defined in the parent view as well as those\n    // defined in the given behavior.\n    // This order will help the reuse and share of a behavior\n    // between multiple views, while letting a view override a\n    // selector under an UI key.\n    this.ui = _.extend({}, _.result(this, 'ui'), _.result(view, 'ui'));\n\n    MarionetteObject.apply(this, arguments);\n  },\n\n  // proxy behavior $ method to the view\n  // this is useful for doing jquery DOM lookups\n  // scoped to behaviors view.\n  $() {\n    return this.view.$.apply(this.view, arguments);\n  },\n\n  // Stops the behavior from listening to events.\n  // Overrides Object#destroy to prevent additional events from being triggered.\n  destroy() {\n    this.stopListening();\n\n    return this;\n  },\n\n  proxyViewProperties() {\n    this.$el = this.view.$el;\n    this.el = this.view.el;\n\n    return this;\n  },\n\n  bindUIElements() {\n    this._bindUIElements();\n\n    return this;\n  },\n\n  unbindUIElements() {\n    this._unbindUIElements();\n\n    return this;\n  },\n\n  getUI(name) {\n    this.view._ensureViewIsIntact();\n    return this._getUI(name);\n  },\n\n  // Handle `modelEvents`, and `collectionEvents` configuration\n  delegateEntityEvents() {\n    this._delegateEntityEvents(this.view.model, this.view.collection);\n\n    return this;\n  },\n\n  undelegateEntityEvents() {\n    this._undelegateEntityEvents(this.view.model, this.view.collection);\n\n    return this;\n  },\n\n  getEvents() {\n    // Normalize behavior events hash to allow\n    // a user to use the @ui. syntax.\n    const behaviorEvents = this.normalizeUIKeys(_.result(this, 'events'));\n\n    // binds the handler to the behavior and builds a unique eventName\n    return _.reduce(behaviorEvents, (events, behaviorHandler, key) => {\n      if (!_.isFunction(behaviorHandler)) {\n        behaviorHandler = this[behaviorHandler];\n      }\n      if (!behaviorHandler) { return; }\n      key = getUniqueEventName(key);\n      events[key] = _.bind(behaviorHandler, this);\n      return events;\n    }, {});\n  },\n\n  // Internal method to build all trigger handlers for a given behavior\n  getTriggers() {\n    if (!this.triggers) { return; }\n\n    // Normalize behavior triggers hash to allow\n    // a user to use the @ui. syntax.\n    const behaviorTriggers = this.normalizeUIKeys(_.result(this, 'triggers'));\n\n    return this._getViewTriggers(this.view, behaviorTriggers);\n  }\n\n});\n\n_.extend(Behavior.prototype, DelegateEntityEventsMixin, TriggersMixin, UIMixin);\n\nexport default Behavior;\n","// Application\n// -----------\nimport buildRegion from './common/build-region';\nimport MarionetteObject from './object';\nimport Region from './region';\n\nconst ClassOptions = [\n  'region',\n  'regionClass'\n];\n\n// A container for a Marionette application.\nconst Application = MarionetteObject.extend({\n  cidPrefix: 'mna',\n\n  constructor(options) {\n    this._setOptions(options);\n\n    this.mergeOptions(options, ClassOptions);\n\n    this._initRegion();\n\n    MarionetteObject.prototype.constructor.apply(this, arguments);\n  },\n\n  regionClass: Region,\n\n  _initRegion() {\n    const region = this.region;\n\n    if (!region) { return; }\n\n    const defaults = {\n      regionClass: this.regionClass\n    };\n\n    this._region = buildRegion(region, defaults);\n  },\n\n  getRegion() {\n    return this._region;\n  },\n\n  showView(view, ...args) {\n    const region = this.getRegion();\n    return region.show(view, ...args);\n  },\n\n  getView() {\n    return this.getRegion().currentView;\n  },\n\n  // kick off all of the application's processes.\n  start(options) {\n    this.triggerMethod('before:start', this, options);\n    this.triggerMethod('start', this, options);\n    return this;\n  }\n\n});\n\nexport default Application;\n","// App Router\n// ----------\n\n// Reduce the boilerplate code of handling route events\n// and then calling a single method on another object,\n// called a controller.\n// Have your routers configured to call the method on\n// your controller, directly.\n//\n// Configure an AppRouter with `appRoutes`.\n//\n// App routers can only take one `controller` object.\n// It is recommended that you divide your controller\n// objects in to smaller pieces of related functionality\n// and have multiple routers / controllers, instead of\n// just one giant router and controller.\n//\n// You can also add standard routes to an AppRouter.\n\nimport Backbone                from 'backbone';\nimport _                       from 'underscore';\nimport { triggerMethod }       from './common/trigger-method';\nimport MarionetteError         from './error';\nimport CommonMixin             from './mixins/common';\n\nconst ClassOptions = [\n  'appRoutes',\n  'controller'\n];\n\nconst AppRouter = Backbone.Router.extend({\n\n  constructor(options) {\n    this._setOptions(options);\n\n    this.mergeOptions(options, ClassOptions);\n\n    Backbone.Router.apply(this, arguments);\n\n    const appRoutes = this.appRoutes;\n    const controller = this._getController();\n    this.processAppRoutes(controller, appRoutes);\n    this.on('route', this._processOnRoute, this);\n  },\n\n  // Similar to route method on a Backbone Router but\n  // method is called on the controller\n  appRoute(route, methodName) {\n    const controller = this._getController();\n    this._addAppRoute(controller, route, methodName);\n    return this;\n  },\n\n  // process the route event and trigger the onRoute\n  // method call, if it exists\n  _processOnRoute(routeName, routeArgs) {\n    // make sure an onRoute before trying to call it\n    if (_.isFunction(this.onRoute)) {\n      // find the path that matches the current route\n      const routePath = _.invert(this.appRoutes)[routeName];\n      this.onRoute(routeName, routePath, routeArgs);\n    }\n  },\n\n  // Internal method to process the `appRoutes` for the\n  // router, and turn them in to routes that trigger the\n  // specified method on the specified `controller`.\n  processAppRoutes(controller, appRoutes) {\n    if (!appRoutes) { return this; }\n\n    const routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes\n\n    _.each(routeNames, route => {\n      this._addAppRoute(controller, route, appRoutes[route]);\n    });\n\n    return this;\n  },\n\n  _getController() {\n    return this.controller;\n  },\n\n  _addAppRoute(controller, route, methodName) {\n    const method = controller[methodName];\n\n    if (!method) {\n      throw new MarionetteError(`Method \"${methodName}\" was not found on the controller`);\n    }\n\n    this.route(route, methodName, _.bind(method, controller));\n  },\n\n  triggerMethod: triggerMethod\n});\n\n_.extend(AppRouter.prototype, CommonMixin);\n\nexport default AppRouter;\n","import MarionetteError          from '../error';\n\n// Placeholder method to be extended by the user.\n// The method should define the object that stores the behaviors.\n// i.e.\n//\n// ```js\n// Marionette.Behaviors.behaviorsLookup: function() {\n//   return App.Behaviors\n// }\n// ```\nexport default function behaviorsLookup() {\n  throw new MarionetteError({\n    message: 'You must define where your behaviors are stored.',\n    url: 'marionette.behaviors.md#behaviorslookup'\n  });\n}\n","// Add Feature flags here\n// e.g. 'class' => false\nconst FEATURES = {\n};\n\nfunction isEnabled(name) {\n  return !!FEATURES[name];\n}\n\nfunction setEnabled(name, state) {\n  return FEATURES[name] = state;\n}\n\nexport {\n  FEATURES,\n  setEnabled,\n  isEnabled\n};\n","import Backbone           from 'backbone';\nimport {version}          from '../package.json';\n\nimport proxy              from './utils/proxy';\nimport extend             from './utils/extend';\nimport deprecate          from './utils/deprecate';\n\nimport isNodeAttached     from './common/is-node-attached';\nimport mergeOptions       from './common/merge-options';\nimport getOption          from './common/get-option';\nimport normalizeMethods   from './common/normalize-methods';\nimport monitorViewEvents  from './common/monitor-view-events';\n\nimport {\n  bindEvents,\n  unbindEvents\n} from './common/bind-events';\n\nimport {\n  bindRequests,\n  unbindRequests\n} from './common/bind-requests';\n\nimport {\n  triggerMethod,\n  triggerMethodOn\n} from './common/trigger-method';\n\n\nimport MarionetteObject   from './object';\nimport TemplateCache      from './template-cache';\nimport View               from './view';\nimport CollectionView     from './collection-view';\nimport CompositeView      from './composite-view';\nimport Behavior           from './behavior';\nimport Region             from './region';\nimport Application        from './application';\nimport AppRouter          from './app-router';\nimport MarionetteError    from './error';\n\nimport behaviorsLookup    from './config/behaviors-lookup';\nimport Renderer           from './config/renderer';\n\nimport {\n  FEATURES,\n  isEnabled,\n  setEnabled\n} from './config/features';\n\nconst previousMarionette = Backbone.Marionette;\nconst Marionette = Backbone.Marionette = {};\n\n// This allows you to run multiple instances of Marionette on the same\n// webapp. After loading the new version, call `noConflict()` to\n// get a reference to it. At the same time the old version will be\n// returned to Backbone.Marionette.\nMarionette.noConflict = function() {\n  Backbone.Marionette = previousMarionette;\n  return this;\n};\n\n// Utilities\nMarionette.bindEvents = proxy(bindEvents);\nMarionette.unbindEvents = proxy(unbindEvents);\nMarionette.bindRequests = proxy(bindRequests);\nMarionette.unbindRequests = proxy(unbindRequests);\nMarionette.mergeOptions = proxy(mergeOptions);\nMarionette.getOption = proxy(getOption);\nMarionette.normalizeMethods = proxy(normalizeMethods);\nMarionette.extend = extend;\nMarionette.isNodeAttached = isNodeAttached;\nMarionette.deprecate = deprecate;\nMarionette.triggerMethod = proxy(triggerMethod);\nMarionette.triggerMethodOn = triggerMethodOn;\nMarionette.isEnabled = isEnabled;\nMarionette.setEnabled = setEnabled;\nMarionette.monitorViewEvents = monitorViewEvents;\n\nMarionette.Behaviors = {};\nMarionette.Behaviors.behaviorsLookup = behaviorsLookup;\n\n// Classes\nMarionette.Application = Application;\nMarionette.AppRouter = AppRouter;\nMarionette.Renderer = Renderer;\nMarionette.TemplateCache = TemplateCache;\nMarionette.View = View;\nMarionette.CollectionView = CollectionView;\nMarionette.CompositeView = CompositeView;\nMarionette.Behavior = Behavior;\nMarionette.Region = Region;\nMarionette.Error = MarionetteError;\nMarionette.Object = MarionetteObject;\n\n// Configuration\nMarionette.DEV_MODE = false;\nMarionette.FEATURES = FEATURES;\nMarionette.VERSION = version;\n\nexport default Marionette;\n"],"names":["proxy","method","context","args","apply","extend","Backbone","Model","deprecate","message","test","_","isObject","prev","next","url","Marionette","DEV_MODE","undefined","_cache","_warn","_console","console","warn","log","noop","arguments","isNodeAttached","el","$","contains","document","documentElement","mergeOptions","options","keys","each","key","option","getOption","optionName","normalizeMethods","hash","reduce","normalizedHash","name","isFunction","splitter","getEventName","match","prefix","eventName","toUpperCase","getOnMethodName","memoize","event","replace","triggerMethod","methodName","call","result","trigger","triggerMethodOn","triggerMethodChildren","view","shouldTrigger","_getImmediateChildren","child","shouldTriggerAttach","_isAttached","shouldAttach","shouldTriggerDetach","shouldDetach","triggerDOMRefresh","_isRendered","handleBeforeAttach","handleAttach","handleBeforeDetach","handleDetach","handleRender","monitorViewEvents","_areViewEventsMonitored","on","errorProps","MarionetteError","Error","urlRoot","version","constructor","error","pick","captureStackTrace","toString","bindFromStrings","target","entity","evt","methods","actionName","methodNames","split","iterateEvents","bindings","isString","bindEvents","unbindEvents","iterateReplies","channel","normalizedRadioRequests","bindRequests","unbindRequests","setOptions","_setOptions","_initRadio","channelName","Radio","_channel","radioEvents","radioRequests","_destroyRadio","stopReplying","getChannel","ClassOptions","MarionetteObject","cid","uniqueId","cidPrefix","initialize","prototype","Events","CommonMixin","RadioMixin","_isDestroyed","isDestroyed","destroy","stopListening","TemplateCache","templateId","templateCaches","get","cachedTemplate","load","clear","i","length","compiledTemplate","template","loadTemplate","compileTemplate","$template","html","rawTemplate","invokeMap","invoke","getBehaviorClass","behaviorClass","Behaviors","behaviorsLookup","parseBehaviors","behaviors","chain","map","BehaviorClass","_options","behavior","nestedBehaviors","concat","flatten","value","_initBehaviors","_behaviors","_getBehaviorTriggers","triggers","_invoke","_getBehaviorEvents","events","_proxyBehaviorViewProperties","_delegateBehaviorEntityEvents","_undelegateBehaviorEntityEvents","_destroyBehaviors","_bindBehaviorUIElements","_unbindBehaviorUIElements","_triggerEventOnBehaviors","_delegateEntityEvents","model","collection","_undelegateEntityEvents","modelEvents","collectionEvents","delegateEventSplitter","uniqueName","selector","join","getUniqueEventName","buildViewTrigger","triggerDef","shouldPreventDefault","preventDefault","shouldStopPropagation","stopPropagation","e","_getViewTriggers","normalizeUIKeys","ui","memo","val","normalizedKey","normalizeUIString","uiString","r","slice","normalizeUIValues","properties","isArray","property","propertyVal","uiBindings","_getUIBindings","_bindUIElements","_uiBindings","_ui","_unbindUIElements","$el","_getUI","ViewMixin","supportsRenderLifecycle","supportsDestroyLifecycle","isRendered","isAttached","delegateEvents","eventsArg","_buildEventProxies","viewEvents","_getEvents","combinedEvents","getTriggers","View","delegateEntityEvents","undelegateEntityEvents","_ensureViewIsIntact","unbindUIElements","_removeElement","_removeChildren","bindUIElements","getUI","childViewEventPrefix","ret","_triggerEventOnParentLayout","_childViewEvents","_childViewTriggers","layoutView","_parentView","_childViewEventHandler","parent","_parent","childViewEvents","childViewTriggers","childEventName","BehaviorsMixin","DelegateEntityEventsMixin","TriggersMixin","UIMixin","destroyBackboneView","remove","Region","replaceElement","_isReplaced","_initEl","getEl","show","_ensureElement","_ensureView","currentView","empty","_empty","_renderView","_attachView","render","shouldReplaceEl","_replaceEl","attachHtml","allowMissingEl","_restoreEl","parentNode","replaceChild","isReplaced","appendChild","detachHtml","shouldDestroy","preventDestroy","off","_removeView","_detachView","detachView","contents","detach","hasView","reset","definition","defaults","buildRegionFromDefinition","opts","buildRegionFromObject","regionClass","RegionClass","omit","_initRegions","regions","_regions","addRegions","_reInitRegions","addRegion","isEmpty","_addRegions","regionDefinitions","parentEl","partial","buildRegion","_addRegion","region","removeRegion","_removeRegion","removeRegions","getRegions","bind","emptyRegions","hasRegion","getRegion","clone","showChildView","detachChildView","getChildView","Renderer","data","templateFunc","Array","serializeData","serializeModel","items","serializeCollection","attributes","setElement","hasEl","_renderTemplate","getTemplate","mixinTemplateContext","attachElContent","templateContext","compact","RegionsMixin","emulateCollection","object","listProperty","list","values","toArray","Container","views","_views","_indexByModel","_indexByCustom","_updateLength","add","customIndex","_add","viewCid","findByModel","findByModelCid","modelCid","findByCid","findByCustom","index","findByIndex","_remove","some","size","CollectionView","sort","once","_initialEvents","_initChildViewStorage","_bufferedChildren","_startBuffering","_isBuffering","_endBuffering","triggerOnChildren","attachBuffer","_createBuffer","children","listenTo","_onCollectionAdd","_onCollectionUpdate","_sortViews","at","indexOf","filter","_filteredSortedModels","_shouldAddChild","_destroyEmptyView","_addChild","changes","_removeChildModels","removed","models","checkEmpty","shouldCheckEmpty","removedViews","_getRemovedViews","_updateIndices","_checkEmpty","removingViews","_removeChildView","push","_findGreatestIndexedView","greatestIndexedView","_index","_renderChildren","setFilter","preventRender","canBeRendered","filterChanged","shouldRender","previousModels","_applyModelDeltas","removeFilter","currentIds","addedChildNotExists","removeModels","prevModel","reorder","_showingEmptyView","anyModelsAdded","filteredOutModels","elsToReorder","viewEls","_appendReorderedChildren","resortView","reorderOnSort","orderChanged","find","item","_emptyViewIndex","append","_destroyChildren","processedModels","_showEmptyView","_showCollection","_createView","ChildView","_getChildView","childViewOptions","_getChildViewOptions","buildChildView","_setupChildView","_proxyChildEvents","addedAt","viewComparator","getViewComparator","Math","min","max","addedModel","_sortModelsBy","splice","_filterModels","comparator","sortBy","EmptyView","_getEmptyView","emptyViewOptions","addChildView","emptyView","_getView","childView","increment","laterView","ChildViewClass","removeChildView","collectionView","buffer","elBuffer","createDocumentFragment","b","_insertBefore","_insertAfter","findPosition","before","ChildViewContainer","childModels","CompositeView","renderChildren","_isRendering","resetChildViewContainer","compositeView","$container","getChildViewContainer","containerView","$childViewContainer","container","childViewContainer","charAt","substr","MixinFromView","Behavior","proxyViewProperties","getEvents","behaviorEvents","behaviorHandler","behaviorTriggers","Application","_initRegion","_region","showView","getView","start","AppRouter","Router","appRoutes","controller","_getController","processAppRoutes","_processOnRoute","appRoute","route","_addAppRoute","routeName","routeArgs","onRoute","routePath","invert","routeNames","reverse","FEATURES","isEnabled","setEnabled","state","previousMarionette","noConflict","Object","VERSION"],"mappings":";;;;;;;;;;;;;;;;;;;;;;CAAA;AACA,CAAA,IAAMA,QAAQ,SAARA,KAAQ,CAASC,MAAT,EAAiB;AAC7B,CAAA,SAAO,UAASC,OAAT,EAA2B;AAAA,CAAA,sCAANC,IAAM;AAANA,CAAAA,UAAM;AAAA,CAAA;;AAChC,CAAA,WAAOF,OAAOG,KAAP,CAAaF,OAAb,EAAsBC,IAAtB,CAAP;AACD,CAAA,GAFD;AAGD,CAAA,CAJD,CAMA;;CCFA;AACA,CAAA,IAAME,SAASC,SAASC,KAAT,CAAeF,MAA9B,CAEA;;CCFA,IAAMG,YAAY,SAAZA,SAAY,CAASC,OAAT,EAAkBC,IAAlB,EAAwB;AACxC,CAAA,MAAIC,EAAEC,QAAF,CAAWH,OAAX,CAAJ,EAAyB;AACvBA,CAAAA,cACEA,QAAQI,IAAR,GAAe,yCAAf,GACA,aADA,GACgBJ,QAAQK,IADxB,GAC+B,WAD/B,IAECL,QAAQM,GAAR,GAAc,WAAWN,QAAQM,GAAjC,GAAuC,EAFxC,CADF;AAKD,CAAA;;AAED,CAAA,MAAI,CAACC,WAAWC,QAAhB,EAA0B;AACxB,CAAA;AACD,CAAA;;AAED,CAAA,MAAI,CAACP,SAASQ,SAAT,IAAsB,CAACR,IAAxB,KAAiC,CAACF,UAAUW,MAAV,CAAiBV,OAAjB,CAAtC,EAAiE;AAC/DD,CAAAA,cAAUY,KAAV,CAAgB,0BAA0BX,OAA1C;AACAD,CAAAA,cAAUW,MAAV,CAAiBV,OAAjB,IAA4B,IAA5B;AACD,CAAA;AACF,CAAA,CAjBD;;AAmBAD,CAAAA,UAAUa,QAAV,GAAqB,OAAOC,OAAP,KAAmB,WAAnB,GAAiCA,OAAjC,GAA2C,EAAhE;AACAd,CAAAA,UAAUY,KAAV,GAAkB,YAAW;AAC3B,CAAA,MAAMG,OAAOf,UAAUa,QAAV,CAAmBE,IAAnB,IAA2Bf,UAAUa,QAAV,CAAmBG,GAA9C,IAAqDb,EAAEc,IAApE;AACA,CAAA,SAAOF,KAAKnB,KAAL,CAAWI,UAAUa,QAArB,EAA+BK,SAA/B,CAAP;AACD,CAAA,CAHD;AAIAlB,CAAAA,UAAUW,MAAV,GAAmB,EAAnB,CAEA;;CC3BA;AACA,CAAA,IAAMQ,iBAAiB,SAAjBA,cAAiB,CAASC,EAAT,EAAa;AAClC,CAAA,SAAOtB,SAASuB,CAAT,CAAWC,QAAX,CAAoBC,SAASC,eAA7B,EAA8CJ,EAA9C,CAAP;AACD,CAAA,CAFD,CAIA;;CCRA;AACA,CAAA,IAAMK,eAAe,SAAfA,YAAe,CAASC,OAAT,EAAkBC,IAAlB,EAAwB;AAAA,CAAA;;AAC3C,CAAA,MAAI,CAACD,OAAL,EAAc;AAAE,CAAA;AAAS,CAAA;;AAEzBvB,CAAAA,IAAEyB,IAAF,CAAOD,IAAP,EAAa,UAACE,GAAD,EAAS;AACpB,CAAA,QAAMC,SAASJ,QAAQG,GAAR,CAAf;AACA,CAAA,QAAIC,WAAWpB,SAAf,EAA0B;AACxB,CAAA,YAAKmB,GAAL,IAAYC,MAAZ;AACD,CAAA;AACF,CAAA,GALD;AAMD,CAAA,CATD,CAWA;;CCdA;AACA,CAAA;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,IAAMC,YAAY,SAAZA,SAAY,CAASC,UAAT,EAAqB;AACrC,CAAA,MAAI,CAACA,UAAL,EAAiB;AAAE,CAAA;AAAS,CAAA;AAC5B,CAAA,MAAI,KAAKN,OAAL,IAAiB,KAAKA,OAAL,CAAaM,UAAb,MAA6BtB,SAAlD,EAA8D;AAC5D,CAAA,WAAO,KAAKgB,OAAL,CAAaM,UAAb,CAAP;AACD,CAAA,GAFD,MAEO;AACL,CAAA,WAAO,KAAKA,UAAL,CAAP;AACD,CAAA;AACF,CAAA,CAPD,CASA;;CCZA;AACA,CAAA;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,IAAMC,mBAAmB,SAAnBA,gBAAmB,CAASC,IAAT,EAAe;AAAA,CAAA;;AACtC,CAAA,SAAO/B,EAAEgC,MAAF,CAASD,IAAT,EAAe,UAACE,cAAD,EAAiB3C,MAAjB,EAAyB4C,IAAzB,EAAkC;AACtD,CAAA,QAAI,CAAClC,EAAEmC,UAAF,CAAa7C,MAAb,CAAL,EAA2B;AACzBA,CAAAA,eAAS,MAAKA,MAAL,CAAT;AACD,CAAA;AACD,CAAA,QAAIA,MAAJ,EAAY;AACV2C,CAAAA,qBAAeC,IAAf,IAAuB5C,MAAvB;AACD,CAAA;AACD,CAAA,WAAO2C,cAAP;AACD,CAAA,GARM,EAQJ,EARI,CAAP;AASD,CAAA,CAVD,CAYA;;CCbA;AACA,CAAA,IAAMG,WAAW,aAAjB;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,SAASC,YAAT,CAAsBC,KAAtB,EAA6BC,MAA7B,EAAqCC,SAArC,EAAgD;AAC9C,CAAA,SAAOA,UAAUC,WAAV,EAAP;AACD,CAAA;;AAED,CAAA,IAAMC,kBAAkB1C,EAAE2C,OAAF,CAAU,UAASC,KAAT,EAAgB;AAChD,CAAA,SAAO,OAAOA,MAAMC,OAAN,CAAcT,QAAd,EAAwBC,YAAxB,CAAd;AACD,CAAA,CAFuB,CAAxB;;AAIA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,AAAO,CAAA,SAASS,aAAT,CAAuBF,KAAvB,EAAuC;AAAA,CAAA,oCAANpD,IAAM;AAANA,CAAAA,QAAM;AAAA,CAAA;;AAC5C,CAAA;AACA,CAAA,MAAMuD,aAAaL,gBAAgBE,KAAhB,CAAnB;AACA,CAAA,MAAMtD,SAASsC,UAAUoB,IAAV,CAAe,IAAf,EAAqBD,UAArB,CAAf;AACA,CAAA,MAAIE,eAAJ;;AAEA,CAAA;AACA,CAAA,MAAIjD,EAAEmC,UAAF,CAAa7C,MAAb,CAAJ,EAA0B;AACxB,CAAA;AACA2D,CAAAA,aAAS3D,OAAOG,KAAP,CAAa,IAAb,EAAmBD,IAAnB,CAAT;AACD,CAAA;;AAED,CAAA;AACA,CAAA,OAAK0D,OAAL,CAAazD,KAAb,CAAmB,IAAnB,EAAyBsB,SAAzB;;AAEA,CAAA,SAAOkC,MAAP;AACD,CAAA;;AAED,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,AAAO,CAAA,SAASE,eAAT,CAAyB5D,OAAzB,EAA2C;AAAA,CAAA,qCAANC,IAAM;AAANA,CAAAA,QAAM;AAAA,CAAA;;AAChD,CAAA,MAAIQ,EAAEmC,UAAF,CAAa5C,QAAQuD,aAArB,CAAJ,EAAyC;AACvC,CAAA,WAAOvD,QAAQuD,aAAR,CAAsBrD,KAAtB,CAA4BF,OAA5B,EAAqCC,IAArC,CAAP;AACD,CAAA;;AAED,CAAA,SAAOsD,cAAcrD,KAAd,CAAoBF,OAApB,EAA6BC,IAA7B,CAAP;AACD,CAAA;;CChDD;AACA,CAAA,SAAS4D,qBAAT,CAA+BC,IAA/B,EAAqCT,KAArC,EAA4CU,aAA5C,EAA2D;AACzD,CAAA,MAAI,CAACD,KAAKE,qBAAV,EAAiC;AAAE,CAAA;AAAS,CAAA;AAC5CvD,CAAAA,IAAEyB,IAAF,CAAO4B,KAAKE,qBAAL,EAAP,EAAqC,iBAAS;AAC5C,CAAA,QAAI,CAACD,cAAcE,KAAd,CAAL,EAA2B;AAAE,CAAA;AAAS,CAAA;AACtCL,CAAAA,oBAAgBK,KAAhB,EAAuBZ,KAAvB,EAA8BY,KAA9B;AACD,CAAA,GAHD;AAID,CAAA;;AAED,CAAA,SAASC,mBAAT,CAA6BJ,IAA7B,EAAmC;AACjC,CAAA,SAAO,CAACA,KAAKK,WAAb;AACD,CAAA;;AAED,CAAA,SAASC,YAAT,CAAsBN,IAAtB,EAA4B;AAC1B,CAAA,MAAI,CAACI,oBAAoBJ,IAApB,CAAL,EAAgC;AAAE,CAAA,WAAO,KAAP;AAAe,CAAA;AACjDA,CAAAA,OAAKK,WAAL,GAAmB,IAAnB;AACA,CAAA,SAAO,IAAP;AACD,CAAA;;AAED,CAAA,SAASE,mBAAT,CAA6BP,IAA7B,EAAmC;AACjC,CAAA,SAAOA,KAAKK,WAAZ;AACD,CAAA;;AAED,CAAA,SAASG,YAAT,CAAsBR,IAAtB,EAA4B;AAC1B,CAAA,MAAI,CAACO,oBAAoBP,IAApB,CAAL,EAAgC;AAAE,CAAA,WAAO,KAAP;AAAe,CAAA;AACjDA,CAAAA,OAAKK,WAAL,GAAmB,KAAnB;AACA,CAAA,SAAO,IAAP;AACD,CAAA;;AAED,CAAA,SAASI,iBAAT,CAA2BT,IAA3B,EAAiC;AAC/B,CAAA,MAAIA,KAAKK,WAAL,IAAoBL,KAAKU,WAA7B,EAA0C;AACxCZ,CAAAA,oBAAgBE,IAAhB,EAAsB,aAAtB,EAAqCA,IAArC;AACD,CAAA;AACF,CAAA;;AAED,CAAA,SAASW,kBAAT,GAA8B;AAC5BZ,CAAAA,wBAAsB,IAAtB,EAA4B,eAA5B,EAA6CK,mBAA7C;AACD,CAAA;;AAED,CAAA,SAASQ,YAAT,GAAwB;AACtBb,CAAAA,wBAAsB,IAAtB,EAA4B,QAA5B,EAAsCO,YAAtC;AACAG,CAAAA,oBAAkB,IAAlB;AACD,CAAA;;AAED,CAAA,SAASI,kBAAT,GAA8B;AAC5Bd,CAAAA,wBAAsB,IAAtB,EAA4B,eAA5B,EAA6CQ,mBAA7C;AACD,CAAA;;AAED,CAAA,SAASO,YAAT,GAAwB;AACtBf,CAAAA,wBAAsB,IAAtB,EAA4B,QAA5B,EAAsCS,YAAtC;AACD,CAAA;;AAED,CAAA,SAASO,YAAT,GAAwB;AACtBN,CAAAA,oBAAkB,IAAlB;AACD,CAAA;;AAED,CAAA;AACA,CAAA;AACA,CAAA,SAASO,iBAAT,CAA2BhB,IAA3B,EAAiC;AAC/B,CAAA,MAAIA,KAAKiB,uBAAT,EAAkC;AAAE,CAAA;AAAS,CAAA;;AAE7CjB,CAAAA,OAAKiB,uBAAL,GAA+B,IAA/B;;AAEAjB,CAAAA,OAAKkB,EAAL,CAAQ;AACN,CAAA,qBAAiBP,kBADX;AAEN,CAAA,cAAUC,YAFJ;AAGN,CAAA,qBAAiBC,kBAHX;AAIN,CAAA,cAAUC,YAJJ;AAKN,CAAA,cAAUC;AALJ,CAAA,GAAR;AAOD,CAAA,CAED;;CCvEA,IAAMI,aAAa,CAAC,aAAD,EAAgB,UAAhB,EAA4B,YAA5B,EAA0C,MAA1C,EAAkD,SAAlD,EAA6D,QAA7D,CAAnB;;AAEA,CAAA,IAAMC,kBAAkB/E,OAAOsD,IAAP,CAAY0B,KAAZ,EAAmB;AACzCC,CAAAA,8CAA0CC,OAA1C,MADyC;;AAGzCC,CAAAA,aAHyC,uBAG7B/E,OAH6B,EAGpByB,OAHoB,EAGX;AAC5B,CAAA,QAAIvB,EAAEC,QAAF,CAAWH,OAAX,CAAJ,EAAyB;AACvByB,CAAAA,gBAAUzB,OAAV;AACAA,CAAAA,gBAAUyB,QAAQzB,OAAlB;AACD,CAAA,KAHD,MAGO,IAAI,CAACyB,OAAL,EAAc;AACnBA,CAAAA,gBAAU,EAAV;AACD,CAAA;;AAED,CAAA,QAAMuD,QAAQJ,MAAM1B,IAAN,CAAW,IAAX,EAAiBlD,OAAjB,CAAd;AACAE,CAAAA,MAAEN,MAAF,CAAS,IAAT,EAAeM,EAAE+E,IAAF,CAAOD,KAAP,EAAcN,UAAd,CAAf,EAA0CxE,EAAE+E,IAAF,CAAOxD,OAAP,EAAgBiD,UAAhB,CAA1C;;AAEA,CAAA,SAAKQ,iBAAL;;AAEA,CAAA,QAAIzD,QAAQnB,GAAZ,EAAiB;AACf,CAAA,WAAKA,GAAL,GAAW,KAAKuE,OAAL,GAAepD,QAAQnB,GAAlC;AACD,CAAA;AACF,CAAA,GAnBwC;AAqBzC4E,CAAAA,mBArByC,+BAqBrB;AAClB,CAAA,QAAIN,MAAMM,iBAAV,EAA6B;AAC3BN,CAAAA,YAAMM,iBAAN,CAAwB,IAAxB,EAA8BP,eAA9B;AACD,CAAA;AACF,CAAA,GAzBwC;AA2BzCQ,CAAAA,UA3ByC,sBA2B9B;AACT,CAAA,WAAO,KAAK/C,IAAL,GAAY,IAAZ,GAAmB,KAAKpC,OAAxB,IAAmC,KAAKM,GAAL,GAAW,WAAW,KAAKA,GAA3B,GAAiC,EAApE,CAAP;AACD,CAAA;AA7BwC,CAAA,CAAnB,CAAxB;;AAgCAqE,CAAAA,gBAAgB/E,MAAhB,GAAyBA,MAAzB,CAEA;;CCzBA;AACA,CAAA;AACA,CAAA,SAASwF,eAAT,CAAyBC,MAAzB,EAAiCC,MAAjC,EAAyCC,GAAzC,EAA8CC,OAA9C,EAAuDC,UAAvD,EAAmE;AACjE,CAAA,MAAMC,cAAcF,QAAQG,KAAR,CAAc,KAAd,CAApB;;AAEAzF,CAAAA,IAAEyB,IAAF,CAAO+D,WAAP,EAAoB,UAASzC,UAAT,EAAqB;AACvC,CAAA,QAAMzD,SAAS6F,OAAOpC,UAAP,CAAf;AACA,CAAA,QAAI,CAACzD,MAAL,EAAa;AACX,CAAA,YAAM,IAAImF,eAAJ,cAA+B1B,UAA/B,+DAAN;AACD,CAAA;;AAEDoC,CAAAA,WAAOI,UAAP,EAAmBH,MAAnB,EAA2BC,GAA3B,EAAgC/F,MAAhC;AACD,CAAA,GAPD;AAQD,CAAA;;AAED,CAAA;AACA,CAAA,SAASoG,aAAT,CAAuBP,MAAvB,EAA+BC,MAA/B,EAAuCO,QAAvC,EAAiDJ,UAAjD,EAA6D;AAC3D,CAAA,MAAI,CAACH,MAAD,IAAW,CAACO,QAAhB,EAA0B;AAAE,CAAA;AAAS,CAAA;;AAErC,CAAA;AACA,CAAA,MAAI,CAAC3F,EAAEC,QAAF,CAAW0F,QAAX,CAAL,EAA2B;AACzB,CAAA,UAAM,IAAIlB,eAAJ,CAAoB;AACxB3E,CAAAA,eAAS,6BADe;AAExBM,CAAAA,WAAK;AAFmB,CAAA,KAApB,CAAN;AAID,CAAA;;AAED,CAAA;AACAJ,CAAAA,IAAEyB,IAAF,CAAOkE,QAAP,EAAiB,UAASrG,MAAT,EAAiB+F,GAAjB,EAAsB;;AAErC,CAAA;AACA,CAAA,QAAIrF,EAAE4F,QAAF,CAAWtG,MAAX,CAAJ,EAAwB;AACtB4F,CAAAA,sBAAgBC,MAAhB,EAAwBC,MAAxB,EAAgCC,GAAhC,EAAqC/F,MAArC,EAA6CiG,UAA7C;AACA,CAAA;AACD,CAAA;;AAEDJ,CAAAA,WAAOI,UAAP,EAAmBH,MAAnB,EAA2BC,GAA3B,EAAgC/F,MAAhC;AACD,CAAA,GATD;AAUD,CAAA;;AAED,CAAA,SAASuG,UAAT,CAAoBT,MAApB,EAA4BO,QAA5B,EAAsC;AACpCD,CAAAA,gBAAc,IAAd,EAAoBN,MAApB,EAA4BO,QAA5B,EAAsC,UAAtC;AACA,CAAA,SAAO,IAAP;AACD,CAAA;;AAED,CAAA,SAASG,YAAT,CAAsBV,MAAtB,EAA8BO,QAA9B,EAAwC;AACtCD,CAAAA,gBAAc,IAAd,EAAoBN,MAApB,EAA4BO,QAA5B,EAAsC,eAAtC;AACA,CAAA,SAAO,IAAP;AACD,CAAA,CAED;;CCnDA,SAASI,cAAT,CAAwBZ,MAAxB,EAAgCa,OAAhC,EAAyCL,QAAzC,EAAmDJ,UAAnD,EAA+D;AAC7D,CAAA,MAAI,CAACS,OAAD,IAAY,CAACL,QAAjB,EAA2B;AAAE,CAAA;AAAS,CAAA;;AAEtC,CAAA;AACA,CAAA,MAAI,CAAC3F,EAAEC,QAAF,CAAW0F,QAAX,CAAL,EAA2B;AACzB,CAAA,UAAM,IAAIlB,eAAJ,CAAoB;AACxB3E,CAAAA,eAAS,6BADe;AAExBM,CAAAA,WAAK;AAFmB,CAAA,KAApB,CAAN;AAID,CAAA;;AAED,CAAA,MAAM6F,0BAA0BnE,iBAAiBkB,IAAjB,CAAsBmC,MAAtB,EAA8BQ,QAA9B,CAAhC;;AAEAK,CAAAA,UAAQT,UAAR,EAAoBU,uBAApB,EAA6Cd,MAA7C;AACD,CAAA;;AAED,CAAA,SAASe,YAAT,CAAsBF,OAAtB,EAA+BL,QAA/B,EAAyC;AACvCI,CAAAA,iBAAe,IAAf,EAAqBC,OAArB,EAA8BL,QAA9B,EAAwC,OAAxC;AACA,CAAA,SAAO,IAAP;AACD,CAAA;;AAED,CAAA,SAASQ,cAAT,CAAwBH,OAAxB,EAAiCL,QAAjC,EAA2C;AACzCI,CAAAA,iBAAe,IAAf,EAAqBC,OAArB,EAA8BL,QAA9B,EAAwC,cAAxC;AACA,CAAA,SAAO,IAAP;AACD,CAAA,CAED;;CCzCA;AACA,CAAA,IAAMS,aAAa,SAAbA,UAAa,GAAkB;AAAA,CAAA,oCAAN5G,IAAM;AAANA,CAAAA,QAAM;AAAA,CAAA;;AACnC,CAAA,OAAK+B,OAAL,GAAevB,EAAEN,MAAF,WAAS,EAAT,EAAaM,EAAEiD,MAAF,CAAS,IAAT,EAAe,SAAf,CAAb,SAA2CzD,IAA3C,EAAf;AACD,CAAA,CAFD,CAIA;;ACEA,mBAAe;;AAEb,CAAA;AACA,CAAA;AACAsC,CAAAA,oBAAkBA,gBAJL;;AAMbuE,CAAAA,eAAaA,UANA;;AAQb,CAAA;AACA/E,CAAAA,gBAAcA,YATD;;AAWb,CAAA;AACAM,CAAAA,aAAWA,SAZE;;AAcb,CAAA;AACAiE,CAAAA,cAAYA,UAfC;;AAiBb,CAAA;AACAC,CAAAA,gBAAcA;AAlBD,CAAA,CAAf;;CCMA;AACA,CAAA;AACA,CAAA;AACA,CAAA;;AAEA,kBAAe;AAEbQ,CAAAA,YAFa,wBAEA;AACX,CAAA,QAAMC,cAAcvG,EAAEiD,MAAF,CAAS,IAAT,EAAe,aAAf,CAApB;;AAEA,CAAA,QAAI,CAACsD,WAAL,EAAkB;AAChB,CAAA;AACD,CAAA;;AAED,CAAA;AACA,CAAA,QAAI,CAACC,KAAL,EAAY;AACV,CAAA,YAAM,IAAI/B,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,sBADkB;AAExBpC,CAAAA,iBAAS;AAFe,CAAA,OAApB,CAAN;AAID,CAAA;;AAED,CAAA,QAAMkG,UAAU,KAAKS,QAAL,GAAgBD,MAAMR,OAAN,CAAcO,WAAd,CAAhC;;AAEA,CAAA,QAAMG,cAAc1G,EAAEiD,MAAF,CAAS,IAAT,EAAe,aAAf,CAApB;AACA,CAAA,SAAK4C,UAAL,CAAgBG,OAAhB,EAAyBU,WAAzB;;AAEA,CAAA,QAAMC,gBAAgB3G,EAAEiD,MAAF,CAAS,IAAT,EAAe,eAAf,CAAtB;AACA,CAAA,SAAKiD,YAAL,CAAkBF,OAAlB,EAA2BW,aAA3B;;AAEA,CAAA,SAAKpC,EAAL,CAAQ,SAAR,EAAmB,KAAKqC,aAAxB;AACD,CAAA,GA1BY;AA4BbA,CAAAA,eA5Ba,2BA4BG;AACd,CAAA,SAAKH,QAAL,CAAcI,YAAd,CAA2B,IAA3B,EAAiC,IAAjC,EAAuC,IAAvC;AACD,CAAA,GA9BY;AAgCbC,CAAAA,YAhCa,wBAgCA;AACX,CAAA,WAAO,KAAKL,QAAZ;AACD,CAAA,GAlCY;;;AAoCb,CAAA;AACAZ,CAAAA,cAAYA,UArCC;;AAuCb,CAAA;AACAC,CAAAA,gBAAcA,YAxCD;;AA0Cb,CAAA;AACAI,CAAAA,gBAAcA,YA3CD;;AA6Cb,CAAA;AACAC,CAAAA,kBAAgBA;;AA9CH,CAAA,CAAf;;CCVA,IAAMY,eAAe,CACnB,aADmB,EAEnB,aAFmB,EAGnB,eAHmB,CAArB;;AAMA,CAAA;AACA,CAAA;AACA,CAAA,IAAMC,mBAAmB,SAAnBA,gBAAmB,CAASzF,OAAT,EAAkB;AACzC,CAAA,OAAK8E,WAAL,CAAiB9E,OAAjB;AACA,CAAA,OAAKD,YAAL,CAAkBC,OAAlB,EAA2BwF,YAA3B;AACA,CAAA,OAAKE,GAAL,GAAWjH,EAAEkH,QAAF,CAAW,KAAKC,SAAhB,CAAX;AACA,CAAA,OAAKb,UAAL;AACA,CAAA,OAAKc,UAAL,CAAgB3H,KAAhB,CAAsB,IAAtB,EAA4BsB,SAA5B;AACD,CAAA,CAND;;AAQAiG,CAAAA,iBAAiBtH,MAAjB,GAA0BA,MAA1B;;AAEA,CAAA;AACA,CAAA;;AAEA,CAAA;AACAM,CAAAA,EAAEN,MAAF,CAASsH,iBAAiBK,SAA1B,EAAqC1H,SAAS2H,MAA9C,EAAsDC,WAAtD,EAAmEC,UAAnE,EAA+E;AAC7EL,CAAAA,aAAW,KADkE;;AAG7E,CAAA;AACAM,CAAAA,gBAAc,KAJ+D;;AAM7EC,CAAAA,aAN6E,yBAM/D;AACZ,CAAA,WAAO,KAAKD,YAAZ;AACD,CAAA,GAR4E;;;AAU7E,CAAA;AACAL,CAAAA,YAX6E,wBAWhE,EAXgE;AAa7EO,CAAAA,SAb6E,qBAa5D;AACf,CAAA,QAAI,KAAKF,YAAT,EAAuB;AAAE,CAAA,aAAO,IAAP;AAAc,CAAA;;AADxB,CAAA,sCAANjI,IAAM;AAANA,CAAAA,UAAM;AAAA,CAAA;;AAGf,CAAA,SAAKsD,aAAL,cAAmB,gBAAnB,EAAqC,IAArC,SAA8CtD,IAA9C;;AAEA,CAAA,SAAKiI,YAAL,GAAoB,IAApB;AACA,CAAA,SAAK3E,aAAL,cAAmB,SAAnB,EAA8B,IAA9B,SAAuCtD,IAAvC;AACA,CAAA,SAAKoI,aAAL;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GAvB4E;;;AAyB7E9E,CAAAA,iBAAeA;AAzB8D,CAAA,CAA/E,EA4BA;;CCrDA;AACA,CAAA;AACA,CAAA,IAAM+E,gBAAgB,SAAhBA,aAAgB,CAASC,UAAT,EAAqB;AACzC,CAAA,OAAKA,UAAL,GAAkBA,UAAlB;AACD,CAAA,CAFD;;AAIA,CAAA;AACA,CAAA;AACA,CAAA;AACA9H,CAAAA,EAAEN,MAAF,CAASmI,aAAT,EAAwB;AACtBE,CAAAA,kBAAgB,EADM;;AAGtB,CAAA;AACA,CAAA;AACA,CAAA;AACAC,CAAAA,KANsB,eAMlBF,UANkB,EAMNvG,OANM,EAMG;AACvB,CAAA,QAAI0G,iBAAiB,KAAKF,cAAL,CAAoBD,UAApB,CAArB;;AAEA,CAAA,QAAI,CAACG,cAAL,EAAqB;AACnBA,CAAAA,uBAAiB,IAAIJ,aAAJ,CAAkBC,UAAlB,CAAjB;AACA,CAAA,WAAKC,cAAL,CAAoBD,UAApB,IAAkCG,cAAlC;AACD,CAAA;;AAED,CAAA,WAAOA,eAAeC,IAAf,CAAoB3G,OAApB,CAAP;AACD,CAAA,GAfqB;;;AAiBtB,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA4G,CAAAA,OAxBsB,mBAwBP;AACb,CAAA,QAAIC,UAAJ;;AADa,CAAA,sCAAN5I,IAAM;AAANA,CAAAA,UAAM;AAAA,CAAA;;AAEb,CAAA,QAAM6I,SAAS7I,KAAK6I,MAApB;;AAEA,CAAA,QAAIA,SAAS,CAAb,EAAgB;AACd,CAAA,WAAKD,IAAI,CAAT,EAAYA,IAAIC,MAAhB,EAAwBD,GAAxB,EAA6B;AAC3B,CAAA,eAAO,KAAKL,cAAL,CAAoBvI,KAAK4I,CAAL,CAApB,CAAP;AACD,CAAA;AACF,CAAA,KAJD,MAIO;AACL,CAAA,WAAKL,cAAL,GAAsB,EAAtB;AACD,CAAA;AACF,CAAA;AAnCqB,CAAA,CAAxB;;AAsCA,CAAA;AACA,CAAA;AACA,CAAA;AACA/H,CAAAA,EAAEN,MAAF,CAASmI,cAAcR,SAAvB,EAAkC;;AAEhC,CAAA;AACAa,CAAAA,MAHgC,gBAG3B3G,OAH2B,EAGlB;AACZ,CAAA;AACA,CAAA,QAAI,KAAK+G,gBAAT,EAA2B;AACzB,CAAA,aAAO,KAAKA,gBAAZ;AACD,CAAA;;AAED,CAAA;AACA,CAAA,QAAMC,WAAW,KAAKC,YAAL,CAAkB,KAAKV,UAAvB,EAAmCvG,OAAnC,CAAjB;AACA,CAAA,SAAK+G,gBAAL,GAAwB,KAAKG,eAAL,CAAqBF,QAArB,EAA+BhH,OAA/B,CAAxB;;AAEA,CAAA,WAAO,KAAK+G,gBAAZ;AACD,CAAA,GAd+B;;;AAgBhC,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAE,CAAAA,cArBgC,wBAqBnBV,UArBmB,EAqBPvG,OArBO,EAqBE;AAChC,CAAA,QAAMmH,YAAY/I,SAASuB,CAAT,CAAW4G,UAAX,CAAlB;;AAEA,CAAA,QAAI,CAACY,UAAUL,MAAf,EAAuB;AACrB,CAAA,YAAM,IAAI5D,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,iBADkB;AAExBpC,CAAAA,gDAAsCgI,UAAtC;AAFwB,CAAA,OAApB,CAAN;AAID,CAAA;AACD,CAAA,WAAOY,UAAUC,IAAV,EAAP;AACD,CAAA,GA/B+B;;;AAiChC,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAF,CAAAA,iBArCgC,2BAqChBG,WArCgB,EAqCHrH,OArCG,EAqCM;AACpC,CAAA,WAAOvB,EAAEuI,QAAF,CAAWK,WAAX,EAAwBrH,OAAxB,CAAP;AACD,CAAA;AAvC+B,CAAA,CAAlC,EA0CA;;AC/FA,eAAevB,EAAE6I,SAAF,IAAe7I,EAAE8I,MAAhC;;;;ACJA,AACA,AACA,AACA,AAEA,CAAA;AACA,CAAA;;AAEA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,SAASC,gBAAT,CAA0BxH,OAA1B,EAAmCG,GAAnC,EAAwC;AACtC,CAAA,MAAIH,QAAQyH,aAAZ,EAA2B;AACzB,CAAA,WAAOzH,QAAQyH,aAAf;AACA,CAAA;AACD,CAAA,GAHD,MAGO,IAAIhJ,EAAEmC,UAAF,CAAaZ,OAAb,CAAJ,EAA2B;AAChC,CAAA,WAAOA,OAAP;AACD,CAAA;;AAED,CAAA;AACA,CAAA,MAAIvB,EAAEmC,UAAF,CAAa9B,WAAW4I,SAAX,CAAqBC,eAAlC,CAAJ,EAAwD;AACtD,CAAA,WAAO7I,WAAW4I,SAAX,CAAqBC,eAArB,CAAqC3H,OAArC,EAA8CG,GAA9C,EAAmDA,GAAnD,CAAP;AACD,CAAA;;AAED,CAAA,SAAOrB,WAAW4I,SAAX,CAAqBC,eAArB,CAAqCxH,GAArC,CAAP;AACD,CAAA;;AAED,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,SAASyH,cAAT,CAAwB9F,IAAxB,EAA8B+F,SAA9B,EAAyC;AACvC,CAAA,SAAOpJ,EAAEqJ,KAAF,CAAQD,SAAR,EAAmBE,GAAnB,CAAuB,UAAS/H,OAAT,EAAkBG,GAAlB,EAAuB;AACnD,CAAA,QAAM6H,gBAAgBR,iBAAiBxH,OAAjB,EAA0BG,GAA1B,CAAtB;AACA,CAAA;AACA,CAAA,QAAM8H,WAAWjI,YAAYgI,aAAZ,GAA4B,EAA5B,GAAiChI,OAAlD;AACA,CAAA,QAAMkI,WAAW,IAAIF,aAAJ,CAAkBC,QAAlB,EAA4BnG,IAA5B,CAAjB;AACA,CAAA,QAAMqG,kBAAkBP,eAAe9F,IAAf,EAAqBrD,EAAEiD,MAAF,CAASwG,QAAT,EAAmB,WAAnB,CAArB,CAAxB;;AAEA,CAAA,WAAO,CAACA,QAAD,EAAWE,MAAX,CAAkBD,eAAlB,CAAP;AACD,CAAA,GARM,EAQJE,OARI,GAQMC,KARN,EAAP;AASD,CAAA;;AAED,sBAAe;AACbC,CAAAA,gBADa,4BACI;AACf,CAAA,QAAMV,YAAYpJ,EAAEiD,MAAF,CAAS,IAAT,EAAe,WAAf,CAAlB;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,SAAK8G,UAAL,GAAkB/J,EAAEC,QAAF,CAAWmJ,SAAX,IAAwBD,eAAe,IAAf,EAAqBC,SAArB,CAAxB,GAA0D,EAA5E;AACD,CAAA,GAPY;AASbY,CAAAA,sBATa,kCASU;AACrB,CAAA,QAAMC,WAAWC,QAAQ,KAAKH,UAAb,EAAyB,aAAzB,CAAjB;AACA,CAAA,WAAO/J,EAAEN,MAAF,WAAS,EAAT,4BAAgBuK,QAAhB,GAAP;AACD,CAAA,GAZY;AAcbE,CAAAA,oBAda,gCAcQ;AACnB,CAAA,QAAMC,SAASF,QAAQ,KAAKH,UAAb,EAAyB,WAAzB,CAAf;AACA,CAAA,WAAO/J,EAAEN,MAAF,WAAS,EAAT,4BAAgB0K,MAAhB,GAAP;AACD,CAAA,GAjBY;;;AAmBb,CAAA;AACAC,CAAAA,8BApBa,0CAoBkB;AAC7BH,CAAAA,YAAQ,KAAKH,UAAb,EAAyB,qBAAzB;AACD,CAAA,GAtBY;;;AAwBb,CAAA;AACAO,CAAAA,+BAzBa,2CAyBmB;AAC9BJ,CAAAA,YAAQ,KAAKH,UAAb,EAAyB,sBAAzB;AACD,CAAA,GA3BY;;;AA6Bb,CAAA;AACAQ,CAAAA,iCA9Ba,6CA8BqB;AAChCL,CAAAA,YAAQ,KAAKH,UAAb,EAAyB,wBAAzB;AACD,CAAA,GAhCY;AAkCbS,CAAAA,mBAlCa,6BAkCKhL,IAlCL,EAkCW;AACtB,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA0K,CAAAA,8BAAQ,KAAKH,UAAb,EAAyB,SAAzB,4BAAuCvK,IAAvC;AACD,CAAA,GAxCY;AA0CbiL,CAAAA,yBA1Ca,qCA0Ca;AACxBP,CAAAA,YAAQ,KAAKH,UAAb,EAAyB,gBAAzB;AACD,CAAA,GA5CY;AA8CbW,CAAAA,2BA9Ca,uCA8Ce;AAC1BR,CAAAA,YAAQ,KAAKH,UAAb,EAAyB,kBAAzB;AACD,CAAA,GAhDY;AAkDbY,CAAAA,0BAlDa,sCAkDc;AACzB,CAAA,QAAMvB,YAAY,KAAKW,UAAvB;AACA,CAAA;AACA,CAAA,SAAK,IAAI3B,IAAI,CAAR,EAAWC,SAASe,aAAaA,UAAUf,MAAhD,EAAwDD,IAAIC,MAA5D,EAAoED,GAApE,EAAyE;AACvEtF,CAAAA,oBAAcrD,KAAd,CAAoB2J,UAAUhB,CAAV,CAApB,EAAkCrH,SAAlC;AACD,CAAA;AACF,CAAA;AAxDY,CAAA,CAAf;;CCtCA;AACA,CAAA;AACA,CAAA;;AAEA,iCAAe;AACb,CAAA;AACA6J,CAAAA,uBAFa,iCAESC,KAFT,EAEgBC,UAFhB,EAE4B;AACvC,CAAA,SAAKC,uBAAL,CAA6BF,KAA7B,EAAoCC,UAApC;;AAEA,CAAA,QAAME,cAAchL,EAAEiD,MAAF,CAAS,IAAT,EAAe,aAAf,CAApB;AACA4C,CAAAA,eAAW7C,IAAX,CAAgB,IAAhB,EAAsB6H,KAAtB,EAA6BG,WAA7B;;AAEA,CAAA,QAAMC,mBAAmBjL,EAAEiD,MAAF,CAAS,IAAT,EAAe,kBAAf,CAAzB;AACA4C,CAAAA,eAAW7C,IAAX,CAAgB,IAAhB,EAAsB8H,UAAtB,EAAkCG,gBAAlC;AACD,CAAA,GAVY;AAYbF,CAAAA,yBAZa,mCAYWF,KAZX,EAYkBC,UAZlB,EAY8B;AACzC,CAAA,QAAME,cAAchL,EAAEiD,MAAF,CAAS,IAAT,EAAe,aAAf,CAApB;AACA6C,CAAAA,iBAAa9C,IAAb,CAAkB,IAAlB,EAAwB6H,KAAxB,EAA+BG,WAA/B;;AAEA,CAAA,QAAMC,mBAAmBjL,EAAEiD,MAAF,CAAS,IAAT,EAAe,kBAAf,CAAzB;AACA6C,CAAAA,iBAAa9C,IAAb,CAAkB,IAAlB,EAAwB8H,UAAxB,EAAoCG,gBAApC;AACD,CAAA;AAlBY,CAAA,CAAf;;CCTA;AACA,CAAA,IAAMC,wBAAwB,gBAA9B;;AAEA,CAAA,SAASC,UAAT,CAAoB3I,SAApB,EAA+B4I,QAA/B,EAAyC;AACvC,CAAA,SAAO,CAAC5I,YAAYxC,EAAEkH,QAAF,CAAW,MAAX,CAAb,EAAiCkE,QAAjC,EAA2CC,IAA3C,CAAgD,GAAhD,CAAP;AACD,CAAA;;AAED,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,IAAMC,qBAAqB,SAArBA,kBAAqB,CAAS9I,SAAT,EAAoB;AAC7C,CAAA,MAAMF,QAAQE,UAAUF,KAAV,CAAgB4I,qBAAhB,CAAd;AACA,CAAA,SAAOC,WAAW7I,MAAM,CAAN,CAAX,EAAqBA,MAAM,CAAN,CAArB,CAAP;AACD,CAAA,CAHD,CAKA;;CCdA;AACA,CAAA;AACA,CAAA,SAASiJ,gBAAT,CAA0BlI,IAA1B,EAAgCmI,UAAhC,EAA4C;AAC1C,CAAA,MAAIxL,EAAE4F,QAAF,CAAW4F,UAAX,CAAJ,EAA4B;AAC1BA,CAAAA,iBAAa,EAAC5I,OAAO4I,UAAR,EAAb;AACD,CAAA;;AAED,CAAA,MAAMhJ,YAAYgJ,WAAW5I,KAA7B;AACA,CAAA,MAAM6I,uBAAuBD,WAAWE,cAAX,KAA8B,KAA3D;AACA,CAAA,MAAMC,wBAAwBH,WAAWI,eAAX,KAA+B,KAA7D;;AAEA,CAAA,SAAO,UAASC,CAAT,EAAY;AACjB,CAAA,QAAIJ,oBAAJ,EAA0B;AACxBI,CAAAA,QAAEH,cAAF;AACD,CAAA;;AAED,CAAA,QAAIC,qBAAJ,EAA2B;AACzBE,CAAAA,QAAED,eAAF;AACD,CAAA;;AAEDvI,CAAAA,SAAKP,aAAL,CAAmBN,SAAnB,EAA8Ba,IAA9B;AACD,CAAA,GAVD;AAWD,CAAA;;AAED,qBAAe;;AAEb,CAAA;AACA,CAAA;AACAyI,CAAAA,kBAJa,4BAIIzI,IAJJ,EAIU4G,QAJV,EAIoB;AAC/B,CAAA;AACA,CAAA;AACA,CAAA,WAAOjK,EAAEgC,MAAF,CAASiI,QAAT,EAAmB,UAACG,MAAD,EAASP,KAAT,EAAgBnI,GAAhB,EAAwB;AAChDA,CAAAA,YAAM4J,mBAAmB5J,GAAnB,CAAN;AACA0I,CAAAA,aAAO1I,GAAP,IAAc6J,iBAAiBlI,IAAjB,EAAuBwG,KAAvB,CAAd;AACA,CAAA,aAAOO,MAAP;AACD,CAAA,KAJM,EAIJ,EAJI,CAAP;AAKD,CAAA;AAZY,CAAA,CAAf;;CC1BA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,IAAM2B,mBAAkB,SAAlBA,gBAAkB,CAAShK,IAAT,EAAeiK,EAAf,EAAmB;AACzC,CAAA,SAAOhM,EAAEgC,MAAF,CAASD,IAAT,EAAe,UAACkK,IAAD,EAAOC,GAAP,EAAYxK,GAAZ,EAAoB;AACxC,CAAA,QAAMyK,gBAAgBC,mBAAkB1K,GAAlB,EAAuBsK,EAAvB,CAAtB;AACAC,CAAAA,SAAKE,aAAL,IAAsBD,GAAtB;AACA,CAAA,WAAOD,IAAP;AACD,CAAA,GAJM,EAIJ,EAJI,CAAP;AAKD,CAAA,CAND;;AAQA,CAAA;AACA,CAAA;AACA,CAAA,IAAMG,qBAAoB,SAApBA,kBAAoB,CAASC,QAAT,EAAmBL,EAAnB,EAAuB;AAC/C,CAAA,SAAOK,SAASxJ,OAAT,CAAiB,uBAAjB,EAA0C,UAACyJ,CAAD,EAAO;AACtD,CAAA,WAAON,GAAGM,EAAEC,KAAF,CAAQ,CAAR,CAAH,CAAP;AACD,CAAA,GAFM,CAAP;AAGD,CAAA,CAJD;;AAMA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,IAAMC,qBAAoB,SAApBA,kBAAoB,CAASzK,IAAT,EAAeiK,EAAf,EAAmBS,UAAnB,EAA+B;AACvDzM,CAAAA,IAAEyB,IAAF,CAAOM,IAAP,EAAa,UAACmK,GAAD,EAAMxK,GAAN,EAAc;AACzB,CAAA,QAAI1B,EAAE4F,QAAF,CAAWsG,GAAX,CAAJ,EAAqB;AACnBnK,CAAAA,WAAKL,GAAL,IAAY0K,mBAAkBF,GAAlB,EAAuBF,EAAvB,CAAZ;AACD,CAAA,KAFD,MAEO,IAAIhM,EAAEC,QAAF,CAAWiM,GAAX,KAAmBlM,EAAE0M,OAAF,CAAUD,UAAV,CAAvB,EAA8C;AACnDzM,CAAAA,QAAEN,MAAF,CAASwM,GAAT,EAAcM,mBAAkBxM,EAAE+E,IAAF,CAAOmH,GAAP,EAAYO,UAAZ,CAAlB,EAA2CT,EAA3C,CAAd;AACA,CAAA;AACAhM,CAAAA,QAAEyB,IAAF,CAAOgL,UAAP,EAAmB,UAACE,QAAD,EAAc;AAC/B,CAAA,YAAMC,cAAcV,IAAIS,QAAJ,CAApB;AACA,CAAA,YAAI3M,EAAE4F,QAAF,CAAWgH,WAAX,CAAJ,EAA6B;AAC3BV,CAAAA,cAAIS,QAAJ,IAAgBP,mBAAkBQ,WAAlB,EAA+BZ,EAA/B,CAAhB;AACD,CAAA;AACF,CAAA,OALD;AAMD,CAAA;AACF,CAAA,GAbD;AAcA,CAAA,SAAOjK,IAAP;AACD,CAAA,CAhBD;;AAkBA,eAAe;;AAEb,CAAA;AACA,CAAA;AACAgK,CAAAA,iBAJa,2BAIGhK,IAJH,EAIS;AACpB,CAAA,QAAM8K,aAAa,KAAKC,cAAL,EAAnB;AACA,CAAA,WAAOf,iBAAgBhK,IAAhB,EAAsB8K,UAAtB,CAAP;AACD,CAAA,GAPY;;;AASb,CAAA;AACA,CAAA;AACAT,CAAAA,mBAXa,6BAWKC,QAXL,EAWe;AAC1B,CAAA,QAAMQ,aAAa,KAAKC,cAAL,EAAnB;AACA,CAAA,WAAOV,mBAAkBC,QAAlB,EAA4BQ,UAA5B,CAAP;AACD,CAAA,GAdY;;;AAgBb,CAAA;AACA,CAAA;AACAL,CAAAA,mBAlBa,6BAkBKzK,IAlBL,EAkBW0K,UAlBX,EAkBuB;AAClC,CAAA,QAAMI,aAAa,KAAKC,cAAL,EAAnB;AACA,CAAA,WAAON,mBAAkBzK,IAAlB,EAAwB8K,UAAxB,EAAoCJ,UAApC,CAAP;AACD,CAAA,GArBY;AAuBbK,CAAAA,gBAvBa,4BAuBI;AACf,CAAA,QAAMD,aAAa7M,EAAEiD,MAAF,CAAS,IAAT,EAAe,aAAf,CAAnB;AACA,CAAA,QAAM+I,KAAKhM,EAAEiD,MAAF,CAAS,IAAT,EAAe,IAAf,CAAX;AACA,CAAA,WAAO4J,cAAcb,EAArB;AACD,CAAA,GA3BY;;;AA6Bb,CAAA;AACA,CAAA;AACAe,CAAAA,iBA/Ba,6BA+BK;AAAA,CAAA;;AAChB,CAAA,QAAI,CAAC,KAAKf,EAAV,EAAc;AAAE,CAAA;AAAS,CAAA;;AAEzB,CAAA;AACA,CAAA;AACA,CAAA,QAAI,CAAC,KAAKgB,WAAV,EAAuB;AACrB,CAAA,WAAKA,WAAL,GAAmB,KAAKhB,EAAxB;AACD,CAAA;;AAED,CAAA;AACA,CAAA,QAAMrG,WAAW3F,EAAEiD,MAAF,CAAS,IAAT,EAAe,aAAf,CAAjB;;AAEA,CAAA;AACA,CAAA,SAAKgK,GAAL,GAAW,EAAX;;AAEA,CAAA;AACAjN,CAAAA,MAAEyB,IAAF,CAAOkE,QAAP,EAAiB,UAACyF,QAAD,EAAW1J,GAAX,EAAmB;AAClC,CAAA,YAAKuL,GAAL,CAASvL,GAAT,IAAgB,MAAKR,CAAL,CAAOkK,QAAP,CAAhB;AACD,CAAA,KAFD;;AAIA,CAAA,SAAKY,EAAL,GAAU,KAAKiB,GAAf;AACD,CAAA,GApDY;AAsDbC,CAAAA,mBAtDa,+BAsDO;AAAA,CAAA;;AAClB,CAAA,QAAI,CAAC,KAAKlB,EAAN,IAAY,CAAC,KAAKgB,WAAtB,EAAmC;AAAE,CAAA;AAAS,CAAA;;AAE9C,CAAA;AACAhN,CAAAA,MAAEyB,IAAF,CAAO,KAAKuK,EAAZ,EAAgB,UAACmB,GAAD,EAAMjL,IAAN,EAAe;AAC7B,CAAA,aAAO,OAAK8J,EAAL,CAAQ9J,IAAR,CAAP;AACD,CAAA,KAFD;;AAIA,CAAA;AACA,CAAA,SAAK8J,EAAL,GAAU,KAAKgB,WAAf;AACA,CAAA,WAAO,KAAKA,WAAZ;AACA,CAAA,WAAO,KAAKC,GAAZ;AACD,CAAA,GAlEY;AAoEbG,CAAAA,QApEa,kBAoENlL,IApEM,EAoEA;AACX,CAAA,WAAO,KAAK+K,GAAL,CAAS/K,IAAT,CAAP;AACD,CAAA;AAtEY,CAAA,CAAf;;CC5BA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;;;AAGA,CAAA,IAAMmL,YAAY;AAChBC,CAAAA,2BAAyB,IADT;AAEhBC,CAAAA,4BAA0B,IAFV;;AAIhB9F,CAAAA,gBAAc,KAJE;;AAMhBC,CAAAA,aANgB,yBAMF;AACZ,CAAA,WAAO,CAAC,CAAC,KAAKD,YAAd;AACD,CAAA,GARe;;;AAUhB1D,CAAAA,eAAa,KAVG;;AAYhByJ,CAAAA,YAZgB,wBAYH;AACX,CAAA,WAAO,CAAC,CAAC,KAAKzJ,WAAd;AACD,CAAA,GAde;;;AAgBhBL,CAAAA,eAAa,KAhBG;;AAkBhB+J,CAAAA,YAlBgB,wBAkBH;AACX,CAAA,WAAO,CAAC,CAAC,KAAK/J,WAAd;AACD,CAAA,GApBe;;;AAsBhB,CAAA;AACA,CAAA;AACAgK,CAAAA,gBAxBgB,0BAwBDC,SAxBC,EAwBU;;AAExB,CAAA,SAAKtD,4BAAL;AACA,CAAA,SAAKuD,kBAAL;;AAEA,CAAA,QAAMC,aAAa,KAAKC,UAAL,CAAgBH,SAAhB,CAAnB;;AAEA,CAAA,QAAI,OAAOA,SAAP,KAAqB,WAAzB,EAAsC;AACpC,CAAA,WAAKvD,MAAL,GAAcyD,UAAd;AACD,CAAA;;AAED,CAAA,QAAME,iBAAiB/N,EAAEN,MAAF,CAAS,EAAT,EACrB,KAAKyK,kBAAL,EADqB,EAErB0D,UAFqB,EAGrB,KAAK7D,oBAAL,EAHqB,EAIrB,KAAKgE,WAAL,EAJqB,CAAvB;;AAOArO,CAAAA,aAASsO,IAAT,CAAc5G,SAAd,CAAwBqG,cAAxB,CAAuC1K,IAAvC,CAA4C,IAA5C,EAAkD+K,cAAlD;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GA7Ce;AA+ChBD,CAAAA,YA/CgB,sBA+CLH,SA/CK,EA+CM;AACpB,CAAA,QAAMvD,SAASuD,aAAa,KAAKvD,MAAjC;;AAEA,CAAA,QAAIpK,EAAEmC,UAAF,CAAaiI,MAAb,CAAJ,EAA0B;AACxB,CAAA,aAAO,KAAK2B,eAAL,CAAqB3B,OAAOpH,IAAP,CAAY,IAAZ,CAArB,CAAP;AACD,CAAA;;AAED,CAAA,WAAO,KAAK+I,eAAL,CAAqB3B,MAArB,CAAP;AACD,CAAA,GAvDe;;;AAyDhB,CAAA;AACA,CAAA;AACA4D,CAAAA,aA3DgB,yBA2DF;AACZ,CAAA,QAAI,CAAC,KAAK/D,QAAV,EAAoB;AAAE,CAAA;AAAS,CAAA;;AAE/B,CAAA;AACA,CAAA,QAAMA,WAAW,KAAK8B,eAAL,CAAqB/L,EAAEiD,MAAF,CAAS,IAAT,EAAe,UAAf,CAArB,CAAjB;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,WAAO,KAAK6I,gBAAL,CAAsB,IAAtB,EAA4B7B,QAA5B,CAAP;AACD,CAAA,GApEe;;;AAsEhB,CAAA;AACAiE,CAAAA,sBAvEgB,kCAuEO;AACrB,CAAA,SAAKtD,qBAAL,CAA2B,KAAKC,KAAhC,EAAuC,KAAKC,UAA5C;;AAEA,CAAA;AACA,CAAA,SAAKR,6BAAL;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GA9Ee;;;AAgFhB,CAAA;AACA6D,CAAAA,wBAjFgB,oCAiFS;AACvB,CAAA,SAAKpD,uBAAL,CAA6B,KAAKF,KAAlC,EAAyC,KAAKC,UAA9C;;AAEA,CAAA;AACA,CAAA,SAAKP,+BAAL;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GAxFe;;;AA0FhB,CAAA;AACA6D,CAAAA,qBA3FgB,iCA2FM;AACpB,CAAA,QAAI,KAAK3G,YAAT,EAAuB;AACrB,CAAA,YAAM,IAAIhD,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,oBADkB;AAExBpC,CAAAA,kCAAwB,KAAKmH,GAA7B;AAFwB,CAAA,OAApB,CAAN;AAID,CAAA;AACF,CAAA,GAlGe;;;AAoGhB,CAAA;AACAU,CAAAA,SArGgB,qBAqGC;AACf,CAAA,QAAI,KAAKF,YAAT,EAAuB;AAAE,CAAA,aAAO,IAAP;AAAc,CAAA;AACvC,CAAA,QAAM7D,sBAAsB,CAAC,CAAC,KAAKF,WAAnC;;AAFe,CAAA,sCAANlE,IAAM;AAANA,CAAAA,UAAM;AAAA,CAAA;;AAIf,CAAA,SAAKsD,aAAL,cAAmB,gBAAnB,EAAqC,IAArC,SAA8CtD,IAA9C;AACA,CAAA,QAAIoE,mBAAJ,EAAyB;AACvB,CAAA,WAAKd,aAAL,CAAmB,eAAnB,EAAoC,IAApC;AACD,CAAA;;AAED,CAAA;AACA,CAAA,SAAKuL,gBAAL;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,SAAKC,cAAL;;AAEA,CAAA,QAAI1K,mBAAJ,EAAyB;AACvB,CAAA,WAAKF,WAAL,GAAmB,KAAnB;AACA,CAAA,WAAKZ,aAAL,CAAmB,QAAnB,EAA6B,IAA7B;AACD,CAAA;;AAED,CAAA;AACA,CAAA,SAAKyL,eAAL;;AAEA,CAAA,SAAK/D,iBAAL,CAAuBhL,IAAvB;;AAEA,CAAA,SAAKiI,YAAL,GAAoB,IAApB;AACA,CAAA,SAAK1D,WAAL,GAAmB,KAAnB;AACA,CAAA,SAAKjB,aAAL,cAAmB,SAAnB,EAA8B,IAA9B,SAAuCtD,IAAvC;;AAEA,CAAA,SAAKoI,aAAL;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GAtIe;AAwIhB4G,CAAAA,gBAxIgB,4BAwIC;AACf,CAAA,SAAKzB,eAAL;AACA,CAAA,SAAKtC,uBAAL;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GA7Ie;;;AA+IhB,CAAA;AACA4D,CAAAA,kBAhJgB,8BAgJG;AACjB,CAAA,SAAKnB,iBAAL;AACA,CAAA,SAAKxC,yBAAL;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GArJe;AAuJhB+D,CAAAA,OAvJgB,iBAuJVvM,IAvJU,EAuJJ;AACV,CAAA,SAAKkM,mBAAL;AACA,CAAA,WAAO,KAAKhB,MAAL,CAAYlL,IAAZ,CAAP;AACD,CAAA,GA1Je;;;AA4JhB,CAAA;AACA,CAAA;AACAwM,CAAAA,wBAAsB,WA9JN;;AAgKhB,CAAA;AACA,CAAA;AACA5L,CAAAA,eAlKgB,6BAkKA;AACd,CAAA,QAAM6L,MAAM7L,cAAcrD,KAAd,CAAoB,IAApB,EAA0BsB,SAA1B,CAAZ;;AAEA,CAAA,SAAK4J,wBAAL,CAA8BlL,KAA9B,CAAoC,IAApC,EAA0CsB,SAA1C;AACA,CAAA,SAAK6N,2BAAL,CAAiCnP,KAAjC,CAAuC,IAAvC,EAA6CsB,SAA7C;;AAEA,CAAA,WAAO4N,GAAP;AACD,CAAA,GAzKe;;;AA2KhB,CAAA;AACAf,CAAAA,oBA5KgB,gCA4KK;AACnB,CAAA,SAAKiB,gBAAL,GAAwB7O,EAAEiD,MAAF,CAAS,IAAT,EAAe,iBAAf,CAAxB;AACA,CAAA,SAAK6L,kBAAL,GAA0B9O,EAAEiD,MAAF,CAAS,IAAT,EAAe,mBAAf,CAA1B;AACD,CAAA,GA/Ke;AAiLhB2L,CAAAA,6BAjLgB,yCAiLc;AAC5B,CAAA,QAAMG,aAAa,KAAKC,WAAL,EAAnB;AACA,CAAA,QAAI,CAACD,UAAL,EAAiB;AACf,CAAA;AACD,CAAA;;AAEDA,CAAAA,eAAWE,sBAAX,CAAkCxP,KAAlC,CAAwCsP,UAAxC,EAAoDhO,SAApD;AACD,CAAA,GAxLe;;;AA0LhB,CAAA;AACA,CAAA;AACAiO,CAAAA,aA5LgB,yBA4LF;AACZ,CAAA,QAAIE,SAAS,KAAKC,OAAlB;;AAEA,CAAA,WAAOD,MAAP,EAAe;AACb,CAAA,UAAIA,kBAAkBjB,IAAtB,EAA4B;AAC1B,CAAA,eAAOiB,MAAP;AACD,CAAA;AACDA,CAAAA,eAASA,OAAOC,OAAhB;AACD,CAAA;AACF,CAAA,GArMe;AAuMhBF,CAAAA,wBAvMgB,kCAuMOzM,SAvMP,EAuM2B;AACzC,CAAA,QAAM4M,kBAAkB,KAAKtN,gBAAL,CAAsB,KAAK+M,gBAA3B,CAAxB;;AAEA,CAAA;;AAHyC,CAAA,uCAANrP,IAAM;AAANA,CAAAA,UAAM;AAAA,CAAA;;AAIzC,CAAA,QAAI,OAAO4P,eAAP,KAA2B,WAA3B,IAA0CpP,EAAEmC,UAAF,CAAaiN,gBAAgB5M,SAAhB,CAAb,CAA9C,EAAwF;AACtF4M,CAAAA,sBAAgB5M,SAAhB,EAA2B/C,KAA3B,CAAiC,IAAjC,EAAuCD,IAAvC;AACD,CAAA;;AAED,CAAA;AACA,CAAA,QAAM6P,oBAAoB,KAAKP,kBAA/B;;AAEA,CAAA;AACA,CAAA,QAAIO,qBAAqBrP,EAAE4F,QAAF,CAAWyJ,kBAAkB7M,SAAlB,CAAX,CAAzB,EAAmE;AACjE,CAAA,WAAKM,aAAL,cAAmBuM,kBAAkB7M,SAAlB,CAAnB,SAAoDhD,IAApD;AACD,CAAA;;AAED,CAAA,QAAM+C,SAASvC,EAAEiD,MAAF,CAAS,IAAT,EAAe,sBAAf,CAAf;;AAEA,CAAA,QAAIV,WAAW,KAAf,EAAsB;AACpB,CAAA,UAAM+M,iBAAiB/M,SAAS,GAAT,GAAeC,SAAtC;;AAEA,CAAA,WAAKM,aAAL,cAAmBwM,cAAnB,SAAsC9P,IAAtC;AACD,CAAA;AACF,CAAA;AA9Ne,CAAA,CAAlB;;AAiOAQ,CAAAA,EAAEN,MAAF,CAAS2N,SAAT,EAAoBkC,cAApB,EAAoChI,WAApC,EAAiDiI,yBAAjD,EAA4EC,aAA5E,EAA4FC,OAA5F,EAEA;;CC1Pe,SAASC,mBAAT,CAA6BtM,IAA7B,EAAmC;AAChD,CAAA,MAAI,CAACA,KAAKkK,wBAAV,EAAoC;AAClCpK,CAAAA,oBAAgBE,IAAhB,EAAsB,gBAAtB,EAAwCA,IAAxC;AACD,CAAA;;AAED,CAAA,MAAMO,sBAAsB,CAAC,CAACP,KAAKK,WAAnC;;AAEA,CAAA,MAAIE,mBAAJ,EAAyB;AACvBT,CAAAA,oBAAgBE,IAAhB,EAAsB,eAAtB,EAAuCA,IAAvC;AACD,CAAA;;AAEDA,CAAAA,OAAKuM,MAAL;;AAEA,CAAA,MAAIhM,mBAAJ,EAAyB;AACvBP,CAAAA,SAAKK,WAAL,GAAmB,KAAnB;AACAP,CAAAA,oBAAgBE,IAAhB,EAAsB,QAAtB,EAAgCA,IAAhC;AACD,CAAA;;AAEDA,CAAAA,OAAKoE,YAAL,GAAoB,IAApB;;AAEA,CAAA,MAAI,CAACpE,KAAKkK,wBAAV,EAAoC;AAClCpK,CAAAA,oBAAgBE,IAAhB,EAAsB,SAAtB,EAAiCA,IAAjC;AACD,CAAA;AACF,CAAA;;CCZD,IAAM0D,iBAAe,CACnB,gBADmB,EAEnB,UAFmB,EAGnB,gBAHmB,CAArB;;AAMA,CAAA,IAAM8I,SAAS7I,iBAAiBtH,MAAjB,CAAwB;AACrCyH,CAAAA,aAAW,KAD0B;AAErC2I,CAAAA,kBAAgB,KAFqB;AAGrCC,CAAAA,eAAa,KAHwB;;AAKrClL,CAAAA,aALqC,uBAKzBtD,OALyB,EAKhB;AACnB,CAAA,SAAK8E,WAAL,CAAiB9E,OAAjB;;AAEA,CAAA,SAAKD,YAAL,CAAkBC,OAAlB,EAA2BwF,cAA3B;;AAEA,CAAA;AACA,CAAA,SAAKiJ,OAAL,GAAe,KAAK/O,EAAL,GAAU,KAAKW,SAAL,CAAe,IAAf,CAAzB;;AAEA,CAAA;AACA,CAAA,SAAKX,EAAL,GAAU,KAAKA,EAAL,YAAmBtB,SAASuB,CAA5B,GAAgC,KAAKD,EAAL,CAAQ,CAAR,CAAhC,GAA6C,KAAKA,EAA5D;;AAEA,CAAA,QAAI,CAAC,KAAKA,EAAV,EAAc;AACZ,CAAA,YAAM,IAAIwD,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,WADkB;AAExBpC,CAAAA,iBAAS;AAFe,CAAA,OAApB,CAAN;AAID,CAAA;;AAED,CAAA,SAAKqN,GAAL,GAAW,KAAK8C,KAAL,CAAW,KAAKhP,EAAhB,CAAX;AACA+F,CAAAA,qBAAiBhE,IAAjB,CAAsB,IAAtB,EAA4BzB,OAA5B;AACD,CAAA,GAzBoC;;;AA2BrC,CAAA;AACA,CAAA;AACA,CAAA;AACA2O,CAAAA,MA9BqC,gBA8BhC7M,IA9BgC,EA8B1B9B,OA9B0B,EA8BjB;AAClB,CAAA,QAAI,CAAC,KAAK4O,cAAL,CAAoB5O,OAApB,CAAL,EAAmC;AACjC,CAAA;AACD,CAAA;AACD,CAAA,SAAK6O,WAAL,CAAiB/M,IAAjB;AACA,CAAA,QAAIA,SAAS,KAAKgN,WAAlB,EAA+B;AAAE,CAAA,aAAO,IAAP;AAAc,CAAA;;AAE/C,CAAA,SAAKvN,aAAL,CAAmB,aAAnB,EAAkC,IAAlC,EAAwCO,IAAxC,EAA8C9B,OAA9C;;AAEA8C,CAAAA,sBAAkBhB,IAAlB;;AAEA,CAAA,SAAKiN,KAAL,CAAW/O,OAAX;;AAEA,CAAA;AACA,CAAA;AACA,CAAA;AACA8B,CAAAA,SAAKkB,EAAL,CAAQ,SAAR,EAAmB,KAAKgM,MAAxB,EAAgC,IAAhC;;AAEA,CAAA;AACA,CAAA;AACA,CAAA;AACAlN,CAAAA,SAAK8L,OAAL,GAAe,IAAf;;AAEA,CAAA,SAAKqB,WAAL,CAAiBnN,IAAjB;;AAEA,CAAA,SAAKoN,WAAL,CAAiBpN,IAAjB,EAAuB9B,OAAvB;;AAEA,CAAA,SAAKuB,aAAL,CAAmB,MAAnB,EAA2B,IAA3B,EAAiCO,IAAjC,EAAuC9B,OAAvC;AACA,CAAA,WAAO,IAAP;AACD,CAAA,GA3DoC;AA6DrCiP,CAAAA,aA7DqC,uBA6DzBnN,IA7DyB,EA6DnB;AAChB,CAAA,QAAIA,KAAKU,WAAT,EAAsB;AACpB,CAAA;AACD,CAAA;;AAED,CAAA,QAAI,CAACV,KAAKiK,uBAAV,EAAmC;AACjCnK,CAAAA,sBAAgBE,IAAhB,EAAsB,eAAtB,EAAuCA,IAAvC;AACD,CAAA;;AAEDA,CAAAA,SAAKqN,MAAL;;AAEA,CAAA,QAAI,CAACrN,KAAKiK,uBAAV,EAAmC;AACjCjK,CAAAA,WAAKU,WAAL,GAAmB,IAAnB;AACAZ,CAAAA,sBAAgBE,IAAhB,EAAsB,QAAtB,EAAgCA,IAAhC;AACD,CAAA;AACF,CAAA,GA5EoC;AA8ErCoN,CAAAA,aA9EqC,uBA8EzBpN,IA9EyB,EA8EL;AAAA,CAAA,QAAd9B,OAAc,uEAAJ,EAAI;;AAC9B,CAAA,QAAMkC,sBAAsB,CAACJ,KAAKK,WAAN,IAAqB1C,eAAe,KAAKC,EAApB,CAAjD;AACA,CAAA,QAAM0P,kBAAkB,OAAOpP,QAAQuO,cAAf,KAAkC,WAAlC,GAAgD,CAAC,CAAC9P,EAAEiD,MAAF,CAAS,IAAT,EAAe,gBAAf,CAAlD,GAAqF,CAAC,CAAC1B,QAAQuO,cAAvH;;AAEA,CAAA,QAAIrM,mBAAJ,EAAyB;AACvBN,CAAAA,sBAAgBE,IAAhB,EAAsB,eAAtB,EAAuCA,IAAvC;AACD,CAAA;;AAED,CAAA,QAAIsN,eAAJ,EAAqB;AACnB,CAAA,WAAKC,UAAL,CAAgBvN,IAAhB;AACD,CAAA,KAFD,MAEO;AACL,CAAA,WAAKwN,UAAL,CAAgBxN,IAAhB;AACD,CAAA;;AAED,CAAA,QAAII,mBAAJ,EAAyB;AACvBJ,CAAAA,WAAKK,WAAL,GAAmB,IAAnB;AACAP,CAAAA,sBAAgBE,IAAhB,EAAsB,QAAtB,EAAgCA,IAAhC;AACD,CAAA;;AAED,CAAA,SAAKgN,WAAL,GAAmBhN,IAAnB;AACD,CAAA,GAlGoC;AAoGrC8M,CAAAA,gBApGqC,4BAoGR;AAAA,CAAA,QAAd5O,OAAc,uEAAJ,EAAI;;AAC3B,CAAA,QAAI,CAACvB,EAAEC,QAAF,CAAW,KAAKgB,EAAhB,CAAL,EAA0B;AACxB,CAAA,WAAKkM,GAAL,GAAW,KAAK8C,KAAL,CAAW,KAAKhP,EAAhB,CAAX;AACA,CAAA,WAAKA,EAAL,GAAU,KAAKkM,GAAL,CAAS,CAAT,CAAV;AACD,CAAA;;AAED,CAAA,QAAI,CAAC,KAAKA,GAAN,IAAa,KAAKA,GAAL,CAAS9E,MAAT,KAAoB,CAArC,EAAwC;AACtC,CAAA,UAAMyI,iBAAiB,OAAOvP,QAAQuP,cAAf,KAAkC,WAAlC,GAAgD,CAAC,CAAC9Q,EAAEiD,MAAF,CAAS,IAAT,EAAe,gBAAf,CAAlD,GAAqF,CAAC,CAAC1B,QAAQuP,cAAtH;;AAEA,CAAA,UAAIA,cAAJ,EAAoB;AAClB,CAAA,eAAO,KAAP;AACD,CAAA,OAFD,MAEO;AACL,CAAA,cAAM,IAAIrM,eAAJ,gDAAiE,KAAKwC,GAAtE,CAAN;AACD,CAAA;AACF,CAAA;AACD,CAAA,WAAO,IAAP;AACD,CAAA,GApHoC;AAsHrCmJ,CAAAA,aAtHqC,uBAsHzB/M,IAtHyB,EAsHnB;AAChB,CAAA,QAAI,CAACA,IAAL,EAAW;AACT,CAAA,YAAM,IAAIoB,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,cADkB;AAExBpC,CAAAA,iBAAS;AAFe,CAAA,OAApB,CAAN;AAID,CAAA;;AAED,CAAA,QAAIuD,KAAKoE,YAAT,EAAuB;AACrB,CAAA,YAAM,IAAIhD,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,oBADkB;AAExBpC,CAAAA,kCAAwBuD,KAAK4D,GAA7B;AAFwB,CAAA,OAApB,CAAN;AAID,CAAA;AACF,CAAA,GApIoC;;;AAsIrC,CAAA;AACA,CAAA;AACAgJ,CAAAA,OAxIqC,iBAwI/BhP,EAxI+B,EAwI3B;AACR,CAAA,WAAOtB,SAASuB,CAAT,CAAWD,EAAX,EAAejB,EAAEiD,MAAF,CAAS,IAAT,EAAe,UAAf,CAAf,CAAP;AACD,CAAA,GA1IoC;AA4IrC2N,CAAAA,YA5IqC,sBA4I1BvN,IA5I0B,EA4IpB;AACf,CAAA;AACA,CAAA,SAAK0N,UAAL;;AAEA,CAAA,QAAM7B,SAAS,KAAKjO,EAAL,CAAQ+P,UAAvB;;AAEA9B,CAAAA,WAAO+B,YAAP,CAAoB5N,KAAKpC,EAAzB,EAA6B,KAAKA,EAAlC;AACA,CAAA,SAAK8O,WAAL,GAAmB,IAAnB;AACD,CAAA,GApJoC;;;AAsJrC,CAAA;AACAgB,CAAAA,YAvJqC,wBAuJxB;AACX,CAAA;AACA,CAAA,QAAI,CAAC,KAAKhB,WAAV,EAAuB;AACrB,CAAA;AACD,CAAA;;AAED,CAAA,QAAM1M,OAAO,KAAKgN,WAAlB;;AAEA,CAAA,QAAI,CAAChN,IAAL,EAAW;AACT,CAAA;AACD,CAAA;;AAED,CAAA,QAAM6L,SAAS7L,KAAKpC,EAAL,CAAQ+P,UAAvB;;AAEA,CAAA,QAAI,CAAC9B,MAAL,EAAa;AACX,CAAA;AACD,CAAA;;AAEDA,CAAAA,WAAO+B,YAAP,CAAoB,KAAKhQ,EAAzB,EAA6BoC,KAAKpC,EAAlC;AACA,CAAA,SAAK8O,WAAL,GAAmB,KAAnB;AACD,CAAA,GA3KoC;;;AA6KrC,CAAA;AACAmB,CAAAA,YA9KqC,wBA8KxB;AACX,CAAA,WAAO,CAAC,CAAC,KAAKnB,WAAd;AACD,CAAA,GAhLoC;;;AAkLrC,CAAA;AACA,CAAA;AACAc,CAAAA,YApLqC,sBAoL1BxN,IApL0B,EAoLpB;AACf,CAAA,SAAKpC,EAAL,CAAQkQ,WAAR,CAAoB9N,KAAKpC,EAAzB;AACD,CAAA,GAtLoC;;;AAwLrC,CAAA;AACA,CAAA;AACAqP,CAAAA,OA1LqC,mBA0LK;AAAA,CAAA,QAApC/O,OAAoC,uEAA1B,EAAEuP,gBAAgB,IAAlB,EAA0B;;AACxC,CAAA,QAAMzN,OAAO,KAAKgN,WAAlB;;AAEA,CAAA;AACA,CAAA,QAAI,CAAChN,IAAL,EAAW;AACT,CAAA,UAAI,KAAK8M,cAAL,CAAoB5O,OAApB,CAAJ,EAAkC;AAChC,CAAA,aAAK6P,UAAL;AACD,CAAA;AACD,CAAA,aAAO,IAAP;AACD,CAAA;;AAED,CAAA,QAAMC,gBAAgB,CAAC9P,QAAQ+P,cAA/B;;AAEA,CAAA,QAAI,CAACD,aAAL,EAAoB;AAClBxR,CAAAA,gBAAU,gEAAV;AACD,CAAA;;AAED,CAAA,SAAK0Q,MAAL,CAAYlN,IAAZ,EAAkBgO,aAAlB;AACA,CAAA,WAAO,IAAP;AACD,CAAA,GA7MoC;AA+MrCd,CAAAA,QA/MqC,kBA+M9BlN,IA/M8B,EA+MxBgO,aA/MwB,EA+MT;AAC1BhO,CAAAA,SAAKkO,GAAL,CAAS,SAAT,EAAoB,KAAKhB,MAAzB,EAAiC,IAAjC;AACA,CAAA,SAAKzN,aAAL,CAAmB,cAAnB,EAAmC,IAAnC,EAAyCO,IAAzC;;AAEA,CAAA,SAAK0N,UAAL;;AAEA,CAAA,WAAO,KAAKV,WAAZ;;AAEA,CAAA,QAAI,CAAChN,KAAKoE,YAAV,EAAwB;AACtB,CAAA,WAAK+J,WAAL,CAAiBnO,IAAjB,EAAuBgO,aAAvB;AACA,CAAA,aAAOhO,KAAK8L,OAAZ;AACD,CAAA;;AAED,CAAA,SAAKrM,aAAL,CAAmB,OAAnB,EAA4B,IAA5B,EAAkCO,IAAlC;AACD,CAAA,GA7NoC;AA+NrCmO,CAAAA,aA/NqC,uBA+NzBnO,IA/NyB,EA+NnBgO,aA/NmB,EA+NJ;AAC/B,CAAA,QAAI,CAACA,aAAL,EAAoB;AAClB,CAAA,WAAKI,WAAL,CAAiBpO,IAAjB;AACA,CAAA;AACD,CAAA;;AAED,CAAA,QAAIA,KAAKsE,OAAT,EAAkB;AAChBtE,CAAAA,WAAKsE,OAAL;AACD,CAAA,KAFD,MAEO;AACLgI,CAAAA,0BAAoBtM,IAApB;AACD,CAAA;AACF,CAAA,GA1OoC;AA4OrCqO,CAAAA,YA5OqC,wBA4OxB;AACX,CAAA,QAAMrO,OAAO,KAAKgN,WAAlB;;AAEA,CAAA,QAAI,CAAChN,IAAL,EAAW;AACT,CAAA;AACD,CAAA;;AAED,CAAA,SAAKkN,MAAL,CAAYlN,IAAZ;;AAEA,CAAA,WAAOA,IAAP;AACD,CAAA,GAtPoC;AAwPrCoO,CAAAA,aAxPqC,uBAwPzBpO,IAxPyB,EAwPnB;AAChB,CAAA,QAAMO,sBAAsB,CAAC,CAACP,KAAKK,WAAnC;AACA,CAAA,QAAIE,mBAAJ,EAAyB;AACvBT,CAAAA,sBAAgBE,IAAhB,EAAsB,eAAtB,EAAuCA,IAAvC;AACD,CAAA;;AAED,CAAA,SAAK+N,UAAL;;AAEA,CAAA,QAAIxN,mBAAJ,EAAyB;AACvBP,CAAAA,WAAKK,WAAL,GAAmB,KAAnB;AACAP,CAAAA,sBAAgBE,IAAhB,EAAsB,QAAtB,EAAgCA,IAAhC;AACD,CAAA;AACF,CAAA,GApQoC;;;AAsQrC,CAAA;AACA+N,CAAAA,YAvQqC,wBAuQxB;AACX,CAAA,SAAKjE,GAAL,CAASwE,QAAT,GAAoBC,MAApB;AACD,CAAA,GAzQoC;;;AA2QrC,CAAA;AACA,CAAA;AACAC,CAAAA,SA7QqC,qBA6Q3B;AACR,CAAA,WAAO,CAAC,CAAC,KAAKxB,WAAd;AACD,CAAA,GA/QoC;;;AAiRrC,CAAA;AACA,CAAA;AACA,CAAA;AACAyB,CAAAA,OApRqC,iBAoR/BvQ,OApR+B,EAoRtB;AACb,CAAA,SAAK+O,KAAL,CAAW/O,OAAX;;AAEA,CAAA,QAAI,KAAK4L,GAAT,EAAc;AACZ,CAAA,WAAKlM,EAAL,GAAU,KAAK+O,OAAf;AACD,CAAA;;AAED,CAAA,WAAO,KAAK7C,GAAZ;AACA,CAAA,WAAO,IAAP;AACD,CAAA,GA7RoC;AA+RrCxF,CAAAA,SA/RqC,mBA+R7BpG,OA/R6B,EA+RpB;AACf,CAAA,SAAKuQ,KAAL,CAAWvQ,OAAX;AACA,CAAA,WAAOyF,iBAAiBK,SAAjB,CAA2BM,OAA3B,CAAmClI,KAAnC,CAAyC,IAAzC,EAA+CsB,SAA/C,CAAP;AACD,CAAA;AAlSoC,CAAA,CAAxB,CAAf,CAqSA;;CCnTA;AACA,uBAAwBgR,UAAT,EAAqBC,QAArB,EAA+B;AAC5C,CAAA,MAAID,sBAAsBlC,MAA1B,EAAkC;AAChC,CAAA,WAAOkC,UAAP;AACD,CAAA;;AAED,CAAA,SAAOE,0BAA0BF,UAA1B,EAAsCC,QAAtC,CAAP;AACD,CAAA;;AAED,CAAA,SAASC,yBAAT,CAAmCF,UAAnC,EAA+CC,QAA/C,EAAyD;AACvD,CAAA,MAAME,OAAOlS,EAAEN,MAAF,CAAS,EAAT,EAAasS,QAAb,CAAb;;AAEA,CAAA,MAAIhS,EAAE4F,QAAF,CAAWmM,UAAX,CAAJ,EAA4B;AAC1B/R,CAAAA,MAAEN,MAAF,CAASwS,IAAT,EAAe,EAAEjR,IAAI8Q,UAAN,EAAf;;AAEA,CAAA,WAAOI,sBAAsBD,IAAtB,CAAP;AACD,CAAA;;AAED,CAAA,MAAIlS,EAAEmC,UAAF,CAAa4P,UAAb,CAAJ,EAA8B;AAC5B/R,CAAAA,MAAEN,MAAF,CAASwS,IAAT,EAAe,EAAEE,aAAaL,UAAf,EAAf;;AAEA,CAAA,WAAOI,sBAAsBD,IAAtB,CAAP;AACD,CAAA;;AAED,CAAA,MAAIlS,EAAEC,QAAF,CAAW8R,UAAX,CAAJ,EAA4B;AAC1B,CAAA,QAAIA,WAAW3G,QAAf,EAAyB;AACvBvL,CAAAA,gBAAU,mGAAV;AACD,CAAA;;AAEDG,CAAAA,MAAEN,MAAF,CAASwS,IAAT,EAAe,EAAEjR,IAAI8Q,WAAW3G,QAAjB,EAAf,EAA4C2G,UAA5C;;AAEA,CAAA,WAAOI,sBAAsBD,IAAtB,CAAP;AACD,CAAA;;AAED,CAAA,QAAM,IAAIzN,eAAJ,CAAoB;AACxB3E,CAAAA,aAAS,qCADe;AAExBM,CAAAA,SAAK;AAFmB,CAAA,GAApB,CAAN;AAID,CAAA;;AAED,CAAA,SAAS+R,qBAAT,CAA+BJ,UAA/B,EAA2C;AACzC,CAAA,MAAMM,cAAcN,WAAWK,WAA/B;;AAEA,CAAA,MAAM7Q,UAAUvB,EAAEsS,IAAF,CAAOP,UAAP,EAAmB,aAAnB,CAAhB;;AAEA,CAAA,SAAO,IAAIM,WAAJ,CAAgB9Q,OAAhB,CAAP;AACD,CAAA;;CC9CD;AACA,CAAA;AACA,CAAA;;AAEA,oBAAe;AACb6Q,CAAAA,eAAavC,MADA;;AAGb,CAAA;AACA,CAAA;AACA0C,CAAAA,cALa,0BAKE;;AAEb,CAAA;AACA,CAAA,SAAKC,OAAL,GAAgB,KAAKA,OAAL,IAAgB,EAAhC;AACA,CAAA,SAAKC,QAAL,GAAgB,EAAhB;;AAEA,CAAA,SAAKC,UAAL,CAAgB1S,EAAEiD,MAAF,CAAS,IAAT,EAAe,SAAf,CAAhB;AACD,CAAA,GAZY;;;AAcb,CAAA;AACA,CAAA;AACA0P,CAAAA,gBAhBa,4BAgBI;AACfzI,CAAAA,YAAQ,KAAKuI,QAAb,EAAuB,OAAvB;AACD,CAAA,GAlBY;;;AAoBb,CAAA;AACAG,CAAAA,WArBa,qBAqBH1Q,IArBG,EAqBG6P,UArBH,EAqBe;AAC1B,CAAA,QAAMS,UAAU,EAAhB;AACAA,CAAAA,YAAQtQ,IAAR,IAAgB6P,UAAhB;AACA,CAAA,WAAO,KAAKW,UAAL,CAAgBF,OAAhB,EAAyBtQ,IAAzB,CAAP;AACD,CAAA,GAzBY;;;AA2Bb,CAAA;AACAwQ,CAAAA,YA5Ba,sBA4BFF,OA5BE,EA4BO;AAClB,CAAA;AACA,CAAA,QAAIxS,EAAE6S,OAAF,CAAUL,OAAV,CAAJ,EAAwB;AACtB,CAAA;AACD,CAAA;;AAED,CAAA;AACA,CAAA;AACAA,CAAAA,cAAU,KAAKhG,iBAAL,CAAuBgG,OAAvB,EAAgC,CAAC,UAAD,EAAa,IAAb,CAAhC,CAAV;;AAEA,CAAA;AACA,CAAA,SAAKA,OAAL,GAAexS,EAAEN,MAAF,CAAS,EAAT,EAAa,KAAK8S,OAAlB,EAA2BA,OAA3B,CAAf;;AAEA,CAAA,WAAO,KAAKM,WAAL,CAAiBN,OAAjB,CAAP;AACD,CAAA,GA1CY;;;AA4Cb,CAAA;AACAM,CAAAA,aA7Ca,uBA6CDC,iBA7CC,EA6CkB;AAAA,CAAA;;AAC7B,CAAA,QAAMf,WAAW;AACfI,CAAAA,mBAAa,KAAKA,WADH;AAEfY,CAAAA,gBAAUhT,EAAEiT,OAAF,CAAUjT,EAAEiD,MAAZ,EAAoB,IAApB,EAA0B,IAA1B;AAFK,CAAA,KAAjB;;AAKA,CAAA,WAAOjD,EAAEgC,MAAF,CAAS+Q,iBAAT,EAA4B,UAACP,OAAD,EAAUT,UAAV,EAAsB7P,IAAtB,EAA+B;AAChEsQ,CAAAA,cAAQtQ,IAAR,IAAgBgR,YAAYnB,UAAZ,EAAwBC,QAAxB,CAAhB;AACA,CAAA,YAAKmB,UAAL,CAAgBX,QAAQtQ,IAAR,CAAhB,EAA+BA,IAA/B;AACA,CAAA,aAAOsQ,OAAP;AACD,CAAA,KAJM,EAIJ,EAJI,CAAP;AAKD,CAAA,GAxDY;AA0DbW,CAAAA,YA1Da,sBA0DFC,MA1DE,EA0DMlR,IA1DN,EA0DY;AACvB,CAAA,SAAKY,aAAL,CAAmB,mBAAnB,EAAwC,IAAxC,EAA8CZ,IAA9C,EAAoDkR,MAApD;;AAEAA,CAAAA,WAAOjE,OAAP,GAAiB,IAAjB;;AAEA,CAAA,SAAKsD,QAAL,CAAcvQ,IAAd,IAAsBkR,MAAtB;;AAEA,CAAA,SAAKtQ,aAAL,CAAmB,YAAnB,EAAiC,IAAjC,EAAuCZ,IAAvC,EAA6CkR,MAA7C;AACD,CAAA,GAlEY;;;AAoEb,CAAA;AACAC,CAAAA,cArEa,wBAqEAnR,IArEA,EAqEM;AACjB,CAAA,QAAMkR,SAAS,KAAKX,QAAL,CAAcvQ,IAAd,CAAf;;AAEA,CAAA,SAAKoR,aAAL,CAAmBF,MAAnB,EAA2BlR,IAA3B;;AAEA,CAAA,WAAOkR,MAAP;AACD,CAAA,GA3EY;;;AA6Eb,CAAA;AACAG,CAAAA,eA9Ea,2BA8EG;AACd,CAAA,QAAMf,UAAU,KAAKgB,UAAL,EAAhB;;AAEAxT,CAAAA,MAAEyB,IAAF,CAAO,KAAKgR,QAAZ,EAAsBzS,EAAEyT,IAAF,CAAO,KAAKH,aAAZ,EAA2B,IAA3B,CAAtB;;AAEA,CAAA,WAAOd,OAAP;AACD,CAAA,GApFY;AAsFbc,CAAAA,eAtFa,yBAsFCF,MAtFD,EAsFSlR,IAtFT,EAsFe;AAC1B,CAAA,SAAKY,aAAL,CAAmB,sBAAnB,EAA2C,IAA3C,EAAiDZ,IAAjD,EAAuDkR,MAAvD;;AAEAA,CAAAA,WAAOzL,OAAP;;AAEA,CAAA,WAAO,KAAK6K,OAAL,CAAatQ,IAAb,CAAP;AACA,CAAA,WAAO,KAAKuQ,QAAL,CAAcvQ,IAAd,CAAP;;AAEA,CAAA,SAAKY,aAAL,CAAmB,eAAnB,EAAoC,IAApC,EAA0CZ,IAA1C,EAAgDkR,MAAhD;AACD,CAAA,GA/FY;;;AAiGb,CAAA;AACA,CAAA;AACAM,CAAAA,cAnGa,0BAmGE;AACb,CAAA,QAAMlB,UAAU,KAAKgB,UAAL,EAAhB;AACAtJ,CAAAA,YAAQsI,OAAR,EAAiB,OAAjB;AACA,CAAA,WAAOA,OAAP;AACD,CAAA,GAvGY;;;AAyGb,CAAA;AACA,CAAA;AACA,CAAA;AACAmB,CAAAA,WA5Ga,qBA4GHzR,IA5GG,EA4GG;AACd,CAAA,WAAO,CAAC,CAAC,KAAK0R,SAAL,CAAe1R,IAAf,CAAT;AACD,CAAA,GA9GY;;;AAgHb,CAAA;AACA,CAAA;AACA,CAAA;AACA0R,CAAAA,WAnHa,qBAmHH1R,IAnHG,EAmHG;AACd,CAAA,WAAO,KAAKuQ,QAAL,CAAcvQ,IAAd,CAAP;AACD,CAAA,GArHY;;;AAuHb,CAAA;AACAsR,CAAAA,YAxHa,wBAwHA;AACX,CAAA,WAAOxT,EAAE6T,KAAF,CAAQ,KAAKpB,QAAb,CAAP;AACD,CAAA,GA1HY;AA4HbqB,CAAAA,eA5Ha,yBA4HC5R,IA5HD,EA4HOmB,IA5HP,EA4HsB;AACjC,CAAA,QAAM+P,SAAS,KAAKQ,SAAL,CAAe1R,IAAf,CAAf;;AADiC,CAAA,sCAAN1C,IAAM;AAANA,CAAAA,UAAM;AAAA,CAAA;;AAEjC,CAAA,WAAO4T,OAAOlD,IAAP,gBAAY7M,IAAZ,SAAqB7D,IAArB,EAAP;AACD,CAAA,GA/HY;AAiIbuU,CAAAA,iBAjIa,2BAiIG7R,IAjIH,EAiIS;AACpB,CAAA,WAAO,KAAK0R,SAAL,CAAe1R,IAAf,EAAqBwP,UAArB,EAAP;AACD,CAAA,GAnIY;AAqIbsC,CAAAA,cArIa,wBAqIA9R,IArIA,EAqIM;AACjB,CAAA,WAAO,KAAK0R,SAAL,CAAe1R,IAAf,EAAqBmO,WAA5B;AACD,CAAA;AAvIY,CAAA,CAAf;;CCFA;AACA,CAAA;AACA,CAAA,IAAM4D,WAAW;;AAEf,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAvD,CAAAA,QANe,kBAMRnI,QANQ,EAME2L,IANF,EAMQ;AACrB,CAAA,QAAI,CAAC3L,QAAL,EAAe;AACb,CAAA,YAAM,IAAI9D,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,uBADkB;AAExBpC,CAAAA,iBAAS;AAFe,CAAA,OAApB,CAAN;AAID,CAAA;;AAED,CAAA,QAAMqU,eAAenU,EAAEmC,UAAF,CAAaoG,QAAb,IAAyBA,QAAzB,GAAoCV,cAAcG,GAAd,CAAkBO,QAAlB,CAAzD;;AAEA,CAAA,WAAO4L,aAAaD,IAAb,CAAP;AACD,CAAA;AAjBc,CAAA,CAAjB,CAoBA;;CClBA,IAAMnN,iBAAe,CACnB,WADmB,EAEnB,sBAFmB,EAGnB,iBAHmB,EAInB,mBAJmB,EAKnB,kBALmB,EAMnB,QANmB,EAOnB,aAPmB,EAQnB,aARmB,EASnB,SATmB,EAUnB,UAVmB,EAWnB,iBAXmB,EAYnB,UAZmB,EAanB,IAbmB,CAArB;;AAgBA,CAAA;AACA,CAAA;AACA,CAAA,IAAMkH,OAAOtO,SAASsO,IAAT,CAAcvO,MAAd,CAAqB;AAEhCmF,CAAAA,aAFgC,uBAEpBtD,OAFoB,EAEX;AACnB,CAAA,SAAKmP,MAAL,GAAc1Q,EAAEyT,IAAF,CAAO,KAAK/C,MAAZ,EAAoB,IAApB,CAAd;;AAEA,CAAA,SAAKrK,WAAL,CAAiB9E,OAAjB;;AAEA,CAAA,SAAKD,YAAL,CAAkBC,OAAlB,EAA2BwF,cAA3B;;AAEA1C,CAAAA,sBAAkB,IAAlB;;AAEA,CAAA,SAAKyF,cAAL;AACA,CAAA,SAAKyI,YAAL;;AAEA,CAAA,QAAM/S,OAAO4U,MAAM/M,SAAN,CAAgBkF,KAAhB,CAAsBvJ,IAAtB,CAA2BjC,SAA3B,CAAb;AACAvB,CAAAA,SAAK,CAAL,IAAU,KAAK+B,OAAf;AACA5B,CAAAA,aAASsO,IAAT,CAAc5G,SAAd,CAAwBxC,WAAxB,CAAoCpF,KAApC,CAA0C,IAA1C,EAAgDD,IAAhD;;AAEA,CAAA,SAAK0O,oBAAL;AACD,CAAA,GAnB+B;;;AAqBhC,CAAA;AACA,CAAA;AACAmG,CAAAA,eAvBgC,2BAuBhB;AACd,CAAA,QAAI,CAAC,KAAKxJ,KAAN,IAAe,CAAC,KAAKC,UAAzB,EAAqC;AACnC,CAAA,aAAO,EAAP;AACD,CAAA;;AAED,CAAA;AACA,CAAA,QAAI,KAAKD,KAAT,EAAgB;AACd,CAAA,aAAO,KAAKyJ,cAAL,EAAP;AACD,CAAA;;AAED,CAAA;AACA,CAAA;AACA,CAAA,WAAO;AACLC,CAAAA,aAAO,KAAKC,mBAAL;AADF,CAAA,KAAP;AAGD,CAAA,GAtC+B;;;AAwChC,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAF,CAAAA,gBA5CgC,4BA4Cf;AACf,CAAA,QAAI,CAAC,KAAKzJ,KAAV,EAAiB;AAAE,CAAA,aAAO,EAAP;AAAY,CAAA;AAC/B,CAAA,WAAO7K,EAAE6T,KAAF,CAAQ,KAAKhJ,KAAL,CAAW4J,UAAnB,CAAP;AACD,CAAA,GA/C+B;;;AAiDhC,CAAA;AACA,CAAA;AACAD,CAAAA,qBAnDgC,iCAmDV;AACpB,CAAA,QAAI,CAAC,KAAK1J,UAAV,EAAsB;AAAE,CAAA,aAAO,EAAP;AAAY,CAAA;AACpC,CAAA,WAAO,KAAKA,UAAL,CAAgBxB,GAAhB,CAAoB,UAASuB,KAAT,EAAgB;AAAE,CAAA,aAAO7K,EAAE6T,KAAF,CAAQhJ,MAAM4J,UAAd,CAAP;AAAmC,CAAA,KAAzE,CAAP;AACD,CAAA,GAtD+B;;;AAwDhC,CAAA;AACA,CAAA;AACA,CAAA;AACAC,CAAAA,YA3DgC,wBA2DnB;AACX,CAAA,QAAMC,QAAQ,CAAC,CAAC,KAAK1T,EAArB;;AAEAtB,CAAAA,aAASsO,IAAT,CAAc5G,SAAd,CAAwBqN,UAAxB,CAAmCjV,KAAnC,CAAyC,IAAzC,EAA+CsB,SAA/C;;AAEA,CAAA,QAAI4T,KAAJ,EAAW;AACT,CAAA,WAAK5Q,WAAL,GAAmB,CAAC,CAAC,KAAKoJ,GAAL,CAAS9E,MAA9B;AACA,CAAA,WAAK3E,WAAL,GAAmB1C,eAAe,KAAKC,EAApB,CAAnB;AACD,CAAA;;AAED,CAAA,QAAI,KAAK8C,WAAT,EAAsB;AACpB,CAAA,WAAKyK,cAAL;AACD,CAAA;;AAED,CAAA,WAAO,IAAP;AACD,CAAA,GA1E+B;;;AA4EhC,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAkC,CAAAA,QAnFgC,oBAmFvB;AACP,CAAA,SAAKtC,mBAAL;;AAEA,CAAA,SAAKtL,aAAL,CAAmB,eAAnB,EAAoC,IAApC;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,QAAI,KAAKiB,WAAT,EAAsB;AACpB,CAAA,WAAK4O,cAAL;AACD,CAAA;;AAED,CAAA,SAAKiC,eAAL;AACA,CAAA,SAAKpG,cAAL;;AAEA,CAAA,SAAKzK,WAAL,GAAmB,IAAnB;AACA,CAAA,SAAKjB,aAAL,CAAmB,QAAnB,EAA6B,IAA7B;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GArG+B;;;AAuGhC,CAAA;AACA,CAAA;AACA8R,CAAAA,iBAzGgC,6BAyGd;AAChB,CAAA,QAAMrM,WAAW,KAAKsM,WAAL,EAAjB;;AAEA,CAAA;AACA,CAAA,QAAItM,aAAa,KAAjB,EAAwB;AACtB,CAAA;AACD,CAAA;;AAED,CAAA;AACA,CAAA,QAAM2L,OAAO,KAAKY,oBAAL,CAA0B,KAAKT,aAAL,EAA1B,CAAb;;AAEA,CAAA;AACA,CAAA,QAAM1L,OAAOsL,SAASvD,MAAT,CAAgBnI,QAAhB,EAA0B2L,IAA1B,EAAgC,IAAhC,CAAb;AACA,CAAA,SAAKa,eAAL,CAAqBpM,IAArB;AACD,CAAA,GAvH+B;;;AAyHhC,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAkM,CAAAA,aA7HgC,yBA6HlB;AACZ,CAAA,WAAO,KAAKtM,QAAZ;AACD,CAAA,GA/H+B;;;AAiIhC,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAuM,CAAAA,sBAtIgC,kCAsIE;AAAA,CAAA,QAAb3P,MAAa,uEAAJ,EAAI;;AAChC,CAAA,QAAM6P,kBAAkBhV,EAAEiD,MAAF,CAAS,IAAT,EAAe,iBAAf,CAAxB;AACA,CAAA,WAAOjD,EAAEN,MAAF,CAASyF,MAAT,EAAiB6P,eAAjB,CAAP;AACD,CAAA,GAzI+B;;;AA2IhC,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAD,CAAAA,iBAvJgC,2BAuJhBpM,IAvJgB,EAuJV;AACpB,CAAA,SAAKwE,GAAL,CAASxE,IAAT,CAAcA,IAAd;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GA3J+B;;;AA6JhC,CAAA;AACA4F,CAAAA,iBA9JgC,6BA8Jd;AAChB,CAAA,SAAKgF,aAAL;AACD,CAAA,GAhK+B;AAkKhChQ,CAAAA,uBAlKgC,mCAkKR;AACtB,CAAA,WAAOvD,EAAEqJ,KAAF,CAAQ,KAAKmK,UAAL,EAAR,EACJlK,GADI,CACA,aADA,EAEJ2L,OAFI,GAGJpL,KAHI,EAAP;AAID,CAAA;AAvK+B,CAAA,CAArB,CAAb;;AA0KA7J,CAAAA,EAAEN,MAAF,CAASuO,KAAK5G,SAAd,EAAyBgG,SAAzB,EAAoC6H,YAApC,EAEA;;CClMA,IAAM5P,UAAU,CAAC,SAAD,EAAY,MAAZ,EAAoB,KAApB,EAA2B,MAA3B,EAAmC,QAAnC,EAA6C,QAA7C,EACA,QADA,EACU,QADV,EACoB,OADpB,EAC6B,KAD7B,EACoC,MADpC,EAC4C,KAD5C,EACmD,SADnD,EAEA,UAFA,EAEY,QAFZ,EAEsB,SAFtB,EAEiC,OAFjC,EAE0C,SAF1C,EAEqD,MAFrD,EAGA,MAHA,EAGQ,SAHR,EAGmB,SAHnB,EAG8B,OAH9B,EAGuC,QAHvC,CAAhB;;AAKA,CAAA,IAAM6P,oBAAoB,SAApBA,iBAAoB,CAASC,MAAT,EAAiBC,YAAjB,EAA+B;AACvDrV,CAAAA,IAAEyB,IAAF,CAAO6D,OAAP,EAAgB,UAAShG,MAAT,EAAiB;AAC/B8V,CAAAA,WAAO9V,MAAP,IAAiB,YAAW;AAC1B,CAAA,UAAMgW,OAAOtV,EAAEuV,MAAF,CAASvV,EAAEiD,MAAF,CAAS,IAAT,EAAeoS,YAAf,CAAT,CAAb;AACA,CAAA,UAAM7V,OAAO,CAAC8V,IAAD,EAAO3L,MAAP,CAAc3J,EAAEwV,OAAF,CAAUzU,SAAV,CAAd,CAAb;AACA,CAAA,aAAOf,EAAEV,MAAF,EAAUG,KAAV,CAAgBO,CAAhB,EAAmBR,IAAnB,CAAP;AACD,CAAA,KAJD;AAKD,CAAA,GAND;AAOD,CAAA,CARD,CAUA;;CCnBA;AACA,CAAA;AACA,CAAA,IAAMiW,YAAY,SAAZA,SAAY,CAASC,KAAT,EAAgB;AAChC,CAAA,OAAKC,MAAL,GAAc,EAAd;AACA,CAAA,OAAKC,aAAL,GAAqB,EAArB;AACA,CAAA,OAAKC,cAAL,GAAsB,EAAtB;AACA,CAAA,OAAKC,aAAL;;AAEA9V,CAAAA,IAAEyB,IAAF,CAAOiU,KAAP,EAAc1V,EAAEyT,IAAF,CAAO,KAAKsC,GAAZ,EAAiB,IAAjB,CAAd;AACD,CAAA,CAPD;;AASAZ,CAAAA,kBAAkBM,UAAUpO,SAA5B,EAAuC,QAAvC;;AAEA,CAAA;AACA,CAAA;;AAEArH,CAAAA,EAAEN,MAAF,CAAS+V,UAAUpO,SAAnB,EAA8B;;AAE5B,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA0O,CAAAA,KAN4B,eAMxB1S,IANwB,EAMlB2S,WANkB,EAML;AACrB,CAAA,WAAO,KAAKC,IAAL,CAAU5S,IAAV,EAAgB2S,WAAhB,EAA6BF,aAA7B,EAAP;AACD,CAAA,GAR2B;;;AAU5B,CAAA;AACA,CAAA;AACA,CAAA;AACAG,CAAAA,MAb4B,gBAavB5S,IAbuB,EAajB2S,WAbiB,EAaJ;AACtB,CAAA,QAAME,UAAU7S,KAAK4D,GAArB;;AAEA,CAAA;AACA,CAAA,SAAK0O,MAAL,CAAYO,OAAZ,IAAuB7S,IAAvB;;AAEA,CAAA;AACA,CAAA,QAAIA,KAAKwH,KAAT,EAAgB;AACd,CAAA,WAAK+K,aAAL,CAAmBvS,KAAKwH,KAAL,CAAW5D,GAA9B,IAAqCiP,OAArC;AACD,CAAA;;AAED,CAAA;AACA,CAAA,QAAIF,WAAJ,EAAiB;AACf,CAAA,WAAKH,cAAL,CAAoBG,WAApB,IAAmCE,OAAnC;AACD,CAAA;;AAED,CAAA,WAAO,IAAP;AACD,CAAA,GA9B2B;;;AAgC5B,CAAA;AACA,CAAA;AACAC,CAAAA,aAlC4B,uBAkChBtL,KAlCgB,EAkCT;AACjB,CAAA,WAAO,KAAKuL,cAAL,CAAoBvL,MAAM5D,GAA1B,CAAP;AACD,CAAA,GApC2B;;;AAsC5B,CAAA;AACA,CAAA;AACA,CAAA;AACAmP,CAAAA,gBAzC4B,0BAyCbC,QAzCa,EAyCH;AACvB,CAAA,QAAMH,UAAU,KAAKN,aAAL,CAAmBS,QAAnB,CAAhB;AACA,CAAA,WAAO,KAAKC,SAAL,CAAeJ,OAAf,CAAP;AACD,CAAA,GA5C2B;;;AA8C5B,CAAA;AACAK,CAAAA,cA/C4B,wBA+CfC,KA/Ce,EA+CR;AAClB,CAAA,QAAMN,UAAU,KAAKL,cAAL,CAAoBW,KAApB,CAAhB;AACA,CAAA,WAAO,KAAKF,SAAL,CAAeJ,OAAf,CAAP;AACD,CAAA,GAlD2B;;;AAoD5B,CAAA;AACA,CAAA;AACAO,CAAAA,aAtD4B,uBAsDhBD,KAtDgB,EAsDT;AACjB,CAAA,WAAOxW,EAAEuV,MAAF,CAAS,KAAKI,MAAd,EAAsBa,KAAtB,CAAP;AACD,CAAA,GAxD2B;;;AA0D5B,CAAA;AACAF,CAAAA,WA3D4B,qBA2DlBrP,GA3DkB,EA2Db;AACb,CAAA,WAAO,KAAK0O,MAAL,CAAY1O,GAAZ,CAAP;AACD,CAAA,GA7D2B;;;AA+D5B,CAAA;AACA2I,CAAAA,QAhE4B,kBAgErBvM,IAhEqB,EAgEf;AACX,CAAA,WAAO,KAAKqT,OAAL,CAAarT,IAAb,EAAmByS,aAAnB,EAAP;AACD,CAAA,GAlE2B;;;AAoE5B,CAAA;AACA,CAAA;AACA,CAAA;AACAY,CAAAA,SAvE4B,mBAuEpBrT,IAvEoB,EAuEd;AACZ,CAAA,QAAM6S,UAAU7S,KAAK4D,GAArB;;AAEA,CAAA;AACA,CAAA,QAAI5D,KAAKwH,KAAT,EAAgB;AACd,CAAA,aAAO,KAAK+K,aAAL,CAAmBvS,KAAKwH,KAAL,CAAW5D,GAA9B,CAAP;AACD,CAAA;;AAED,CAAA;AACAjH,CAAAA,MAAE2W,IAAF,CAAO,KAAKd,cAAZ,EAA4B7V,EAAEyT,IAAF,CAAO,UAASxM,GAAT,EAAcvF,GAAd,EAAmB;AACpD,CAAA,UAAIuF,QAAQiP,OAAZ,EAAqB;AACnB,CAAA,eAAO,KAAKL,cAAL,CAAoBnU,GAApB,CAAP;AACA,CAAA,eAAO,IAAP;AACD,CAAA;AACF,CAAA,KAL2B,EAKzB,IALyB,CAA5B;;AAOA,CAAA;AACA,CAAA,WAAO,KAAKiU,MAAL,CAAYO,OAAZ,CAAP;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GA3F2B;;;AA6F5B,CAAA;AACAJ,CAAAA,eA9F4B,2BA8FZ;AACd,CAAA,SAAKzN,MAAL,GAAcrI,EAAE4W,IAAF,CAAO,KAAKjB,MAAZ,CAAd;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA;AAlG2B,CAAA,CAA9B,EAqGA;;CC3GA,IAAM5O,iBAAe,CACnB,WADmB,EAEnB,WAFmB,EAGnB,sBAHmB,EAInB,iBAJmB,EAKnB,kBALmB,EAMnB,mBANmB,EAOnB,kBAPmB,EAQnB,QARmB,EASnB,QATmB,EAUnB,WAVmB,EAWnB,kBAXmB,EAYnB,aAZmB,EAanB,eAbmB,EAcnB,MAdmB,EAenB,UAfmB,EAgBnB,IAhBmB,EAiBnB,gBAjBmB,CAArB;;AAoBA,CAAA;AACA,CAAA;AACA,CAAA,IAAM8P,iBAAiBlX,SAASsO,IAAT,CAAcvO,MAAd,CAAqB;;AAE1C,CAAA;AACAoX,CAAAA,QAAM,IAHoC;;AAK1C,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAjS,CAAAA,aAZ0C,uBAY9BtD,OAZ8B,EAYrB;AACnB,CAAA,SAAKmP,MAAL,GAAc1Q,EAAEyT,IAAF,CAAO,KAAK/C,MAAZ,EAAoB,IAApB,CAAd;;AAEA,CAAA,SAAKrK,WAAL,CAAiB9E,OAAjB;;AAEA,CAAA,SAAKD,YAAL,CAAkBC,OAAlB,EAA2BwF,cAA3B;;AAEA1C,CAAAA,sBAAkB,IAAlB;;AAEA,CAAA,SAAKyF,cAAL;AACA,CAAA,SAAKiN,IAAL,CAAU,QAAV,EAAoB,KAAKC,cAAzB;AACA,CAAA,SAAKC,qBAAL;AACA,CAAA,SAAKC,iBAAL,GAAyB,EAAzB;;AAEA,CAAA,QAAM1X,OAAO4U,MAAM/M,SAAN,CAAgBkF,KAAhB,CAAsBvJ,IAAtB,CAA2BjC,SAA3B,CAAb;AACAvB,CAAAA,SAAK,CAAL,IAAU,KAAK+B,OAAf;AACA5B,CAAAA,aAASsO,IAAT,CAAc5G,SAAd,CAAwBxC,WAAxB,CAAoCpF,KAApC,CAA0C,IAA1C,EAAgDD,IAAhD;;AAEA,CAAA,SAAK0O,oBAAL;AACD,CAAA,GA/ByC;;;AAiC1C,CAAA;AACA,CAAA;AACAiJ,CAAAA,iBAnC0C,6BAmCxB;AAChB,CAAA,SAAKC,YAAL,GAAoB,IAApB;AACD,CAAA,GArCyC;AAuC1CC,CAAAA,eAvC0C,2BAuC1B;AACd,CAAA,QAAM5T,sBAAsB,CAAC,CAAC,KAAKC,WAAnC;AACA,CAAA,QAAM4T,oBAAoB7T,sBAAsB,KAAKF,qBAAL,EAAtB,GAAqD,EAA/E;;AAEA,CAAA,SAAK6T,YAAL,GAAoB,KAApB;;AAEApX,CAAAA,MAAEyB,IAAF,CAAO6V,iBAAP,EAA0B,iBAAS;AACjCnU,CAAAA,sBAAgBK,KAAhB,EAAuB,eAAvB,EAAwCA,KAAxC;AACD,CAAA,KAFD;;AAIA,CAAA,SAAK+T,YAAL,CAAkB,IAAlB,EAAwB,KAAKC,aAAL,EAAxB;;AAEAxX,CAAAA,MAAEyB,IAAF,CAAO6V,iBAAP,EAA0B,iBAAS;AACjC9T,CAAAA,YAAME,WAAN,GAAoB,IAApB;AACAP,CAAAA,sBAAgBK,KAAhB,EAAuB,QAAvB,EAAiCA,KAAjC;AACD,CAAA,KAHD;;AAKA,CAAA,SAAK0T,iBAAL,GAAyB,EAAzB;AACD,CAAA,GAzDyC;AA2D1C3T,CAAAA,uBA3D0C,mCA2DlB;AACtB,CAAA,WAAOvD,EAAEuV,MAAF,CAAS,KAAKkC,QAAL,CAAc9B,MAAvB,CAAP;AACD,CAAA,GA7DyC;;;AA+D1C,CAAA;AACAqB,CAAAA,gBAhE0C,4BAgEzB;AACf,CAAA,QAAI,KAAKlM,UAAT,EAAqB;AACnB,CAAA,WAAK4M,QAAL,CAAc,KAAK5M,UAAnB,EAA+B,KAA/B,EAAsC,KAAK6M,gBAA3C;AACA,CAAA,WAAKD,QAAL,CAAc,KAAK5M,UAAnB,EAA+B,QAA/B,EAAyC,KAAK8M,mBAA9C;AACA,CAAA,WAAKF,QAAL,CAAc,KAAK5M,UAAnB,EAA+B,OAA/B,EAAwC,KAAK4F,MAA7C;;AAEA,CAAA,UAAI,KAAKoG,IAAT,EAAe;AACb,CAAA,aAAKY,QAAL,CAAc,KAAK5M,UAAnB,EAA+B,MAA/B,EAAuC,KAAK+M,UAA5C;AACD,CAAA;AACF,CAAA;AACF,CAAA,GA1EyC;;;AA4E1C,CAAA;AACAF,CAAAA,kBA7E0C,4BA6EzBnU,KA7EyB,EA6ElBsH,UA7EkB,EA6ENoH,IA7EM,EA6EA;AACxC,CAAA;AACA,CAAA,QAAIsE,QAAQtE,KAAK4F,EAAL,KAAYvX,SAAZ,KAA0B2R,KAAKsE,KAAL,IAAc1L,WAAWiN,OAAX,CAAmBvU,KAAnB,CAAxC,CAAZ;;AAEA,CAAA;AACA,CAAA,QAAI,KAAKwU,MAAL,IAAexB,UAAU,KAA7B,EAAoC;AAClCA,CAAAA,cAAQxW,EAAE+X,OAAF,CAAU,KAAKE,qBAAL,CAA2BzB,KAA3B,CAAV,EAA6ChT,KAA7C,CAAR;AACD,CAAA;;AAED,CAAA,QAAI,KAAK0U,eAAL,CAAqB1U,KAArB,EAA4BgT,KAA5B,CAAJ,EAAwC;AACtC,CAAA,WAAK2B,iBAAL;AACA,CAAA,WAAKC,SAAL,CAAe5U,KAAf,EAAsBgT,KAAtB;AACD,CAAA;AACF,CAAA,GA1FyC;;;AA4F1C,CAAA;AACAoB,CAAAA,qBA7F0C,+BA6FtB9M,UA7FsB,EA6FVvJ,OA7FU,EA6FD;AACvC,CAAA,QAAM8W,UAAU9W,QAAQ8W,OAAxB;AACA,CAAA,SAAKC,kBAAL,CAAwBD,QAAQE,OAAhC;AACD,CAAA,GAhGyC;;;AAkG1C,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAD,CAAAA,oBAvG0C,8BAuGvBE,MAvGuB,EAuGI;AAAA,CAAA,mFAAJ,EAAI;;AAAA,CAAA,QAAlBC,UAAkB,QAAlBA,UAAkB;;AAC5C,CAAA,QAAMC,mBAAmBD,eAAe,KAAxC;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,QAAME,eAAe,KAAKC,gBAAL,CAAsBJ,MAAtB,CAArB;;AAEA,CAAA,QAAI,CAACG,aAAatQ,MAAlB,EAA0B;AACxB,CAAA;AACD,CAAA;;AAED,CAAA,SAAKoP,QAAL,CAAc3B,aAAd;;AAEA,CAAA;AACA,CAAA,SAAK+C,cAAL,CAAoBF,YAApB,EAAkC,KAAlC;;AAEA,CAAA,QAAID,gBAAJ,EAAsB;AACpB,CAAA,WAAKI,WAAL;AACD,CAAA;AACF,CAAA,GA1HyC;;;AA4H1C,CAAA;AACA,CAAA;AACAF,CAAAA,kBA9H0C,4BA8HzBJ,MA9HyB,EA8HjB;AAAA,CAAA;;AAEvB,CAAA;AACA,CAAA,WAAOxY,EAAEgC,MAAF,CAASwW,MAAT,EAAiB,UAACO,aAAD,EAAgBlO,KAAhB,EAA0B;AAChD,CAAA,UAAMxH,OAAO,MAAKoU,QAAL,CAActB,WAAd,CAA0BtL,KAA1B,CAAb;;AAEA,CAAA,UAAI,CAACxH,IAAD,IAASA,KAAKoE,YAAlB,EAAgC;AAC9B,CAAA,eAAOsR,aAAP;AACD,CAAA;;AAED,CAAA,YAAKC,gBAAL,CAAsB3V,IAAtB;;AAEA0V,CAAAA,oBAAcE,IAAd,CAAmB5V,IAAnB;;AAEA,CAAA,aAAO0V,aAAP;AACD,CAAA,KAZM,EAYJ,EAZI,CAAP;AAaD,CAAA,GA9IyC;AAgJ1CG,CAAAA,0BAhJ0C,oCAgJjBxD,KAhJiB,EAgJV;;AAE9B,CAAA,WAAO1V,EAAEgC,MAAF,CAAS0T,KAAT,EAAgB,UAACyD,mBAAD,EAAsB9V,IAAtB,EAA+B;AACpD,CAAA;AACA,CAAA,UAAI,CAAC8V,mBAAD,IAAwBA,oBAAoBC,MAApB,GAA6B/V,KAAK+V,MAA9D,EAAsE;AACpE,CAAA,eAAO/V,IAAP;AACD,CAAA;;AAED,CAAA,aAAO8V,mBAAP;AACD,CAAA,KAPM,EAOJ5Y,SAPI,CAAP;AAQD,CAAA,GA1JyC;AA4J1CyY,CAAAA,kBA5J0C,4BA4JzB3V,IA5JyB,EA4JnB;AACrB,CAAA,SAAKP,aAAL,CAAmB,qBAAnB,EAA0C,IAA1C,EAAgDO,IAAhD;;AAEA,CAAA,SAAKoU,QAAL,CAAcf,OAAd,CAAsBrT,IAAtB;AACA,CAAA,QAAIA,KAAKsE,OAAT,EAAkB;AAChBtE,CAAAA,WAAKsE,OAAL;AACD,CAAA,KAFD,MAEO;AACLgI,CAAAA,0BAAoBtM,IAApB;AACD,CAAA;;AAED,CAAA,WAAOA,KAAK8L,OAAZ;AACA,CAAA,SAAKvH,aAAL,CAAmBvE,IAAnB;AACA,CAAA,SAAKP,aAAL,CAAmB,cAAnB,EAAmC,IAAnC,EAAyCO,IAAzC;AACD,CAAA,GAzKyC;;;AA2K1C,CAAA;AACA,CAAA;AACA,CAAA;AACAqR,CAAAA,YA9K0C,wBA8K7B;AACX,CAAA,QAAMC,QAAQ,CAAC,CAAC,KAAK1T,EAArB;;AAEAtB,CAAAA,aAASsO,IAAT,CAAc5G,SAAd,CAAwBqN,UAAxB,CAAmCjV,KAAnC,CAAyC,IAAzC,EAA+CsB,SAA/C;;AAEA,CAAA,QAAI4T,KAAJ,EAAW;AACT,CAAA,WAAKjR,WAAL,GAAmB1C,eAAe,KAAKC,EAApB,CAAnB;AACD,CAAA;;AAED,CAAA,WAAO,IAAP;AACD,CAAA,GAxLyC;;;AA0L1C,CAAA;AACA,CAAA;AACAyP,CAAAA,QA5L0C,oBA4LjC;AACP,CAAA,SAAKtC,mBAAL;AACA,CAAA,SAAKtL,aAAL,CAAmB,eAAnB,EAAoC,IAApC;AACA,CAAA,SAAKuW,eAAL;AACA,CAAA,SAAKtV,WAAL,GAAmB,IAAnB;AACA,CAAA,SAAKjB,aAAL,CAAmB,QAAnB,EAA6B,IAA7B;AACA,CAAA,WAAO,IAAP;AACD,CAAA,GAnMyC;;;AAqM1C,CAAA;AACA,CAAA;AACAwW,CAAAA,WAvM0C,qBAuMhCtB,MAvMgC,EAuMF;AAAA,CAAA,oFAAJ,EAAI;;AAAA,CAAA,QAArBuB,aAAqB,SAArBA,aAAqB;;AACtC,CAAA,QAAMC,gBAAgB,KAAKzV,WAAL,IAAoB,CAAC,KAAK0D,YAAhD;AACA,CAAA,QAAMgS,gBAAgB,KAAKzB,MAAL,KAAgBA,MAAtC;AACA,CAAA,QAAM0B,eAAeF,iBAAiBC,aAAjB,IAAkC,CAACF,aAAxD;;AAEA,CAAA,QAAIG,YAAJ,EAAkB;AAChB,CAAA,UAAMC,iBAAiB,KAAK1B,qBAAL,EAAvB;AACA,CAAA,WAAKD,MAAL,GAAcA,MAAd;AACA,CAAA,UAAMQ,SAAS,KAAKP,qBAAL,EAAf;AACA,CAAA,WAAK2B,iBAAL,CAAuBpB,MAAvB,EAA+BmB,cAA/B;AACD,CAAA,KALD,MAKO;AACL,CAAA,WAAK3B,MAAL,GAAcA,MAAd;AACD,CAAA;;AAED,CAAA,WAAO,IAAP;AACD,CAAA,GAtNyC;;;AAwN1C,CAAA;AACA6B,CAAAA,cAzN0C,wBAyN7BtY,OAzN6B,EAyNpB;AACpB,CAAA,WAAO,KAAK+X,SAAL,CAAe,IAAf,EAAqB/X,OAArB,CAAP;AACD,CAAA,GA3NyC;;;AA6N1C,CAAA;AACAqY,CAAAA,mBA9N0C,6BA8NxBpB,MA9NwB,EA8NhBmB,cA9NgB,EA8NA;AAAA,CAAA;;AACxC,CAAA,QAAMG,aAAa,EAAnB;AACA9Z,CAAAA,MAAEyB,IAAF,CAAO+W,MAAP,EAAe,UAAC3N,KAAD,EAAQ2L,KAAR,EAAkB;AAC/B,CAAA,UAAMuD,sBAAsB,CAAC,OAAKtC,QAAL,CAActB,WAAd,CAA0BtL,KAA1B,CAA7B;AACA,CAAA,UAAIkP,mBAAJ,EAAyB;AACvB,CAAA,eAAKpC,gBAAL,CAAsB9M,KAAtB,EAA6B,OAAKC,UAAlC,EAA8C,EAACgN,IAAItB,KAAL,EAA9C;AACD,CAAA;AACDsD,CAAAA,iBAAWjP,MAAM5D,GAAjB,IAAwB,IAAxB;AACD,CAAA,KAND;;AAQA,CAAA,QAAM+S,eAAeha,EAAEgY,MAAF,CAAS2B,cAAT,EAAyB,UAACM,SAAD,EAAe;AAC3D,CAAA,aAAO,CAACH,WAAWG,UAAUhT,GAArB,CAAD,IAA8B,OAAKwQ,QAAL,CAActB,WAAd,CAA0B8D,SAA1B,CAArC;AACD,CAAA,KAFoB,CAArB;;AAIA,CAAA,SAAK3B,kBAAL,CAAwB0B,YAAxB;AACD,CAAA,GA7OyC;;;AA+O1C,CAAA;AACA,CAAA;AACA,CAAA;AACAE,CAAAA,SAlP0C,qBAkPhC;AAAA,CAAA;;AACR,CAAA,QAAMzC,WAAW,KAAKA,QAAtB;AACA,CAAA,QAAMe,SAAS,KAAKP,qBAAL,EAAf;;AAEA,CAAA,QAAI,CAACO,OAAOnQ,MAAR,IAAkB,KAAK8R,iBAA3B,EAA8C;AAAE,CAAA,aAAO,IAAP;AAAc,CAAA;;AAE9D,CAAA,QAAMC,iBAAiBpa,EAAE2W,IAAF,CAAO6B,MAAP,EAAe,UAAS3N,KAAT,EAAgB;AACpD,CAAA,aAAO,CAAC4M,SAAStB,WAAT,CAAqBtL,KAArB,CAAR;AACD,CAAA,KAFsB,CAAvB;;AAIA,CAAA;AACA,CAAA;AACA,CAAA,QAAIuP,cAAJ,EAAoB;AAClB,CAAA,WAAK1J,MAAL;AACD,CAAA,KAFD,MAEO;AAAA,CAAA;;AAEL,CAAA,YAAM2J,oBAAoB,EAA1B;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,YAAMC,eAAe7C,SAASzV,MAAT,CAAgB,UAASuY,OAAT,EAAkBlX,IAAlB,EAAwB;AAC3D,CAAA,cAAMmT,QAAQxW,EAAE+X,OAAF,CAAUS,MAAV,EAAkBnV,KAAKwH,KAAvB,CAAd;;AAEA,CAAA,cAAI2L,UAAU,CAAC,CAAf,EAAkB;AAChB6D,CAAAA,8BAAkBpB,IAAlB,CAAuB5V,KAAKwH,KAA5B;AACA,CAAA,mBAAO0P,OAAP;AACD,CAAA;;AAEDlX,CAAAA,eAAK+V,MAAL,GAAc5C,KAAd;;AAEA+D,CAAAA,kBAAQ/D,KAAR,IAAiBnT,KAAKpC,EAAtB;;AAEA,CAAA,iBAAOsZ,OAAP;AACD,CAAA,SAboB,EAalB,IAAInG,KAAJ,CAAUoE,OAAOnQ,MAAjB,CAbkB,CAArB;;AAeA,CAAA,eAAKvF,aAAL,CAAmB,gBAAnB;;AAEA,CAAA;AACA,CAAA;AACA,CAAA,eAAK0X,wBAAL,CAA8BF,YAA9B;;AAEA,CAAA;AACA,CAAA,eAAKhC,kBAAL,CAAwB+B,iBAAxB;;AAEA,CAAA,eAAKvX,aAAL,CAAmB,SAAnB;AA9BK,CAAA;AA+BN,CAAA;AACD,CAAA,WAAO,IAAP;AACD,CAAA,GAjSyC;;;AAmS1C,CAAA;AACA,CAAA;AACA2X,CAAAA,YArS0C,wBAqS7B;AACX,CAAA,QAAI,KAAKC,aAAT,EAAwB;AACtB,CAAA,WAAKR,OAAL;AACD,CAAA,KAFD,MAEO;AACL,CAAA,WAAKb,eAAL;AACD,CAAA;AACD,CAAA,WAAO,IAAP;AACD,CAAA,GA5SyC;;;AA8S1C,CAAA;AACA,CAAA;AACAxB,CAAAA,YAhT0C,wBAgT7B;AAAA,CAAA;;AACX,CAAA,QAAMW,SAAS,KAAKP,qBAAL,EAAf;;AAEA,CAAA;AACA,CAAA,QAAM0C,eAAe3a,EAAE4a,IAAF,CAAOpC,MAAP,EAAe,UAACqC,IAAD,EAAOrE,KAAP,EAAiB;AACnD,CAAA,UAAMnT,OAAO,OAAKoU,QAAL,CAActB,WAAd,CAA0B0E,IAA1B,CAAb;AACA,CAAA,aAAO,CAACxX,IAAD,IAASA,KAAK+V,MAAL,KAAgB5C,KAAhC;AACD,CAAA,KAHoB,CAArB;;AAKA,CAAA,QAAImE,YAAJ,EAAkB;AAChB,CAAA,WAAKF,UAAL;AACD,CAAA;AACF,CAAA,GA5TyC;;;AA8T1C,CAAA;AACAK,CAAAA,mBAAiB,CAAC,CA/TwB;;AAiU1C,CAAA;AACA,CAAA;AACAN,CAAAA,0BAnU0C,oCAmUjB/C,QAnUiB,EAmUP;AACjC,CAAA,SAAKtK,GAAL,CAAS4N,MAAT,CAAgBtD,QAAhB;AACD,CAAA,GArUyC;;;AAuU1C,CAAA;AACA,CAAA;AACA4B,CAAAA,iBAzU0C,6BAyUxB;AAChB,CAAA,QAAI,KAAKtV,WAAT,EAAsB;AACpB,CAAA,WAAKoU,iBAAL;AACA,CAAA,WAAK6C,gBAAL,CAAsB,EAACvC,YAAY,KAAb,EAAtB;AACD,CAAA;;AAED,CAAA,QAAMD,SAAS,KAAKP,qBAAL,EAAf;AACA,CAAA,QAAI,KAAKpF,OAAL,CAAa,EAACoI,iBAAiBzC,MAAlB,EAAb,CAAJ,EAA6C;AAC3C,CAAA,WAAK0C,cAAL;AACD,CAAA,KAFD,MAEO;AACL,CAAA,WAAKpY,aAAL,CAAmB,wBAAnB,EAA6C,IAA7C;AACA,CAAA,WAAKqU,eAAL;AACA,CAAA,WAAKgE,eAAL,CAAqB3C,MAArB;AACA,CAAA,WAAKnB,aAAL;AACA,CAAA,WAAKvU,aAAL,CAAmB,iBAAnB,EAAsC,IAAtC;AACD,CAAA;AACF,CAAA,GAzVyC;AA2V1CsY,CAAAA,aA3V0C,uBA2V9BvQ,KA3V8B,EA2VvB2L,KA3VuB,EA2VhB;AACxB,CAAA,QAAM6E,YAAY,KAAKC,aAAL,CAAmBzQ,KAAnB,CAAlB;AACA,CAAA,QAAM0Q,mBAAmB,KAAKC,oBAAL,CAA0B3Q,KAA1B,EAAiC2L,KAAjC,CAAzB;AACA,CAAA,QAAMnT,OAAO,KAAKoY,cAAL,CAAoB5Q,KAApB,EAA2BwQ,SAA3B,EAAsCE,gBAAtC,CAAb;AACA,CAAA,WAAOlY,IAAP;AACD,CAAA,GAhWyC;AAkW1CqY,CAAAA,iBAlW0C,2BAkW1BrY,IAlW0B,EAkWpBmT,KAlWoB,EAkWb;AAC3BnT,CAAAA,SAAK8L,OAAL,GAAe,IAAf;;AAEA9K,CAAAA,sBAAkBhB,IAAlB;;AAEA,CAAA;AACA,CAAA,SAAKsY,iBAAL,CAAuBtY,IAAvB;;AAEA,CAAA,QAAI,KAAKyT,IAAT,EAAe;AACbzT,CAAAA,WAAK+V,MAAL,GAAc5C,KAAd;AACD,CAAA;AACF,CAAA,GA7WyC;;;AA+W1C,CAAA;AACA2E,CAAAA,iBAhX0C,2BAgX1B3C,MAhX0B,EAgXlB;AACtBxY,CAAAA,MAAEyB,IAAF,CAAO+W,MAAP,EAAexY,EAAEyT,IAAF,CAAO,KAAK2E,SAAZ,EAAuB,IAAvB,CAAf;AACA,CAAA,SAAKX,QAAL,CAAc3B,aAAd;AACD,CAAA,GAnXyC;;;AAqX1C,CAAA;AACAmC,CAAAA,uBAtX0C,iCAsXpB2D,OAtXoB,EAsXX;AAC7B,CAAA,QAAI,CAAC,KAAK9Q,UAAN,IAAoB,CAAC,KAAKA,UAAL,CAAgBzC,MAAzC,EAAiD;AAAE,CAAA,aAAO,EAAP;AAAY,CAAA;;AAE/D,CAAA,QAAMwT,iBAAiB,KAAKC,iBAAL,EAAvB;AACA,CAAA,QAAItD,SAAS,KAAK1N,UAAL,CAAgB0N,MAA7B;AACAoD,CAAAA,cAAUG,KAAKC,GAAL,CAASD,KAAKE,GAAL,CAASL,OAAT,EAAkB,CAAlB,CAAT,EAA+BpD,OAAOnQ,MAAP,GAAgB,CAA/C,CAAV;;AAEA,CAAA,QAAIwT,cAAJ,EAAoB;AAClB,CAAA,UAAIK,mBAAJ;AACA,CAAA;AACA,CAAA,UAAIN,OAAJ,EAAa;AACXM,CAAAA,qBAAa1D,OAAOoD,OAAP,CAAb;AACApD,CAAAA,iBAASA,OAAOjM,KAAP,CAAa,CAAb,EAAgBqP,OAAhB,EAAyBjS,MAAzB,CAAgC6O,OAAOjM,KAAP,CAAaqP,UAAU,CAAvB,CAAhC,CAAT;AACD,CAAA;AACDpD,CAAAA,eAAS,KAAK2D,aAAL,CAAmB3D,MAAnB,EAA2BqD,cAA3B,CAAT;AACA,CAAA,UAAIK,UAAJ,EAAgB;AACd1D,CAAAA,eAAO4D,MAAP,CAAcR,OAAd,EAAuB,CAAvB,EAA0BM,UAA1B;AACD,CAAA;AACF,CAAA;;AAED,CAAA;AACA1D,CAAAA,aAAS,KAAK6D,aAAL,CAAmB7D,MAAnB,CAAT;;AAEA,CAAA,WAAOA,MAAP;AACD,CAAA,GA9YyC;AAgZ1CsD,CAAAA,mBAhZ0C,+BAgZtB;AAClB,CAAA,WAAO,KAAKD,cAAZ;AACD,CAAA,GAlZyC;;;AAoZ1C,CAAA;AACAQ,CAAAA,eArZ0C,yBAqZ5B7D,MArZ4B,EAqZpB;AAAA,CAAA;;AACpB,CAAA,QAAI,KAAKR,MAAT,EAAiB;AACfQ,CAAAA,eAASxY,EAAEgY,MAAF,CAASQ,MAAT,EAAiB,UAAC3N,KAAD,EAAQ2L,KAAR,EAAkB;AAC1C,CAAA,eAAO,OAAK0B,eAAL,CAAqBrN,KAArB,EAA4B2L,KAA5B,CAAP;AACD,CAAA,OAFQ,CAAT;AAGD,CAAA;AACD,CAAA,WAAOgC,MAAP;AACD,CAAA,GA5ZyC;AA8Z1C2D,CAAAA,eA9Z0C,yBA8Z5B3D,MA9Z4B,EA8ZpB8D,UA9ZoB,EA8ZR;AAChC,CAAA,QAAI,OAAOA,UAAP,KAAsB,QAA1B,EAAoC;AAClC,CAAA,aAAOtc,EAAEuc,MAAF,CAAS/D,MAAT,EAAiB,UAAC3N,KAAD,EAAW;AACjC,CAAA,eAAOA,MAAM7C,GAAN,CAAUsU,UAAV,CAAP;AACD,CAAA,OAFM,CAAP;AAGD,CAAA,KAJD,MAIO,IAAIA,WAAWjU,MAAX,KAAsB,CAA1B,EAA6B;AAClC,CAAA,aAAOrI,EAAEuc,MAAF,CAAS/D,MAAT,EAAiBxY,EAAEyT,IAAF,CAAO6I,UAAP,EAAmB,IAAnB,CAAjB,CAAP;AACD,CAAA,KAFM,MAEA;AACL,CAAA,aAAO9D,OAAO1B,IAAP,CAAY9W,EAAEyT,IAAF,CAAO6I,UAAP,EAAmB,IAAnB,CAAZ,CAAP;AACD,CAAA;AACF,CAAA,GAxayC;;;AA0a1C,CAAA;AACA,CAAA;AACApB,CAAAA,gBA5a0C,4BA4azB;AACf,CAAA,QAAMsB,YAAY,KAAKC,aAAL,EAAlB;;AAEA,CAAA,QAAID,aAAa,CAAC,KAAKrC,iBAAvB,EAA0C;AACxC,CAAA,WAAKA,iBAAL,GAAyB,IAAzB;;AAEA,CAAA,UAAMtP,QAAQ,IAAIlL,SAASC,KAAb,EAAd;AACA,CAAA,UAAI8c,mBACF,KAAKA,gBAAL,IAAyB,KAAKnB,gBADhC;AAEA,CAAA,UAAIvb,EAAEmC,UAAF,CAAaua,gBAAb,CAAJ,EAAoC;AAClCA,CAAAA,2BAAmBA,iBAAiB1Z,IAAjB,CAAsB,IAAtB,EAA4B6H,KAA5B,EAAmC,KAAKiQ,eAAxC,CAAnB;AACD,CAAA;;AAED,CAAA,UAAMzX,OAAO,KAAKoY,cAAL,CAAoB5Q,KAApB,EAA2B2R,SAA3B,EAAsCE,gBAAtC,CAAb;;AAEA,CAAA,WAAK5Z,aAAL,CAAmB,qBAAnB,EAA0C,IAA1C,EAAgDO,IAAhD;AACA,CAAA,WAAKsZ,YAAL,CAAkBtZ,IAAlB,EAAwB,CAAxB;AACA,CAAA,WAAKP,aAAL,CAAmB,cAAnB,EAAmC,IAAnC,EAAyCO,IAAzC;AACD,CAAA;AACF,CAAA,GA/byC;;;AAic1C,CAAA;AACA,CAAA;AACA8U,CAAAA,mBAnc0C,+BAmctB;AAClB,CAAA,QAAI,KAAKgC,iBAAT,EAA4B;AAC1B,CAAA,WAAKrX,aAAL,CAAmB,qBAAnB,EAA0C,IAA1C;;AAEA,CAAA,WAAKkY,gBAAL;AACA,CAAA,aAAO,KAAKb,iBAAZ;;AAEA,CAAA,WAAKrX,aAAL,CAAmB,cAAnB,EAAmC,IAAnC;AACD,CAAA;AACF,CAAA,GA5cyC;;;AA8c1C,CAAA;AACA2Z,CAAAA,eA/c0C,2BA+c1B;AACd,CAAA,QAAMG,YAAY,KAAKA,SAAvB;;AAEA,CAAA,QAAI,CAACA,SAAL,EAAgB;AAAE,CAAA;AAAS,CAAA;;AAE3B,CAAA,WAAO,KAAKC,QAAL,CAAcD,SAAd,CAAP;AACD,CAAA,GArdyC;;;AAud1C,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAtB,CAAAA,eA3d0C,yBA2d5B9X,KA3d4B,EA2drB;AACnB,CAAA,QAAIsZ,YAAY,KAAKA,SAArB;;AAEA,CAAA,QAAI,CAACA,SAAL,EAAgB;AACd,CAAA,YAAM,IAAIrY,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,kBADkB;AAExBpC,CAAAA,iBAAS;AAFe,CAAA,OAApB,CAAN;AAID,CAAA;;AAEDgd,CAAAA,gBAAY,KAAKD,QAAL,CAAcC,SAAd,EAAyBtZ,KAAzB,CAAZ;;AAEA,CAAA,QAAI,CAACsZ,SAAL,EAAgB;AACd,CAAA,YAAM,IAAIrY,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,uBADkB;AAExBpC,CAAAA,iBAAS;AAFe,CAAA,OAApB,CAAN;AAID,CAAA;;AAED,CAAA,WAAOgd,SAAP;AACD,CAAA,GA/eyC;;;AAif1C,CAAA;AACA,CAAA;AACAD,CAAAA,UAnf0C,oBAmfjCxZ,IAnfiC,EAmf3BG,KAnf2B,EAmfpB;AACpB,CAAA,QAAIH,KAAKgE,SAAL,YAA0B1H,SAASsO,IAAnC,IAA2C5K,SAAS1D,SAASsO,IAAjE,EAAuE;AACrE,CAAA,aAAO5K,IAAP;AACD,CAAA,KAFD,MAEO,IAAIrD,EAAEmC,UAAF,CAAakB,IAAb,CAAJ,EAAwB;AAC7B,CAAA,aAAOA,KAAKL,IAAL,CAAU,IAAV,EAAgBQ,KAAhB,CAAP;AACD,CAAA;AACF,CAAA,GAzfyC;;;AA2f1C,CAAA;AACA4U,CAAAA,WA5f0C,qBA4fhC5U,KA5fgC,EA4fzBgT,KA5fyB,EA4flB;AACtB,CAAA,QAAMnT,OAAO,KAAK+X,WAAL,CAAiB5X,KAAjB,EAAwBgT,KAAxB,CAAb;AACA,CAAA,SAAKmG,YAAL,CAAkBtZ,IAAlB,EAAwBmT,KAAxB;;AAEA,CAAA,WAAOnT,IAAP;AACD,CAAA,GAjgByC;AAmgB1CmY,CAAAA,sBAngB0C,gCAmgBrBhY,KAngBqB,EAmgBdgT,KAngBc,EAmgBP;AACjC,CAAA,QAAIxW,EAAEmC,UAAF,CAAa,KAAKoZ,gBAAlB,CAAJ,EAAyC;AACvC,CAAA,aAAO,KAAKA,gBAAL,CAAsB/X,KAAtB,EAA6BgT,KAA7B,CAAP;AACD,CAAA;;AAED,CAAA,WAAO,KAAK+E,gBAAZ;AACD,CAAA,GAzgByC;;;AA2gB1C,CAAA;AACA,CAAA;AACA,CAAA;AACAoB,CAAAA,cA9gB0C,wBA8gB7BtZ,IA9gB6B,EA8gBvBmT,KA9gBuB,EA8gBhB;AACxB,CAAA,SAAK1T,aAAL,CAAmB,kBAAnB,EAAuC,IAAvC,EAA6CO,IAA7C;AACA,CAAA,SAAKqY,eAAL,CAAqBrY,IAArB,EAA2BmT,KAA3B;;AAEA,CAAA;AACA,CAAA,QAAI,KAAKY,YAAT,EAAuB;AACrB,CAAA;AACA,CAAA,WAAKK,QAAL,CAAcxB,IAAd,CAAmB5S,IAAnB;AACD,CAAA,KAHD,MAGO;AACL,CAAA;AACA,CAAA,WAAKwV,cAAL,CAAoBxV,IAApB,EAA0B,IAA1B;AACA,CAAA,WAAKoU,QAAL,CAAc1B,GAAd,CAAkB1S,IAAlB;AACD,CAAA;;AAED,CAAA,SAAKmN,WAAL,CAAiBnN,IAAjB;;AAEA,CAAA,SAAKoN,WAAL,CAAiBpN,IAAjB,EAAuBmT,KAAvB;;AAEA,CAAA,SAAK1T,aAAL,CAAmB,WAAnB,EAAgC,IAAhC,EAAsCO,IAAtC;;AAEA,CAAA,WAAOA,IAAP;AACD,CAAA,GAniByC;;;AAqiB1C,CAAA;AACA,CAAA;AACAwV,CAAAA,gBAviB0C,0BAuiB3BnD,KAviB2B,EAuiBpBqH,SAviBoB,EAuiBT;AAC/B,CAAA,QAAI,CAAC,KAAKjG,IAAV,EAAgB;AACd,CAAA;AACD,CAAA;;AAED,CAAA,QAAMzT,OAAOrD,EAAE0M,OAAF,CAAUgJ,KAAV,IAAmB,KAAKwD,wBAAL,CAA8BxD,KAA9B,CAAnB,GAA0DA,KAAvE;;AAEA,CAAA;AACA,CAAA,SAAK+B,QAAL,CAAchW,IAAd,CAAmB,UAACub,SAAD,EAAe;AAChC,CAAA,UAAIA,UAAU5D,MAAV,IAAoB/V,KAAK+V,MAA7B,EAAqC;AACnC4D,CAAAA,kBAAU5D,MAAV,IAAoB2D,YAAY,CAAZ,GAAgB,CAAC,CAArC;AACD,CAAA;AACF,CAAA,KAJD;AAKD,CAAA,GApjByC;AAsjB1CvM,CAAAA,aAtjB0C,uBAsjB9BnN,IAtjB8B,EAsjBxB;AAChB,CAAA,QAAIA,KAAKU,WAAT,EAAsB;AACpB,CAAA;AACD,CAAA;;AAED,CAAA,QAAI,CAACV,KAAKiK,uBAAV,EAAmC;AACjCnK,CAAAA,sBAAgBE,IAAhB,EAAsB,eAAtB,EAAuCA,IAAvC;AACD,CAAA;;AAEDA,CAAAA,SAAKqN,MAAL;;AAEA,CAAA,QAAI,CAACrN,KAAKiK,uBAAV,EAAmC;AACjCjK,CAAAA,WAAKU,WAAL,GAAmB,IAAnB;AACAZ,CAAAA,sBAAgBE,IAAhB,EAAsB,QAAtB,EAAgCA,IAAhC;AACD,CAAA;AACF,CAAA,GArkByC;AAukB1CoN,CAAAA,aAvkB0C,uBAukB9BpN,IAvkB8B,EAukBxBmT,KAvkBwB,EAukBjB;AACvB,CAAA;AACA,CAAA;AACA,CAAA,QAAM/S,sBAAsB,CAACJ,KAAKK,WAAN,IAAqB,CAAC,KAAK0T,YAA3B,IAA2C,KAAK1T,WAA5E;;AAEA,CAAA,QAAID,mBAAJ,EAAyB;AACvBN,CAAAA,sBAAgBE,IAAhB,EAAsB,eAAtB,EAAuCA,IAAvC;AACD,CAAA;;AAED,CAAA,SAAKwN,UAAL,CAAgB,IAAhB,EAAsBxN,IAAtB,EAA4BmT,KAA5B;;AAEA,CAAA,QAAI/S,mBAAJ,EAAyB;AACvBJ,CAAAA,WAAKK,WAAL,GAAmB,IAAnB;AACAP,CAAAA,sBAAgBE,IAAhB,EAAsB,QAAtB,EAAgCA,IAAhC;AACD,CAAA;AACF,CAAA,GAtlByC;;;AAwlB1C,CAAA;AACAoY,CAAAA,gBAzlB0C,0BAylB3BjY,KAzlB2B,EAylBpByZ,cAzlBoB,EAylBJ1B,gBAzlBI,EAylBc;AACtD,CAAA,QAAMha,UAAUvB,EAAEN,MAAF,CAAS,EAACmL,OAAOrH,KAAR,EAAT,EAAyB+X,gBAAzB,CAAhB;AACA,CAAA,WAAO,IAAI0B,cAAJ,CAAmB1b,OAAnB,CAAP;AACD,CAAA,GA5lByC;;;AA8lB1C,CAAA;AACA,CAAA;AACA2b,CAAAA,iBAhmB0C,2BAgmB1B7Z,IAhmB0B,EAgmBpB;AACpB,CAAA,QAAI,CAACA,IAAD,IAASA,KAAKoE,YAAlB,EAAgC;AAC9B,CAAA,aAAOpE,IAAP;AACD,CAAA;;AAED,CAAA,SAAK2V,gBAAL,CAAsB3V,IAAtB;AACA,CAAA,SAAKoU,QAAL,CAAc3B,aAAd;AACA,CAAA;AACA,CAAA,SAAK+C,cAAL,CAAoBxV,IAApB,EAA0B,KAA1B;AACA,CAAA,WAAOA,IAAP;AACD,CAAA,GA1mByC;;;AA4mB1C,CAAA;AACAwP,CAAAA,SA7mB0C,mBA6mBlCtR,OA7mBkC,EA6mBzB;AACf,CAAA,QAAIiX,eAAJ;AACA,CAAA,QAAIxY,EAAEiD,MAAF,CAAS1B,OAAT,EAAkB,iBAAlB,CAAJ,EAA0C;AACxCiX,CAAAA,eAASjX,QAAQ0Z,eAAjB;AACD,CAAA,KAFD,MAEO;AACLzC,CAAAA,eAAS,KAAK1N,UAAL,GAAkB,KAAKA,UAAL,CAAgB0N,MAAlC,GAA2C,EAApD;AACAA,CAAAA,eAAS,KAAK6D,aAAL,CAAmB7D,MAAnB,CAAT;AACD,CAAA;AACD,CAAA,WAAOA,OAAOnQ,MAAP,KAAkB,CAAzB;AACD,CAAA,GAtnByC;;;AAwnB1C,CAAA;AACAyQ,CAAAA,aAznB0C,yBAynB5B;AACZ,CAAA,QAAI,KAAKjG,OAAL,EAAJ,EAAoB;AAClB,CAAA,WAAKqI,cAAL;AACD,CAAA;AACF,CAAA,GA7nByC;;;AA+nB1C,CAAA;AACA3D,CAAAA,cAhoB0C,wBAgoB7B4F,cAhoB6B,EAgoBbC,MAhoBa,EAgoBL;AACnCD,CAAAA,mBAAehQ,GAAf,CAAmB4N,MAAnB,CAA0BqC,MAA1B;AACD,CAAA,GAloByC;;;AAooB1C,CAAA;AACA5F,CAAAA,eAroB0C,2BAqoB1B;AACd,CAAA,QAAM6F,WAAWjc,SAASkc,sBAAT,EAAjB;AACAtd,CAAAA,MAAEyB,IAAF,CAAO,KAAKyV,iBAAZ,EAA+B,UAACqG,CAAD,EAAO;AACpCF,CAAAA,eAASlM,WAAT,CAAqBoM,EAAEtc,EAAvB;AACD,CAAA,KAFD;AAGA,CAAA,WAAOoc,QAAP;AACD,CAAA,GA3oByC;;;AA6oB1C,CAAA;AACA,CAAA;AACAxM,CAAAA,YA/oB0C,sBA+oB/BsM,cA/oB+B,EA+oBfL,SA/oBe,EA+oBJtG,KA/oBI,EA+oBG;AAC3C,CAAA,QAAI2G,eAAe/F,YAAnB,EAAiC;AAC/B,CAAA;AACA,CAAA;AACA,CAAA;AACA+F,CAAAA,qBAAejG,iBAAf,CAAiCkF,MAAjC,CAAwC5F,KAAxC,EAA+C,CAA/C,EAAkDsG,SAAlD;AACD,CAAA,KALD,MAKO;AACL,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,UAAI,CAACK,eAAeK,aAAf,CAA6BV,SAA7B,EAAwCtG,KAAxC,CAAL,EAAqD;AACnD2G,CAAAA,uBAAeM,YAAf,CAA4BX,SAA5B;AACD,CAAA;AACF,CAAA;AACF,CAAA,GA7pByC;;;AA+pB1C,CAAA;AACAU,CAAAA,eAhqB0C,yBAgqB5BV,SAhqB4B,EAgqBjBtG,KAhqBiB,EAgqBV;AAC9B,CAAA,QAAInG,oBAAJ;AACA,CAAA,QAAMqN,eAAe,KAAK5G,IAAL,IAAcN,QAAQ,KAAKiB,QAAL,CAAcpP,MAAd,GAAuB,CAAlE;AACA,CAAA,QAAIqV,YAAJ,EAAkB;AAChB,CAAA;AACArN,CAAAA,oBAAc,KAAKoH,QAAL,CAAcmD,IAAd,CAAmB,UAACvX,IAAD,EAAU;AACzC,CAAA,eAAOA,KAAK+V,MAAL,KAAgB5C,QAAQ,CAA/B;AACD,CAAA,OAFa,CAAd;AAGD,CAAA;;AAED,CAAA,QAAInG,WAAJ,EAAiB;AACfA,CAAAA,kBAAYlD,GAAZ,CAAgBwQ,MAAhB,CAAuBb,UAAU7b,EAAjC;AACA,CAAA,aAAO,IAAP;AACD,CAAA;;AAED,CAAA,WAAO,KAAP;AACD,CAAA,GAhrByC;;;AAkrB1C,CAAA;AACAwc,CAAAA,cAnrB0C,wBAmrB7BX,SAnrB6B,EAmrBlB;AACtB,CAAA,SAAK3P,GAAL,CAAS4N,MAAT,CAAgB+B,UAAU7b,EAA1B;AACD,CAAA,GArrByC;;;AAurB1C,CAAA;AACAgW,CAAAA,uBAxrB0C,mCAwrBlB;AACtB,CAAA,SAAKQ,QAAL,GAAgB,IAAImG,SAAJ,EAAhB;AACD,CAAA,GA1rByC;;;AA4rB1C,CAAA;AACArP,CAAAA,iBA7rB0C,6BA6rBxB;AAChB,CAAA,SAAKyM,gBAAL,CAAsB,EAACvC,YAAY,KAAb,EAAtB;AACD,CAAA,GA/rByC;;;AAisB1C,CAAA;AACAuC,CAAAA,kBAlsB0C,4BAksBzBzZ,OAlsByB,EAksBhB;AACxB,CAAA,QAAI,CAAC,KAAKkW,QAAL,CAAcpP,MAAnB,EAA2B;AACzB,CAAA;AACD,CAAA;;AAED,CAAA,SAAKvF,aAAL,CAAmB,yBAAnB,EAA8C,IAA9C;AACA,CAAA,QAAM+a,cAAc,KAAKpG,QAAL,CAAcnO,GAAd,CAAkB,OAAlB,CAApB;AACA,CAAA,SAAKgP,kBAAL,CAAwBuF,WAAxB,EAAqCtc,OAArC;AACA,CAAA,SAAKuB,aAAL,CAAmB,kBAAnB,EAAuC,IAAvC;AACD,CAAA,GA3sByC;;;AA6sB1C,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAoV,CAAAA,iBAltB0C,2BAktB1B1U,KAltB0B,EAktBnBgT,KAltBmB,EAktBZ;AAC5B,CAAA,QAAMwB,SAAS,KAAKA,MAApB;AACA,CAAA,WAAO,CAAChY,EAAEmC,UAAF,CAAa6V,MAAb,CAAD,IAAyBA,OAAOhV,IAAP,CAAY,IAAZ,EAAkBQ,KAAlB,EAAyBgT,KAAzB,EAAgC,KAAK1L,UAArC,CAAhC;AACD,CAAA,GArtByC;;;AAutB1C,CAAA;AACA6Q,CAAAA,mBAxtB0C,6BAwtBxBtY,IAxtBwB,EAwtBlB;AACtB,CAAA,SAAKqU,QAAL,CAAcrU,IAAd,EAAoB,KAApB,EAA2B,KAAK4L,sBAAhC;AACD,CAAA;AA1tByC,CAAA,CAArB,CAAvB;;AA6tBAjP,CAAAA,EAAEN,MAAF,CAASmX,eAAexP,SAAxB,EAAmCgG,SAAnC,EAEA;;CCzvBA,IAAMtG,iBAAe,CACnB,oBADmB,EAEnB,UAFmB,EAGnB,iBAHmB,CAArB;;AAMA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,IAAM+W,gBAAgBjH,eAAenX,MAAf,CAAsB;;AAE1C,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAmF,CAAAA,aAP0C,uBAO9BtD,OAP8B,EAOrB;AACnB1B,CAAAA,cAAU,2EAAV;;AAEA,CAAA,SAAKyB,YAAL,CAAkBC,OAAlB,EAA2BwF,cAA3B;;AAEA8P,CAAAA,mBAAexP,SAAf,CAAyBxC,WAAzB,CAAqCpF,KAArC,CAA2C,IAA3C,EAAiDsB,SAAjD;AACD,CAAA,GAbyC;;;AAe1C,CAAA;AACA,CAAA;AACA,CAAA;AACAiW,CAAAA,gBAlB0C,4BAkBzB;;AAEf,CAAA;AACA,CAAA;;AAEA,CAAA,QAAI,KAAKlM,UAAT,EAAqB;AACnB,CAAA,WAAK4M,QAAL,CAAc,KAAK5M,UAAnB,EAA+B,KAA/B,EAAsC,KAAK6M,gBAA3C;AACA,CAAA,WAAKD,QAAL,CAAc,KAAK5M,UAAnB,EAA+B,QAA/B,EAAyC,KAAK8M,mBAA9C;AACA,CAAA,WAAKF,QAAL,CAAc,KAAK5M,UAAnB,EAA+B,OAA/B,EAAwC,KAAKiT,cAA7C;;AAEA,CAAA,UAAI,KAAKjH,IAAT,EAAe;AACb,CAAA,aAAKY,QAAL,CAAc,KAAK5M,UAAnB,EAA+B,MAA/B,EAAuC,KAAK+M,UAA5C;AACD,CAAA;AACF,CAAA;AACF,CAAA,GAhCyC;;;AAkC1C,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAyD,CAAAA,eAvC0C,yBAuC5B9X,KAvC4B,EAuCrB;AACnB,CAAA,QAAIsZ,YAAY,KAAKA,SAArB;;AAEA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,QAAI,CAACA,SAAL,EAAgB;AACd,CAAA,aAAO,KAAKjY,WAAZ;AACD,CAAA;;AAEDiY,CAAAA,gBAAY,KAAKD,QAAL,CAAcC,SAAd,EAAyBtZ,KAAzB,CAAZ;;AAEA,CAAA,QAAI,CAACsZ,SAAL,EAAgB;AACd,CAAA,YAAM,IAAIrY,eAAJ,CAAoB;AACxBvC,CAAAA,cAAM,uBADkB;AAExBpC,CAAAA,iBAAS;AAFe,CAAA,OAApB,CAAN;AAID,CAAA;;AAED,CAAA,WAAOgd,SAAP;AACD,CAAA,GA5DyC;;;AA8D1C,CAAA;AACAzI,CAAAA,eA/D0C,2BA+D1B;AACd,CAAA,WAAO,KAAKC,cAAL,EAAP;AACD,CAAA,GAjEyC;;;AAmE1C,CAAA;AACA5D,CAAAA,QApE0C,oBAoEjC;AACP,CAAA,SAAKtC,mBAAL;AACA,CAAA,SAAK4P,YAAL,GAAoB,IAApB;AACA,CAAA,SAAKC,uBAAL;;AAEA,CAAA,SAAKnb,aAAL,CAAmB,eAAnB,EAAoC,IAApC;;AAEA,CAAA,SAAK8R,eAAL;AACA,CAAA,SAAKpG,cAAL;AACA,CAAA,SAAKuP,cAAL;;AAEA,CAAA,SAAKC,YAAL,GAAoB,KAApB;AACA,CAAA,SAAKja,WAAL,GAAmB,IAAnB;AACA,CAAA,SAAKjB,aAAL,CAAmB,QAAnB,EAA6B,IAA7B;AACA,CAAA,WAAO,IAAP;AACD,CAAA,GAnFyC;AAqF1Cib,CAAAA,gBArF0C,4BAqFzB;AACf,CAAA,QAAI,KAAKha,WAAL,IAAoB,KAAKia,YAA7B,EAA2C;AACzCnH,CAAAA,qBAAexP,SAAf,CAAyBgS,eAAzB,CAAyCrW,IAAzC,CAA8C,IAA9C;AACD,CAAA;AACF,CAAA,GAzFyC;;;AA2F1C,CAAA;AACAuU,CAAAA,cA5F0C,wBA4F7B2G,aA5F6B,EA4Fdd,MA5Fc,EA4FN;AAClC,CAAA,QAAMe,aAAa,KAAKC,qBAAL,CAA2BF,aAA3B,CAAnB;AACAC,CAAAA,eAAWpD,MAAX,CAAkBqC,MAAlB;AACD,CAAA,GA/FyC;;;AAiG1C,CAAA;AACA,CAAA;AACA,CAAA;AACAK,CAAAA,cApG0C,wBAoG7BX,SApG6B,EAoGlB;AACtB,CAAA,QAAMqB,aAAa,KAAKC,qBAAL,CAA2B,IAA3B,EAAiCtB,SAAjC,CAAnB;AACAqB,CAAAA,eAAWpD,MAAX,CAAkB+B,UAAU7b,EAA5B;AACD,CAAA,GAvGyC;;;AAyG1C,CAAA;AACA,CAAA;AACA,CAAA;AACAuZ,CAAAA,0BA5G0C,oCA4GjB/C,QA5GiB,EA4GP;AACjC,CAAA,QAAM0G,aAAa,KAAKC,qBAAL,CAA2B,IAA3B,CAAnB;AACAD,CAAAA,eAAWpD,MAAX,CAAkBtD,QAAlB;AACD,CAAA,GA/GyC;;;AAiH1C,CAAA;AACA,CAAA;AACA2G,CAAAA,uBAnH0C,iCAmHpBC,aAnHoB,EAmHLvB,SAnHK,EAmHM;AAC9C,CAAA,QAAI,CAAC,CAACuB,cAAcC,mBAApB,EAAyC;AACvC,CAAA,aAAOD,cAAcC,mBAArB;AACD,CAAA;;AAED,CAAA,QAAIC,kBAAJ;AACA,CAAA,QAAMC,qBAAqBH,cAAcG,kBAAzC;AACA,CAAA,QAAIA,kBAAJ,EAAwB;;AAEtB,CAAA,UAAMpT,WAAWpL,EAAEiD,MAAF,CAASob,aAAT,EAAwB,oBAAxB,CAAjB;;AAEA,CAAA,UAAIjT,SAASqT,MAAT,CAAgB,CAAhB,MAAuB,GAAvB,IAA8BJ,cAAcrS,EAAhD,EAAoD;AAClDuS,CAAAA,oBAAYF,cAAcrS,EAAd,CAAiBZ,SAASsT,MAAT,CAAgB,CAAhB,CAAjB,CAAZ;AACD,CAAA,OAFD,MAEO;AACLH,CAAAA,oBAAYF,cAAcnd,CAAd,CAAgBkK,QAAhB,CAAZ;AACD,CAAA;;AAED,CAAA,UAAImT,UAAUlW,MAAV,IAAoB,CAAxB,EAA2B;AACzB,CAAA,cAAM,IAAI5D,eAAJ,CAAoB;AACxBvC,CAAAA,gBAAM,gCADkB;AAExBpC,CAAAA,0EAA8Due,cAAcG;AAFpD,CAAA,SAApB,CAAN;AAID,CAAA;AAEF,CAAA,KAjBD,MAiBO;AACLD,CAAAA,kBAAYF,cAAclR,GAA1B;AACD,CAAA;;AAEDkR,CAAAA,kBAAcC,mBAAd,GAAoCC,SAApC;AACA,CAAA,WAAOA,SAAP;AACD,CAAA,GAjJyC;;;AAmJ1C,CAAA;AACAN,CAAAA,yBApJ0C,qCAoJhB;AACxB,CAAA,QAAI,KAAKK,mBAAT,EAA8B;AAC5B,CAAA,WAAKA,mBAAL,GAA2B/d,SAA3B;AACD,CAAA;AACF,CAAA;AAxJyC,CAAA,CAAtB,CAAtB;;AA2JA,CAAA;AACA,CAAA;AACA,CAAA,IAAMoe,gBAAgB3e,EAAE+E,IAAF,CAAOkJ,KAAK5G,SAAZ,EAAuB,gBAAvB,EAAyC,aAAzC,EAAwD,iBAAxD,EAA2E,sBAA3E,EAAmG,iBAAnG,CAAtB;AACArH,CAAAA,EAAEN,MAAF,CAASoe,cAAczW,SAAvB,EAAkCsX,aAAlC,EAEA;;CCnKA,IAAM5X,iBAAe,CACnB,kBADmB,EAEnB,QAFmB,EAGnB,aAHmB,EAInB,UAJmB,EAKnB,IALmB,CAArB;;AAQA,CAAA,IAAM6X,WAAW5X,iBAAiBtH,MAAjB,CAAwB;AACvCyH,CAAAA,aAAW,KAD4B;;AAGvCtC,CAAAA,aAHuC,uBAG3BtD,OAH2B,EAGlB8B,IAHkB,EAGZ;AACzB,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,SAAKA,IAAL,GAAYA,IAAZ;AACA,CAAA,SAAK2O,QAAL,GAAgBhS,EAAE6T,KAAF,CAAQ7T,EAAEiD,MAAF,CAAS,IAAT,EAAe,UAAf,EAA2B,EAA3B,CAAR,CAAhB;AACA,CAAA,SAAKoD,WAAL,CAAiB,KAAK2L,QAAtB,EAAgCzQ,OAAhC;AACA,CAAA,SAAKD,YAAL,CAAkB,KAAKC,OAAvB,EAAgCwF,cAAhC;;AAEA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA,SAAKiF,EAAL,GAAUhM,EAAEN,MAAF,CAAS,EAAT,EAAaM,EAAEiD,MAAF,CAAS,IAAT,EAAe,IAAf,CAAb,EAAmCjD,EAAEiD,MAAF,CAASI,IAAT,EAAe,IAAf,CAAnC,CAAV;;AAEA2D,CAAAA,qBAAiBvH,KAAjB,CAAuB,IAAvB,EAA6BsB,SAA7B;AACD,CAAA,GAxBsC;;;AA0BvC,CAAA;AACA,CAAA;AACA,CAAA;AACAG,CAAAA,GA7BuC,eA6BnC;AACF,CAAA,WAAO,KAAKmC,IAAL,CAAUnC,CAAV,CAAYzB,KAAZ,CAAkB,KAAK4D,IAAvB,EAA6BtC,SAA7B,CAAP;AACD,CAAA,GA/BsC;;;AAiCvC,CAAA;AACA,CAAA;AACA4G,CAAAA,SAnCuC,qBAmC7B;AACR,CAAA,SAAKC,aAAL;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GAvCsC;AAyCvCiX,CAAAA,qBAzCuC,iCAyCjB;AACpB,CAAA,SAAK1R,GAAL,GAAW,KAAK9J,IAAL,CAAU8J,GAArB;AACA,CAAA,SAAKlM,EAAL,GAAU,KAAKoC,IAAL,CAAUpC,EAApB;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GA9CsC;AAgDvCuN,CAAAA,gBAhDuC,4BAgDtB;AACf,CAAA,SAAKzB,eAAL;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GApDsC;AAsDvCsB,CAAAA,kBAtDuC,8BAsDpB;AACjB,CAAA,SAAKnB,iBAAL;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GA1DsC;AA4DvCuB,CAAAA,OA5DuC,iBA4DjCvM,IA5DiC,EA4D3B;AACV,CAAA,SAAKmB,IAAL,CAAU+K,mBAAV;AACA,CAAA,WAAO,KAAKhB,MAAL,CAAYlL,IAAZ,CAAP;AACD,CAAA,GA/DsC;;;AAiEvC,CAAA;AACAgM,CAAAA,sBAlEuC,kCAkEhB;AACrB,CAAA,SAAKtD,qBAAL,CAA2B,KAAKvH,IAAL,CAAUwH,KAArC,EAA4C,KAAKxH,IAAL,CAAUyH,UAAtD;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GAtEsC;AAwEvCqD,CAAAA,wBAxEuC,oCAwEd;AACvB,CAAA,SAAKpD,uBAAL,CAA6B,KAAK1H,IAAL,CAAUwH,KAAvC,EAA8C,KAAKxH,IAAL,CAAUyH,UAAxD;;AAEA,CAAA,WAAO,IAAP;AACD,CAAA,GA5EsC;AA8EvCgU,CAAAA,WA9EuC,uBA8E3B;AAAA,CAAA;;AACV,CAAA;AACA,CAAA;AACA,CAAA,QAAMC,iBAAiB,KAAKhT,eAAL,CAAqB/L,EAAEiD,MAAF,CAAS,IAAT,EAAe,QAAf,CAArB,CAAvB;;AAEA,CAAA;AACA,CAAA,WAAOjD,EAAEgC,MAAF,CAAS+c,cAAT,EAAyB,UAAC3U,MAAD,EAAS4U,eAAT,EAA0Btd,GAA1B,EAAkC;AAChE,CAAA,UAAI,CAAC1B,EAAEmC,UAAF,CAAa6c,eAAb,CAAL,EAAoC;AAClCA,CAAAA,0BAAkB,MAAKA,eAAL,CAAlB;AACD,CAAA;AACD,CAAA,UAAI,CAACA,eAAL,EAAsB;AAAE,CAAA;AAAS,CAAA;AACjCtd,CAAAA,YAAM4J,mBAAmB5J,GAAnB,CAAN;AACA0I,CAAAA,aAAO1I,GAAP,IAAc1B,EAAEyT,IAAF,CAAOuL,eAAP,QAAd;AACA,CAAA,aAAO5U,MAAP;AACD,CAAA,KARM,EAQJ,EARI,CAAP;AASD,CAAA,GA7FsC;;;AA+FvC,CAAA;AACA4D,CAAAA,aAhGuC,yBAgGzB;AACZ,CAAA,QAAI,CAAC,KAAK/D,QAAV,EAAoB;AAAE,CAAA;AAAS,CAAA;;AAE/B,CAAA;AACA,CAAA;AACA,CAAA,QAAMgV,mBAAmB,KAAKlT,eAAL,CAAqB/L,EAAEiD,MAAF,CAAS,IAAT,EAAe,UAAf,CAArB,CAAzB;;AAEA,CAAA,WAAO,KAAK6I,gBAAL,CAAsB,KAAKzI,IAA3B,EAAiC4b,gBAAjC,CAAP;AACD,CAAA;AAxGsC,CAAA,CAAxB,CAAjB;;AA4GAjf,CAAAA,EAAEN,MAAF,CAASkf,SAASvX,SAAlB,EAA6BmI,yBAA7B,EAAwDC,aAAxD,EAAuEC,OAAvE,EAEA;;CC/HA,IAAM3I,iBAAe,CACnB,QADmB,EAEnB,aAFmB,CAArB;;AAKA,CAAA;AACA,CAAA,IAAMmY,cAAclY,iBAAiBtH,MAAjB,CAAwB;AAC1CyH,CAAAA,aAAW,KAD+B;;AAG1CtC,CAAAA,aAH0C,uBAG9BtD,OAH8B,EAGrB;AACnB,CAAA,SAAK8E,WAAL,CAAiB9E,OAAjB;;AAEA,CAAA,SAAKD,YAAL,CAAkBC,OAAlB,EAA2BwF,cAA3B;;AAEA,CAAA,SAAKoY,WAAL;;AAEAnY,CAAAA,qBAAiBK,SAAjB,CAA2BxC,WAA3B,CAAuCpF,KAAvC,CAA6C,IAA7C,EAAmDsB,SAAnD;AACD,CAAA,GAXyC;;;AAa1CqR,CAAAA,eAAavC,MAb6B;;AAe1CsP,CAAAA,aAf0C,yBAe5B;AACZ,CAAA,QAAM/L,SAAS,KAAKA,MAApB;;AAEA,CAAA,QAAI,CAACA,MAAL,EAAa;AAAE,CAAA;AAAS,CAAA;;AAExB,CAAA,QAAMpB,WAAW;AACfI,CAAAA,mBAAa,KAAKA;AADH,CAAA,KAAjB;;AAIA,CAAA,SAAKgN,OAAL,GAAelM,YAAYE,MAAZ,EAAoBpB,QAApB,CAAf;AACD,CAAA,GAzByC;AA2B1C4B,CAAAA,WA3B0C,uBA2B9B;AACV,CAAA,WAAO,KAAKwL,OAAZ;AACD,CAAA,GA7ByC;AA+B1CC,CAAAA,UA/B0C,oBA+BjChc,IA/BiC,EA+BlB;AACtB,CAAA,QAAM+P,SAAS,KAAKQ,SAAL,EAAf;;AADsB,CAAA,sCAANpU,IAAM;AAANA,CAAAA,UAAM;AAAA,CAAA;;AAEtB,CAAA,WAAO4T,OAAOlD,IAAP,gBAAY7M,IAAZ,SAAqB7D,IAArB,EAAP;AACD,CAAA,GAlCyC;AAoC1C8f,CAAAA,SApC0C,qBAoChC;AACR,CAAA,WAAO,KAAK1L,SAAL,GAAiBvD,WAAxB;AACD,CAAA,GAtCyC;;;AAwC1C,CAAA;AACAkP,CAAAA,OAzC0C,iBAyCpChe,OAzCoC,EAyC3B;AACb,CAAA,SAAKuB,aAAL,CAAmB,cAAnB,EAAmC,IAAnC,EAAyCvB,OAAzC;AACA,CAAA,SAAKuB,aAAL,CAAmB,OAAnB,EAA4B,IAA5B,EAAkCvB,OAAlC;AACA,CAAA,WAAO,IAAP;AACD,CAAA;AA7CyC,CAAA,CAAxB,CAApB,CAiDA;;CCpCA,IAAMwF,iBAAe,CACnB,WADmB,EAEnB,YAFmB,CAArB;;AAKA,CAAA,IAAMyY,YAAY7f,SAAS8f,MAAT,CAAgB/f,MAAhB,CAAuB;AAEvCmF,CAAAA,aAFuC,uBAE3BtD,OAF2B,EAElB;AACnB,CAAA,SAAK8E,WAAL,CAAiB9E,OAAjB;;AAEA,CAAA,SAAKD,YAAL,CAAkBC,OAAlB,EAA2BwF,cAA3B;;AAEApH,CAAAA,aAAS8f,MAAT,CAAgBhgB,KAAhB,CAAsB,IAAtB,EAA4BsB,SAA5B;;AAEA,CAAA,QAAM2e,YAAY,KAAKA,SAAvB;AACA,CAAA,QAAMC,aAAa,KAAKC,cAAL,EAAnB;AACA,CAAA,SAAKC,gBAAL,CAAsBF,UAAtB,EAAkCD,SAAlC;AACA,CAAA,SAAKnb,EAAL,CAAQ,OAAR,EAAiB,KAAKub,eAAtB,EAAuC,IAAvC;AACD,CAAA,GAbsC;;;AAevC,CAAA;AACA,CAAA;AACAC,CAAAA,UAjBuC,oBAiB9BC,KAjB8B,EAiBvBjd,UAjBuB,EAiBX;AAC1B,CAAA,QAAM4c,aAAa,KAAKC,cAAL,EAAnB;AACA,CAAA,SAAKK,YAAL,CAAkBN,UAAlB,EAA8BK,KAA9B,EAAqCjd,UAArC;AACA,CAAA,WAAO,IAAP;AACD,CAAA,GArBsC;;;AAuBvC,CAAA;AACA,CAAA;AACA+c,CAAAA,iBAzBuC,2BAyBvBI,SAzBuB,EAyBZC,SAzBY,EAyBD;AACpC,CAAA;AACA,CAAA,QAAIngB,EAAEmC,UAAF,CAAa,KAAKie,OAAlB,CAAJ,EAAgC;AAC9B,CAAA;AACA,CAAA,UAAMC,YAAYrgB,EAAEsgB,MAAF,CAAS,KAAKZ,SAAd,EAAyBQ,SAAzB,CAAlB;AACA,CAAA,WAAKE,OAAL,CAAaF,SAAb,EAAwBG,SAAxB,EAAmCF,SAAnC;AACD,CAAA;AACF,CAAA,GAhCsC;;;AAkCvC,CAAA;AACA,CAAA;AACA,CAAA;AACAN,CAAAA,kBArCuC,4BAqCtBF,UArCsB,EAqCVD,SArCU,EAqCC;AAAA,CAAA;;AACtC,CAAA,QAAI,CAACA,SAAL,EAAgB;AAAE,CAAA,aAAO,IAAP;AAAc,CAAA;;AAEhC,CAAA,QAAMa,aAAavgB,EAAEwB,IAAF,CAAOke,SAAP,EAAkBc,OAAlB,EAAnB,CAHsC;;AAKtCxgB,CAAAA,MAAEyB,IAAF,CAAO8e,UAAP,EAAmB,iBAAS;AAC1B,CAAA,YAAKN,YAAL,CAAkBN,UAAlB,EAA8BK,KAA9B,EAAqCN,UAAUM,KAAV,CAArC;AACD,CAAA,KAFD;;AAIA,CAAA,WAAO,IAAP;AACD,CAAA,GA/CsC;AAiDvCJ,CAAAA,gBAjDuC,4BAiDtB;AACf,CAAA,WAAO,KAAKD,UAAZ;AACD,CAAA,GAnDsC;AAqDvCM,CAAAA,cArDuC,wBAqD1BN,UArD0B,EAqDdK,KArDc,EAqDPjd,UArDO,EAqDK;AAC1C,CAAA,QAAMzD,SAASqgB,WAAW5c,UAAX,CAAf;;AAEA,CAAA,QAAI,CAACzD,MAAL,EAAa;AACX,CAAA,YAAM,IAAImF,eAAJ,cAA+B1B,UAA/B,uCAAN;AACD,CAAA;;AAED,CAAA,SAAKid,KAAL,CAAWA,KAAX,EAAkBjd,UAAlB,EAA8B/C,EAAEyT,IAAF,CAAOnU,MAAP,EAAeqgB,UAAf,CAA9B;AACD,CAAA,GA7DsC;;;AA+DvC7c,CAAAA,iBAAeA;AA/DwB,CAAA,CAAvB,CAAlB;;AAkEA9C,CAAAA,EAAEN,MAAF,CAAS8f,UAAUnY,SAAnB,EAA8BE,WAA9B,EAEA;;CChGA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACA,AAAe,CAAA,SAAS2B,eAAT,GAA2B;AACxC,CAAA,QAAM,IAAIzE,eAAJ,CAAoB;AACxB3E,CAAAA,aAAS,kDADe;AAExBM,CAAAA,SAAK;AAFmB,CAAA,GAApB,CAAN;AAID,CAAA;;CChBD;AACA,CAAA;AACA,CAAA,IAAMqgB,WAAW,EAAjB;;AAGA,CAAA,SAASC,SAAT,CAAmBxe,IAAnB,EAAyB;AACvB,CAAA,SAAO,CAAC,CAACue,SAASve,IAAT,CAAT;AACD,CAAA;;AAED,CAAA,SAASye,UAAT,CAAoBze,IAApB,EAA0B0e,KAA1B,EAAiC;AAC/B,CAAA,SAAOH,SAASve,IAAT,IAAiB0e,KAAxB;AACD,CAAA,CAED;;CCoCA,IAAMC,qBAAqBlhB,SAASU,UAApC;AACA,CAAA,IAAMA,aAAaV,SAASU,UAAT,GAAsB,EAAzC;;AAEA,CAAA;AACA,CAAA;AACA,CAAA;AACA,CAAA;AACAA,CAAAA,WAAWygB,UAAX,GAAwB,YAAW;AACjCnhB,CAAAA,WAASU,UAAT,GAAsBwgB,kBAAtB;AACA,CAAA,SAAO,IAAP;AACD,CAAA,CAHD;;AAKA,CAAA;AACAxgB,CAAAA,WAAWwF,UAAX,GAAwBxG,MAAMwG,UAAN,CAAxB;AACAxF,CAAAA,WAAWyF,YAAX,GAA0BzG,MAAMyG,YAAN,CAA1B;AACAzF,CAAAA,WAAW6F,YAAX,GAA0B7G,MAAM6G,YAAN,CAA1B;AACA7F,CAAAA,WAAW8F,cAAX,GAA4B9G,MAAM8G,cAAN,CAA5B;AACA9F,CAAAA,WAAWiB,YAAX,GAA0BjC,MAAMiC,YAAN,CAA1B;AACAjB,CAAAA,WAAWuB,SAAX,GAAuBvC,MAAMuC,SAAN,CAAvB;AACAvB,CAAAA,WAAWyB,gBAAX,GAA8BzC,MAAMyC,gBAAN,CAA9B;AACAzB,CAAAA,WAAWX,MAAX,GAAoBA,MAApB;AACAW,CAAAA,WAAWW,cAAX,GAA4BA,cAA5B;AACAX,CAAAA,WAAWR,SAAX,GAAuBA,SAAvB;AACAQ,CAAAA,WAAWyC,aAAX,GAA2BzD,MAAMyD,aAAN,CAA3B;AACAzC,CAAAA,WAAW8C,eAAX,GAA6BA,eAA7B;AACA9C,CAAAA,WAAWqgB,SAAX,GAAuBA,SAAvB;AACArgB,CAAAA,WAAWsgB,UAAX,GAAwBA,UAAxB;AACAtgB,CAAAA,WAAWgE,iBAAX,GAA+BA,iBAA/B;;AAEAhE,CAAAA,WAAW4I,SAAX,GAAuB,EAAvB;AACA5I,CAAAA,WAAW4I,SAAX,CAAqBC,eAArB,GAAuCA,eAAvC;;AAEA,CAAA;AACA7I,CAAAA,WAAW6e,WAAX,GAAyBA,WAAzB;AACA7e,CAAAA,WAAWmf,SAAX,GAAuBA,SAAvB;AACAnf,CAAAA,WAAW4T,QAAX,GAAsBA,QAAtB;AACA5T,CAAAA,WAAWwH,aAAX,GAA2BA,aAA3B;AACAxH,CAAAA,WAAW4N,IAAX,GAAkBA,IAAlB;AACA5N,CAAAA,WAAWwW,cAAX,GAA4BA,cAA5B;AACAxW,CAAAA,WAAWyd,aAAX,GAA2BA,aAA3B;AACAzd,CAAAA,WAAWue,QAAX,GAAsBA,QAAtB;AACAve,CAAAA,WAAWwP,MAAX,GAAoBA,MAApB;AACAxP,CAAAA,WAAWqE,KAAX,GAAmBD,eAAnB;AACApE,CAAAA,WAAW0gB,MAAX,GAAoB/Z,gBAApB;;AAEA,CAAA;AACA3G,CAAAA,WAAWC,QAAX,GAAsB,KAAtB;AACAD,CAAAA,WAAWogB,QAAX,GAAsBA,QAAtB;AACApgB,CAAAA,WAAW2gB,OAAX,GAAqBpc,OAArB,CAEA;;;;","sourceRoot":"/source/"}