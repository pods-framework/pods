var PodsDFV=function(e,t,i,n){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,i=i&&i.hasOwnProperty("default")?i.default:i;var o=Backbone.Model.extend({defaults:{htmlAttr:{},fieldConfig:{}}});function l(t,i,n){var l=new t({el:i,model:new o({htmlAttr:n.htmlAttr,fieldConfig:n.fieldConfig}),fieldItemData:n.fieldItemData});return l.render(),e(i).trigger("render"),l}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){r(e,t,i[t])})}return e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,o=!1,l=void 0;try{for(var a,r=e[Symbol.iterator]();!(n=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){o=!0,l=e}finally{try{n||null==r.return||r.return()}finally{if(o)throw l}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function f(e,t){return e(t={exports:{}},t.exports),t.exports}var m=f(function(e){!function(){var t={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var l=typeof o;if("string"===l||"number"===l)e.push(o);else if(Array.isArray(o)&&o.length){var a=i.apply(null,o);a&&e.push(a)}else if("object"===l)for(var r in o)t.call(o,r)&&o[r]&&e.push(r)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i}()}),p=function(e){return t.createElement("div",{className:"notice notice-error"},e.message)},h=function(e){return e.messages.map(function(e){return t.createElement(p,{key:e,message:e})})},v=wp.i18n,g=v.__,b=v.sprintf,w=function(e,t){return{facts:{value:e},conditions:{value:{equal:""}},event:{message:b(g("%s is required.","pods"),t)}}},y=function(e,t){return{facts:{numericValue:1*e,max:1*t},conditions:{numericValue:{greater:"$max"}},event:{message:b(g("Exceeds the maximum value of %s","pods"),t)}}},E=function(e,t){return{facts:{numericValue:1*e,min:1*t},conditions:{numericValue:{less:"$min"}},event:{message:b(g("Below the minimum value of %s","pods"),t)}}},C=function(e){return{facts:{value:e,emailRegex:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},conditions:{not:{or:[{value:{equal:""}},{emailRegex:{matches:e}}]}},event:{message:g("Invalid email address format")}}},O=f(function(e){const t=e.exports,i=Array.prototype.slice,n=function(e,t){return e.toString=(()=>t.toString()),e.src=t,e},o=t.curry=function(e){return n(function(t,i){switch(arguments.length){case 0:throw new TypeError("Function called with no arguments");case 1:return n(function(i){return e(t,i)},e)}return e(t,i)},e)};t.partial=function(e){const t=i.call(arguments,1);return function(){return e.apply(null,t.concat(i.call(arguments)))}},t.complement=t.invert=function(e){return function(){const i=e.apply(null,arguments);return"function"==typeof i?t.complement(i):!i}},t.mod=o(function(e,t){return e%t}),t.assign=o(Object.assign||function(e,t){for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e})}),A=f(function(e){const t=e.exports,i=O.curry;Object.is?t.is=i(Object.is):t.is=i(function(e,t){return 0===e&&0===t?1/e==1/t:e!=e?t!=t:e===t}),t.exists=function(e){return null!=e},t.truthy=function(e){return!(!e||!t.exists(e))},t.falsey=O.complement(t.truthy),t.equal=i(function(e,t){return e===t}),t.eq=i(function(e,t){return e==t}),t.null=t.equal(null),t.undef=t.equal(void 0),t.lt=t.less=i(function(e,t){return e<t}),t.ltEq=t.le=t.lessEq=i(function(e,i){return t.equal(e,i)||t.less(e,i)}),t.gt=t.greater=i(function(e,t){return e>t}),t.gtEq=t.ge=t.greaterEq=i(function(e,i){return t.equal(e,i)||t.greater(e,i)});const n=Object.prototype.toString,o=i(function(e,i){return t.equal(e,n.call(i))});t.object=t.obj=function(e){return e===Object(e)},t.array=t.arr=Array.isArray||o("[object Array]"),t.date=o("[object Date]"),t.regex=t.regexp=t.rgx=t.RegExp=o("[object RegExp]"),t.finite=Number.isFinite||function(e){return t.number(e)&&isFinite(e)},t.nan=t.NaN=t.is(NaN),t.instance=i(function(e,t){return t instanceof e}),t.arguments=o("[object Arguments]"),t.error=t.instance(Error);const l=i(function(e,i){return t.equal(e,typeof i)});[["function","fn"],["string","str"],["boolean","bool"]].reduce(function(e,t){return e[t[0]]=e[t[1]]=l(t[0]),e},t),t.number=t.num=function(e){return"number"==typeof e&&t.not.NaN(e)},t.int=function(e){return t.num(e)&&t.zero(O.mod(e,1))},t.pos=function(e){return t.num(e)&&t.greater(e,0)},t.neg=function(e){return t.num(e)&&t.less(e,0)},t.zero=function(e){return t.num(e)&&t.equal(e,0)},t.even=function(e){return t.num(e)&&t.not.zero(e)&&t.zero(O.mod(e,2))},t.odd=function(e){return t.num(e)&&t.not.zero(e)&&t.not.zero(O.mod(e,2))},t.contains=t.includes=i(function(e,i){if(!t.array(e)&&!t.string(e))throw new TypeError("Expected an array or string");return!(t.string(e)&&!t.string(i))&&(t.NaN(i)?e.some(t.NaN):!!~e.indexOf(i))});const a=Object.prototype.hasOwnProperty;t.has=i(function(e,t){return a.call(e,t)}),t.empty=function(e){if(t.not.exists(e))return!0;if(t.arr(e)||t.str(e))return!e.length;if(t.obj(e)){for(let i in e)if(t.has(e,i))return!1;return!0}throw new TypeError},t.primitive=function(e){return t.string(e)||t.num(e)||t.bool(e)||t.null(e)||t.undef(e)||t.NaN(e)},t.matches=i(function(e,t){return e.test(t)}),t.not=Object.keys(t).reduce(function(e,i){return e[i]=O.complement(t[i]),e},{})}),S=f(function(e){const t=e.exports;class i{constructor(){this.lazy=[]}valueOf(){return this.val()}val(){return this.lazy[this.method](function(e){return e[0].apply(null,e[1])})}}class n extends i{constructor(){super(),this.method="every"}}class o extends i{constructor(){super(),this.method="some"}}[n,o].forEach(function(e){Object.keys(A).reduce(function(e,t){return A.fn(A[t])?(e[t]=function(){return this.lazy.push([A[t],arguments]),this},e):e},e.prototype)}),t.all=t.every=function(){return new n},t.any=t.some=function(){return new o}}),x=f(function(e){const t=e.exports;t.ternary=function(e,i,n){return A.bool(e)?e?i:n:A.undef(i)?O.partial(t.ternary,e):A.undef(n)?O.partial(t.ternary,e,i):t.ternary(e(i,n),i,n)};const i=Array.prototype.every,n=Array.prototype.some;t.and=function(){const e=arguments;return function(t){return i.call(e,function(e){return e(t)})}},t.or=function(){const e=arguments;return function(t){return n.call(e,function(e){return e(t)})}}});const k={VERSION:"1.0.0"};[O,A,S,x].reduce(O.assign,k);var N=k,T=Function.prototype.bind||function(e){var t,i=this;if(arguments.length<2)t=function(){if(this instanceof t){var n=i.apply(this,arguments);return Object(n)===n?n:this}return i.apply(e,arguments)};else{for(var n=new Array(arguments.length-1),o=1;o<arguments.length;o++)n[o-1]=arguments[o];t=function(){var o,l=n.length,a=new Array(l+arguments.length);for(o=0;o<l;o++)a[o]=n[o];for(o=0;o<arguments.length;o++)a[l+o]=arguments[o];if(this instanceof t){var r=i.apply(this,a);return Object(r)===r?r:this}return i.apply(e,a)}}return t.prototype=i.prototype,t},P=function(e,t){var i=function(){return 0===arguments.length?i:arguments.length>1?e.apply(t,arguments):T.call(e,t,arguments[0])};return i.uncurry=function(){return e},i};var M=1e3,V=60*M,j=60*V,I=24*j,R=365.25*I,F=function(e,t){t=t||{};var i,n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*R;case"days":case"day":case"d":return i*I;case"hours":case"hour":case"hrs":case"hr":case"h":return i*j;case"minutes":case"minute":case"mins":case"min":case"m":return i*V;case"seconds":case"second":case"secs":case"sec":case"s":return i*M;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?L(i=e,I,"day")||L(i,j,"hour")||L(i,V,"minute")||L(i,M,"second")||i+" ms":function(e){if(e>=I)return Math.round(e/I)+"d";if(e>=j)return Math.round(e/j)+"h";if(e>=V)return Math.round(e/V)+"m";if(e>=M)return Math.round(e/M)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function L(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}var D=f(function(e,t){var i;function n(e){function n(){if(n.enabled){var e=n,o=+new Date,l=o-(i||o);e.diff=l,e.prev=i,e.curr=o,i=o;for(var a=new Array(arguments.length),r=0;r<a.length;r++)a[r]=arguments[r];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(i,n){if("%%"===i)return i;s++;var o=t.formatters[n];if("function"==typeof o){var l=a[s];i=o.call(e,l),a.splice(s,1),s--}return i}),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var i,n=0;for(i in e)n=(n<<5)-n+e.charCodeAt(i),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var i=("string"==typeof e?e:"").split(/[\s,]+/),n=i.length,o=0;o<n;o++)i[o]&&("-"===(e=i[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var i,n;for(i=0,n=t.skips.length;i<n;i++)if(t.skips[i].test(e))return!1;for(i=0,n=t.names.length;i<n;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=F,t.names=[],t.skips=[],t.formatters={}}),U=(D.coerce,D.disable,D.enable,D.enabled,D.humanize,D.names,D.skips,D.formatters,f(function(e,t){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=D).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var i=this.useColors;if(e[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+e[0]+(i?"%c ":" ")+"+"+t.humanize(this.diff),!i)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,l=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(l=o))}),e.splice(l,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())})),B=(U.log,U.formatArgs,U.save,U.load,U.useColors,U.storage,U.colors,function(e){return"[object String]"=={}.toString.call(e)?e.replace($,".$1").replace(z,""):""}),$=/\[([^\[\]]+)\]/g,z=/^[.]*|[.]*$/g;var q=Object.prototype.toString;function Q(e){return e.replace(/\uffff/g,".")}var W=function(e){for(var t=-1,i=function(e){for(var t=-1,i=e.length,n=[];++t<i;)e[t]&&n.push(e[t]);return n}(function(e){return("[object String]"===q.call(e)?e:"").replace(/\\\./g,"ï¿¿")}(e).split(".")),n=i.length,o=[];++t<n;)o.push(Q(i[t]));return o},G=U("selectn"),J=Object.prototype.toString,Z=P(function(e,t){G("arguments:",{path:e,object:t});var i=-1,n="[object Array]"===J.call(e)?e:W(B(e)),o=n.length,l=o?t:void 0;for(;++i<o;){if(Object(l)!==l)return;l=l[n[i]]}return G("ref:",l),"function"==typeof l?l():l});var H=f(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.flatMap=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.normRef=l,t.selectRef=function(e,t){var i=l(e);return(0,o.default)(i,t)},t.isObject=function(e){return"object"===(void 0===e?"undefined":i(e))&&null!==e},t.isDevelopment=function(){return!1},t.toArray=function(e){return Array.isArray(e)?e:[e]},t.toError=a,t.isRefArray=r,t.extractRefSchema=function(e,t){var i=t.properties;return i&&i[e]?"array"===i[e].type?r(e,t)?s(i[e].items.$ref,t):i[e].items:i[e]&&i[e].$ref?s(i[e].$ref,t):i[e]&&"object"===i[e].type?i[e]:void a(e+" has no $ref field ref schema extraction is impossible"):void a(e+" not defined in properties")};var n,o=(n=Z)&&n.__esModule?n:{default:n};function l(e){return e.replace(/\$/g,".")}function a(e){console.error(e)}function r(e,t){return t.properties[e]&&"array"===t.properties[e].type&&t.properties[e].items&&t.properties[e].items.$ref}function s(e,t){return e.startsWith("#/")?e.substr(2).split("/").reduce(function(e,t){return e[t]},t):void a("Only local references supported at this point use json-schema-deref")}var d=function(e,t){return e.concat(t)};t.flatMap=function(e,t){return e.map(t).reduce(d,[])}});u(H);H.flatMap,H.normRef,H.selectRef,H.isObject,H.isDevelopment,H.toArray,H.toError,H.isRefArray,H.extractRefSchema;var Y=f(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.OR="or",t.AND="and",t.NOT="not"});u(Y);Y.OR,Y.AND,Y.NOT;var K=f(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.predicatesFromRule=l,t.predicatesFromCondition=a,t.listAllPredicates=r,t.listInvalidPredicates=s,t.validatePredicates=function(e,t){var i=s(e,t);0!==i.length&&(0,H.toError)("Rule contains invalid predicates "+i)},t.fieldsFromPredicates=d,t.fieldsFromCondition=c,t.listAllFields=u,t.listInvalidFields=f,t.validateConditionFields=function(e,t){var i=f(e,t);0!==i.length&&(0,H.toError)("Rule contains invalid fields "+i)};var i,n=(i=N)&&i.__esModule?i:{default:i};var o=["and","or","ternary","every","some","curry","partial","complement","mod"];function l(e,t){return(0,H.isObject)(e)?(0,H.flatMap)(Object.keys(e),function(i){var n=e[i];if((0,H.isObject)(n)||i===Y.NOT){if(i===Y.OR||i===Y.AND)return Array.isArray(n)?(0,H.flatMap)(n,function(e){return l(e,t)}):((0,H.toError)('"'+i+'" must be an array'),[]);var o=l(n,t);return o.push(i),o}return l(i,t)}):[e]}function a(e,t){return(0,H.flatMap)(Object.keys(e),function(i){var n,o,r,s=e[i];if((i=(0,H.normRef)(i))===Y.OR||i===Y.AND)return Array.isArray(s)?(0,H.flatMap)(s,function(e){return a(e,t)}):((0,H.toError)(i+" with "+JSON.stringify(s)+" must be an Array"),[]);if(i===Y.NOT)return a(s,t);if(-1!==i.indexOf(".")){var d=i.indexOf("."),c=i.substr(0,d),u=(0,H.extractRefSchema)(c,t);if(u){var f=i.substr(d+1);return a((r=s,(o=f)in(n={})?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n),u)}return(0,H.toError)("Can't find schema for "+c),[]}if((0,H.isRefArray)(i,t)){var m=(0,H.extractRefSchema)(i,t);return m?a(s,m):[]}return t.properties[i]?l(s,t):((0,H.toError)("Can't validate "+i),[])})}function r(e,t){var i=(0,H.flatMap)(e,function(e){return a(e,t)});return i.filter(function(e,t,n){return i.indexOf(e)===t})}function s(e,t){return r(e,t).filter(function(e){return o.includes(e)||void 0===n.default[e]})}function d(e){return Array.isArray(e)?(0,H.flatMap)(e,d):(0,H.isObject)(e)?(0,H.flatMap)(Object.keys(e),function(t){return d(e[t])}):"string"==typeof e&&e.startsWith("$")?[e.substr(1)]:[]}function c(e){return(0,H.flatMap)(Object.keys(e),function(t){var i=e[t];return t===Y.OR||t===Y.AND?(0,H.flatMap)(i,c):t===Y.NOT?c(i):[(0,H.normRef)(t)].concat(d(i))})}function u(e){var t=(0,H.flatMap)(e,c);return t.filter(function(e){return-1===e.indexOf(".")}).filter(function(e,i,n){return t.indexOf(e)===i})}function f(e,t){return u(e).filter(function(e){return void 0===t.properties[e]})}});u(K);K.predicatesFromRule,K.predicatesFromCondition,K.listAllPredicates,K.listInvalidPredicates,K.validatePredicates,K.fieldsFromPredicates,K.fieldsFromCondition,K.listAllFields,K.listInvalidFields,K.validateConditionFields;var X=f(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return o(e,t)};var i,n=(i=N)&&i.__esModule?i:{default:i};var o=function e(t,i){return(0,H.isObject)(i)?Object.keys(i).every(function(o){var l=i[o];return o===Y.OR||o===Y.AND?!!Array.isArray(l)&&(o===Y.OR?l.some(function(i){return e(t,i)}):l.every(function(i){return e(t,i)})):o===Y.NOT?!e(t,l):!!n.default[o]&&n.default[o](t,l)}):n.default[i](t)}});u(X);var ee=f(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.toRelCondition=o,t.default=function e(t,i){if(!(0,H.isObject)(t)||!(0,H.isObject)(i))return(0,H.toError)("Rule "+JSON.stringify(t)+" with "+i+" can't be processed"),!1;return Object.keys(t).every(function(l){var a=t[l];if(l===Y.OR)return a.some(function(t){return e(t,i)});if(l===Y.AND)return a.every(function(t){return e(t,i)});if(l===Y.NOT)return!e(a,i);var r=(0,H.selectRef)(l,i);if(Array.isArray(r)){var s=r.some(function(t){return!!(0,H.isObject)(t)&&e(a,t)});return s||(0,n.default)(r,o(a,i))}return(0,n.default)(r,o(a,i))})};var i,n=(i=X)&&i.__esModule?i:{default:i};function o(e,t){return Array.isArray(e)?e.map(function(e){return o(e,t)}):(0,H.isObject)(e)?Object.keys(e).reduce(function(i,n){return i[n]=o(e[n],t),i},{}):"string"==typeof e&&e.startsWith("$")?(0,H.selectRef)(e.substr(1),t):e}});u(ee);ee.toRelCondition;var te=f(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,H.flatMap)(e,function(e){var i=e.conditions,o=e.event;return(0,n.default)(i,t)?(0,H.toArray)(o):[]})};var i,n=(i=ee)&&i.__esModule?i:{default:i}});u(te);var ie=f(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i,n=(i=te)&&i.__esModule?i:{default:i};t.default=function e(t,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addRule=function(e){o.validate(e),o.rules.push(e)},this.run=function(e){return Promise.resolve((0,n.default)(o.rules,e))},this.rules=[],this.validate=function(e){var t=null!=e;return(0,H.isDevelopment)()&&t?((0,H.isObject)(e)||(0,H.toError)("Expected valid schema object, but got - "+e),function(t){(0,K.validatePredicates)([t.conditions],e),(0,K.validateConditionFields)([t.conditions],e)}):function(){}}(i),t&&(0,H.toArray)(t).forEach(function(e){return o.addRule(e)})}});u(ie);var ne=u(f(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i,n=(i=ie)&&i.__esModule?i:{default:i};t.default=n.default})),oe=t.useState,le=t.useEffect,ae=function(){var e=c(oe([]),2),t=e[0],i=e[1],n=[],o={};return{addRules:function(e){e.forEach(function(e){e.condition&&(n.push(e.rule),e.rule.facts&&(o=Object.assign(o,e.rule.facts)))})},useValidation:function(e){return le(function(){var e,t;(e=new ne(n),t=[],new Promise(function(i){e.run(o).then(function(e){e.forEach(function(e){t.push(e.message)})}).finally(function(){i(t)})})).then(function(e){return i(e)})},[e]),t}}},re=t.useState,se=function(e){var i=e.fieldComponent,n=c(re(e.fieldItemData[0]||""),2),o=n[0],l=n[1],a=ae(),r=a.useValidation(o);a.addRules([{rule:w(o,e.fieldConfig.label),condition:"1"===e.fieldConfig.required}]);var d=m(e.htmlAttr.class,{"pods-validate-error":r.length});return t.createElement("div",{className:"pods-dfv-container"},t.createElement(i,s({value:o,setValue:l,validation:a,className:d},e)),t.createElement(h,{messages:r}))};function de(e,n,o){var l=t.createFactory(e);i.render(t.createElement(se,s({fieldComponent:l},o)),n)}var ce=function(e){return{path:e,getFrom:function(t){return e.split(".").reduce(function(e,t){return e[t]},t)},createTree:function(t){return e.split(".").reduceRight(function(e,t){return r({},t,e)},t)}}},ue=ce("ui"),fe=ce("podMeta"),me=ce("options"),pe=ce("fields"),he=ce("".concat(fe.path,".name")),ve=ce("".concat(ue.path,".activeTab")),ge=ce("".concat(ue.path,".saveStatus")),be=ce("".concat(ue.path,".tabs")),we=ce("".concat(be.path,".byName")),ye={SET_ACTIVE_TAB:"SET_ACTIVE_TAB",SET_SAVE_STATUS:"SET_SAVE_STATUS",SET_OPTION_ITEM_VALUE:"SET_OPTION_ITEM_VALUE"},_e={NONE:"",SAVING:"SAVING",SAVE_SUCCESS:"SAVE_SUCCESS",SAVE_ERROR:"SAVE_ERROR"},Ee={SET_POD_NAME:"SET_POD_NAME",SET_POD_META_VALUE:"SET_POD_META_VALUE"},Ce={activeTab:{MANAGE_FIELDS:"manage-fields",LABELS:"labels",ADMIN_UI:"admin-ui",ADVANCED_OPTIONS:"advanced",AUTO_TEMPLATE_OPTIONS:"pods-pfat",REST_API:"rest-api"}.MANAGE_FIELDS,saveStatus:_e.NONE},Oe=wp.data.combineReducers,Ae=function(e,t,i){return d({},e,r({},t,i))},Se=Oe({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=ye,n=_e;switch(t.type){case i.SET_ACTIVE_TAB:var o=Ce.activeTab;return-1!==e.tabs.orderedList.indexOf(t.activeTab)&&(o=t.activeTab),d({},e,{activeTab:o});case i.SET_SAVE_STATUS:var l=t.saveStatus;return Object.values(n).includes(l)||(l=Ce.saveStatus),d({},e,{saveStatus:l});default:return e}},podMeta:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Ee;switch(t.type){case i.SET_POD_NAME:return d({},e,{name:t.name});case i.SET_POD_META_VALUE:return d({},e,r({},t.key,t.value));default:return e}},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=ye;switch(t.type){case i.SET_OPTION_ITEM_VALUE:var n=t.optionName,o=t.itemName,l=t.itemValue;return d({},e,r({},n,Ae(n,o,l)));default:return e}},fields:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}),xe=function(e,t){return me.getFrom(e)[t]},ke=function(e,t){return we.getFrom(e)[t]},Ne=function(e){return be.getFrom(e).orderedList},Te=function(e,t){return ke(e,t).optionList},Pe=Object.freeze({getState:function(e){return e},getOption:xe,getOptionItemValue:function(e,t,i){return me.getFrom(e)[t][i]},getOptionValue:function(e,t){return me.getFrom(e)[t].value},getActiveTab:function(e){return ve.getFrom(e)},getTab:ke,getOrderedTabList:Ne,getTabs:function(e){return Ne(e).map(function(t){return ke(e,t)})},getOrderedTabOptionList:Te,getTabOptions:function(e,t){return Te(e,t).map(function(t){return xe(e,t)})},getSaveStatus:function(e){return ge.getFrom(e)},isSaving:function(e){return ge.getFrom(e)===_e.SAVING},getPodName:function(e){return he.getFrom(e)},getPodMetaValue:function(e,t){return fe.getFrom(e)[t]},getFields:function(e){return pe.getFrom(e)}}),Me=function(e,t,i){return{type:ye.SET_OPTION_ITEM_VALUE,optionName:e,itemName:t,itemValue:i}},Ve=Object.freeze({setActiveTab:function(e){return{type:ye.SET_ACTIVE_TAB,activeTab:e}},setSaveStatus:function(e){return{type:ye.SET_SAVE_STATUS,saveStatus:e}},setOptionValue:function(e,t){return Me(e,"value",t)},setOptionItemValue:Me,setPodName:function(e){return{type:Ee.SET_POD_NAME,name:e}},setPodMetaValue:function(e,t){return{type:Ee.SET_POD_META_VALUE,key:e,value:t}}}),je=wp.data.registerStore,Ie=function(e){var t=n.merge(ue.createTree(Ce),e);return je("pods/edit-pod",{reducer:Se,selectors:Pe,actions:Ve,initialState:t})};var Re,Fe=wp.data&&wp.data.select("core/editor"),Le=function(){Re=Fe.isCurrentPostPublished()?wp.data.subscribe(Be):wp.data.subscribe(Ue)};function De(){var e=Fe.getCurrentPostAttribute("featured_media"),t="";if(!e)return t;var i=wp.data.select("core").getMedia(e);if(i){var n=wp.hooks.applyFilters("editor.PostFeaturedImage.imageSize","post-thumbnail","");t=i.media_details&&i.media_details.sizes&&i.media_details.sizes[n]?i.media_details.sizes[n].source_url:i.source_url}return t}function Ue(){Fe.isCurrentPostPublished()&&(Re(),$e({icon:De(),link:Fe.getPermalink(),edit_link:"post.php?post=".concat(Fe.getCurrentPostId(),"&action=edit&pods_modal=1"),selected:!0}))}function Be(){Be.wasSaving?Fe.isSavingPost()||(Be.wasSaving=!1,Fe.didPostSaveRequestSucceed()&&(Re(),$e({icon:De()}))):Be.wasSaving=!(!Fe.isSavingPost()||Fe.isAutosavingPost())}function $e(e){var t={id:Fe.getCurrentPostId(),name:Fe.getCurrentPostAttribute("title")},i=Object.assign(t,e);window.parent.jQuery(window.parent).trigger("dfv:modal:update",i)}var ze,qe=Marionette.CollectionView.extend({childViewEventPrefix:!1,initialize:function(e){this.fieldModel=e.fieldModel,this.childViewOptions={fieldModel:e.fieldModel}}}),Qe=Marionette.View.extend({childViewEventPrefix:!1,serializeData:function(){var e=this.options.fieldModel,t=this.model?this.model.toJSON():{};return t.htmlAttr=e.get("htmlAttr"),t.fieldConfig=e.get("fieldConfig"),t}}),We=Marionette.View.extend({childViewEventPrefix:!1,initialize:function(e){this.fieldItemData=e.fieldItemData}}),Ge=Backbone.Model.extend({defaults:{id:0,icon:"",name:"",edit_link:"",link:"",download:""}}),Je=Backbone.Collection.extend({model:Ge}),Ze=Qe.extend({childViewEventPrefix:!1,tagName:"li",template:_.template('<input name="<%- htmlAttr.name %>[<%- id %>][id]" data-name-clean="<%- htmlAttr.name_clean %>-id" id="<%- htmlAttr.id %>-<%- id %>-id" class="<%- htmlAttr.class %>" type="hidden" value="<%- id %>">\n<ul class="pods-dfv-list-meta media-item">\n\t<% if ( 1 != fieldConfig.file_limit ) { %>\n\t\t<li class="pods-dfv-list-col pods-dfv-list-handle"><span><%- PodsI18n.__( \'Reorder\' ) %></span></li>\n\t<% } %>\n\t<li class="pods-dfv-list-col pods-dfv-list-icon"><img class="pinkynail" src="<%- icon %>" alt="<%- PodsI18n.__( \'Icon\' ) %>"></li>\n\t<li class="pods-dfv-list-col pods-dfv-list-name">\n\t\t<% if ( 0 != fieldConfig.file_edit_title ) { %>\n\t\t\t<input name="<%- htmlAttr.name %>[<%- id %>][title]" data-name-clean="<%- htmlAttr.name_clean %>-title" id="pods-form-ui-<%- htmlAttr.name_clean %>-<%- id %>-title" class="pods-form-ui-field-type-text pods-form-ui-field-name-<%- htmlAttr.name_clean %>-title" type="text" value="<%- name %>" tabindex="2" maxlength="255">\n\t\t<% } else { %>\n\t\t\t<%- name %>\n\t\t<% } %>\n\t</li>\n\t<li class="pods-dfv-list-col pods-dfv-list-actions">\n\t\t<ul>\n\t\t\t<li class="pods-dfv-list-col pods-dfv-list-remove">\n\t\t\t\t<a href="#remove" title="<%- PodsI18n.__( \'Deselect\' ) %>"><%- PodsI18n.__( \'Deselect\' ) %></a>\n\t\t\t</li>\n\t\t\t<% if ( 1 == fieldConfig.file_linked && \'\' != download ) { %>\n\t\t\t\t<li class="pods-dfv-list-col pods-dfv-list-download">\n\t\t\t\t\t<a href="<%- download %>" target="_blank" title="<%- PodsI18n.__( \'Download\' ) %>"><%- PodsI18n.__( \'Download\' ) %></a>\n\t\t\t\t</li>\n\t\t\t<% } %>\n\t\t\t<% if ( 1 == fieldConfig.file_show_edit_link && \'\' != edit_link ) { %>\n\t\t\t\t<li class="pods-dfv-list-col pods-dfv-list-edit">\n\t\t\t\t\t<a href="<%- edit_link %>" target="_blank" title="<%- PodsI18n.__( \'Edit\' ) %>"><%- PodsI18n.__( \'Edit\' ) %></a>\n\t\t\t\t</li>\n\t\t\t<% } %>\n\t\t</ul>\n\t</li>\n</ul>\n'),className:"pods-dfv-list-item",ui:{dragHandle:".pods-dfv-list-handle",editLink:".pods-dfv-list-edit-link",viewLink:".pods-dfv-list-link",downloadLink:".pods-dfv-list-download",removeButton:".pods-dfv-list-remove",itemName:".pods-dfv-list-name"},triggers:{"click @ui.removeButton":"remove:file:click"}}),He=qe.extend({childViewEventPrefix:!1,tagName:"ul",className:"pods-dfv-list",childView:Ze,childViewTriggers:{"remove:file:click":"childview:remove:file:click"},onAttach:function(){var e=this.options.fieldModel.get("fieldConfig"),t="y";1!=e.file_limit&&("tiles"==e.file_field_template&&(t=""),this.$el.sortable({containment:"parent",axis:t,scrollSensitivity:40,tolerance:"pointer",opacity:.6}))}}),Ye=Qe.extend({childViewEventPrefix:!1,tagName:"div",template:_.template('<a class="button pods-dfv-list-add" href="#" tabindex="2"><%= fieldConfig.file_add_button %></a>'),ui:{addButton:".pods-dfv-list-add"},triggers:{"click @ui.addButton":"childview:add:file:click"}}),Ke=Marionette.Object.extend({constructor:function(e){this.browseButton=e.browseButton,this.uiRegion=e.uiRegion,this.fieldConfig=e.fieldConfig,Marionette.Object.call(this,e)}}),Xe=Backbone.Model.extend({defaults:{id:0,filename:"",progress:0,errorMsg:""}}),et=Marionette.View.extend({model:Xe,tagName:"li",template:_.template('<ul class="pods-dfv-list-meta media-item">\n\t<% if ( \'\' === errorMsg ) { %>\n\t\t<li class="pods-dfv-list-col pods-progress"><div class="progress-bar" style="width: <%- progress %>%;"></div></li>\n\t<% } %>\n\t<li class="pods-dfv-list-col pods-dfv-list-name"><%- filename %></li>\n</ul>\n<% if ( \'\' !== errorMsg ) { %>\n\t<div class="error"><%- errorMsg %></div>\n<% } %>\n'),attributes:function(){return{class:"pods-dfv-list-item",id:this.model.get("id")}},modelEvents:{change:"onModelChanged"},onModelChanged:function(){this.render()}}),tt=Marionette.CollectionView.extend({tagName:"ul",className:"pods-dfv-list pods-dfv-list-queue",childView:et}),it=[Ke.extend({plupload:{},fileUploader:"plupload",initialize:function(){this.fieldConfig.plupload_init.browse_button=this.browseButton,this.plupload=new plupload.Uploader(this.fieldConfig.plupload_init),this.plupload.init(),this.plupload.bind("FilesAdded",this.onFilesAdded,this),this.plupload.bind("UploadProgress",this.onUploadProgress,this),this.plupload.bind("FileUploaded",this.onFileUploaded,this)},onFilesAdded:function(e,t){var i,n,o;n=new Backbone.Collection,jQuery.each(t,function(e,t){i=new Xe({id:t.id,filename:t.name}),n.add(i)}),(o=new tt({collection:n})).render(),this.uiRegion.reset(),this.uiRegion.show(o),this.queueCollection=n,e.refresh(),e.start()},onUploadProgress:function(e,t){this.queueCollection.get(t.id).set({progress:t.percent})},onFileUploaded:function(e,t,i){var n,o=this.queueCollection.get(t.id),l=i.response,r=[];if("Error: "===i.response.substr(0,7))l=l.substr(7),window.console&&console.log(l),o.set({progress:0,errorMsg:l});else if("<e>"===i.response.substr(0,3))l=jQuery(l).text(),window.console&&console.log(l),o.set({progress:0,errorMsg:l});else{if("object"!==a(n=null!==(n=l.match(/{.*}$/))&&0<n.length?jQuery.parseJSON(n[0]):{})||jQuery.isEmptyObject(n))return window.console&&console.log(l),window.console&&console.log(n),void o.set({progress:0,errorMsg:PodsI18n.__("Error uploading file: ")+t.name});r={id:n.ID,icon:n.thumbnail,name:n.post_title,edit_link:n.edit_link,link:n.link,download:n.download},o.trigger("destroy",o),this.trigger("added:files",r)}}}),Ke.extend({mediaObject:{},fileUploader:"attachment",invoke:function(){void 0===wp.Uploader.defaults.filters.mime_types&&(wp.Uploader.defaults.filters.mime_types=[{title:PodsI18n.__("Allowed Files"),extensions:"*"}]);var e=wp.Uploader.defaults.filters.mime_types[0].extensions;wp.Uploader.defaults.filters.mime_types[0].extensions=this.fieldConfig.limit_extensions,this.mediaObject=wp.media({title:this.fieldConfig.file_modal_title,multiple:1!=this.fieldConfig.file_limit,library:{type:this.fieldConfig.limit_types},button:{text:this.fieldConfig.file_modal_add_button}}),this.mediaObject.once("select",this.onMediaSelect,this),this.mediaObject.open(),this.mediaObject.content.mode(this.fieldConfig.file_attachment_tab),wp.Uploader.defaults.filters.mime_types[0].extensions=e},onMediaSelect:function(){var e=this.mediaObject.state().get("selection"),t=[];e&&(e.each(function(e){var i,n=e.attributes.sizes;i=e.attributes.icon,void 0!==n&&(void 0!==n.thumbnail&&void 0!==n.thumbnail.url?i=n.thumbnail.url:void 0!==n.full&&void 0!==n.full.url&&(i=n.full.url)),t.push({id:e.attributes.id,icon:i,name:e.attributes.title,edit_link:e.attributes.editLink,link:e.attributes.link,download:e.attributes.url})}),this.trigger("added:files",t))}})],nt=We.extend({childViewEventPrefix:!1,template:_.template('<div class="pods-ui-file-list pods-field-template-<%- fieldConfig.file_field_template %>"></div>\n<div class="pods-ui-region"></div>\n<div class="pods-ui-form"></div>\n'),regions:{list:".pods-ui-file-list",uiRegion:".pods-ui-region",form:".pods-ui-form"},childViewEvents:{"childview:remove:file:click":"onChildviewRemoveFileClick","childview:add:file:click":"onChildviewAddFileClick"},uploader:{},onBeforeRender:function(){void 0===this.collection&&(this.collection=new Je(this.fieldItemData))},onRender:function(){var e=new He({collection:this.collection,fieldModel:this.model}),t=new Ye({fieldModel:this.model});this.showChildView("list",e),this.showChildView("form",t),this.uploader=this.createUploader(),this.listenTo(this.uploader,"added:files",this.onAddedFiles)},onChildviewRemoveFileClick:function(e){this.collection.remove(e.model)},onChildviewAddFileClick:function(){"function"==typeof this.uploader.invoke&&this.uploader.invoke()},onAddedFiles:function(e){var t,i,n=+this.model.get("fieldConfig").file_limit;(t=this.collection.clone()).add(e),i=0===n?t.models:t.filter(function(e){return t.indexOf(e)>=t.length-n}),this.collection.reset(i)},createUploader:function(){var e,t=this.model.get("fieldConfig"),i=t.file_uploader;if(jQuery.each(it,function(t,n){if(i===n.prototype.fileUploader)return e=n,!1}),void 0!==e)return this.uploader=new e({browseButton:this.getRegion("form").getEl(".pods-dfv-list-add").get(),uiRegion:this.getRegion("uiRegion"),fieldConfig:t}),this.uploader;throw"Could not locate file uploader '".concat(i,"'")}}),ot=wp.media.view.Modal.extend({close:function(e){var t=wp.media.view.Modal.prototype.close.apply(this,e);return e&&e.escape&&window.parent.jQuery(window.parent).trigger("dfv:modal:cancel"),t}}),lt=wp.media.view.Frame.extend({className:"pods-modal-frame",template:_.template('<div class="media-frame-title" /><div class="media-frame-iframe" />'),regions:["title","iframe"],initialize:function(){wp.media.view.Frame.prototype.initialize.apply(this,arguments),this.$el.addClass("wp-core-ui"),this.initState(),this.initModal(),this.on("iframe:create:default",this.iframeContent,this),this.iframe.mode("default"),this.on("title:create:default",this.createTitle,this),this.title.mode("default"),this.on("title:render",function(e){e.$el.append('<span class="dashicons dashicons-arrow-down"></span>')})},initState:function(){var e=this.options.title||PodsI18n.__("Add New Record"),t=this.options.src||"/";this.states.add([new wp.media.controller.State({id:"default",title:e,src:t})]),this.options.state="default"},initModal:function(){this.modal=new ot({controller:this}),this.modal.content(this)},render:function(){return!this.state()&&this.options.state&&this.setState(this.options.state),wp.media.view.Frame.prototype.render.apply(this,arguments)},iframeContent:function(e){e.view=new wp.media.view.Iframe({controller:this})},createTitle:function(e){e.view=new wp.media.View({controller:this,tagName:"h1"})}}),at=Backbone.Model.extend({defaults:{id:0,name:"",icon:"",link:"",edit_link:"",selected:!1},toggleSelected:function(){this.set("selected",!this.get("selected"))}}),rt=Backbone.Collection.extend({model:at,setSelected:function(e){this.map(function(t){var i=_.contains(e,t.get("id")+"");t.set("selected",i)})},filterBySelected:function(){var e=this.filter(function(e){return e.get("selected")});return new rt(e)},filterByUnselected:function(){var e=this.filter(function(e){return!e.get("selected")});return new rt(e)}}),st=Backbone.Model.extend({defaults:{view_name:"select",iframe_src:"",pick_format_type:"single",pick_show_icon:!1,pick_show_view_link:!1,pick_show_edit_link:!1}}),dt=Qe.extend({childViewEventPrefix:!1,tagName:"li",template:_.template('<div class="pods-field pods-boolean">\n\t<input name="<%- htmlAttr.name %>" data-name-clean="<%- htmlAttr.name_clean %>" data-label="<%- fieldConfig.label %>" id="<%- htmlAttr.id %><%= ordinal %>" class="pods-form-ui-field-type-pick pods-form-ui-field-name-<%- htmlAttr.name_clean %>" type="radio"\n\t\t\t<% if ( selected ) { %>\n\t\t\t\tchecked="CHECKED"\n\t\t\t<% } %>\n\t\t\tvalue="<%- id %>" tabindex="2">\n\t<label class="pods-form-ui-label pods-form-ui-label-<%- htmlAttr.id %><%= ordinal %>" for="<%- htmlAttr.id %><%= ordinal %>">\n\t\t<%= name %>\n\t</label>\n</div>\n'),templateContext:function(){return{ordinal:this.model.collection.indexOf(this.model)+1}},modelChanged:function(){this.render()}}),ct=qe.extend({childViewEventPrefix:!1,tagName:"ul",className:"pods-radio",childView:dt}),ut=Qe.extend({childViewEventPrefix:!1,tagName:"li",template:_.template('<div class="pods-field pods-boolean">\n\t<input name="<%- htmlAttr.name %>[<%= ordinal %>]"\n\t\t<%= selected ? \'checked="checked"\' : \'\' %>\n\t\tdata-name-clean="<%- htmlAttr.name_clean %>" data-label="<%- fieldConfig.label %>" id="<%- htmlAttr.id %><%= ordinal %>" class="pods-form-ui-field-type-pick" type="checkbox" tabindex="2" value="<%- id %>">\n\t<label class="pods-form-ui-label" for="<%- htmlAttr.id %><%= ordinal %>">\n\t\t<%= name %>\n\t</label>\n</div>\n'),className:"pods-pick",ui:{checkbox:"input.pods-form-ui-field-type-pick"},triggers:{"click @ui.checkbox":"toggle:selected"},modelEvents:{change:"modelChanged"},templateContext:function(){return{ordinal:this.model.collection.indexOf(this.model)}},modelChanged:function(){this.render()}}),ft=qe.extend({childViewEventPrefix:!1,tagName:"ul",className:"pods-checkbox-view",childView:ut,childViewEvents:{"toggle:selected":"onChildviewToggleSelected"},onAttach:function(){this.validateSelectionLimit()||this.selectionLimitOver()},onChildviewToggleSelected:function(e){e.model.toggleSelected(),this.validateSelectionLimit()?this.selectionLimitUnder():this.selectionLimitOver()},validateSelectionLimit:function(){var e,t;return e=+this.fieldModel.get("fieldConfig").pick_limit,t=this.collection.filterBySelected().length,0===e||t<e},selectionLimitOver:function(){this.$el.find("input:checkbox:not(:checked)").prop("disabled",!0),this.trigger("selection:limit:over",this)},selectionLimitUnder:function(){this.$el.find("input:checkbox").prop("disabled",!1),this.trigger("selection:limit:under",this)}}),mt=Qe.extend({childViewEventPrefix:!1,tagName:"option",template:!1,initialize:function(e){this.$el.val(this.model.get("id")),this.$el.html(this.model.get("name")),this.model.get("selected")&&this.$el.prop("selected","selected")}}),pt=qe.extend({childViewEventPrefix:!1,tagName:"optgroup",childView:mt,attributes:function(){return{label:this.model.get("label")}}}),ht=Marionette.CollectionView.extend({childViewEventPrefix:!1,tagName:"select",triggers:{change:{event:"change:selected",stopPropagation:!1}},multiLastValidSelection:[],setCollection:function(e){this.collection=e},initialize:function(e){this.fieldModel=e.fieldModel,this.fieldConfig=this.fieldModel.get("fieldConfig")},childView:function(e){return this.fieldConfig.optgroup?pt:mt},childViewOptions:function(e,t){var i={fieldModel:this.fieldModel};return this.fieldConfig.optgroup&&(i.collection=new rt(e.get("collection"))),i},serializeData:function(){var e=this.options.fieldModel,t=this.model?this.model.toJSON():{};return t.htmlAttr=e.get("attributes"),t.fieldConfig=e.get("fieldConfig"),t},attributes:function(){var e=this.options.fieldModel,t=e.get("htmlAttr"),i=e.get("fieldConfig"),n=t.name;return"multi"===i.pick_format_type&&(n+="[]"),{name:n,class:t.class,"data-name-clean":t.name_clean,id:t.id,tabindex:"2",multiple:"multi"===i.pick_format_type}},onAttach:function(){var e=this.fieldConfig.view_name,t=this.fieldConfig.pick_format_type;"select2"===e&&this.setupSelect2(),"select"===e&&"multi"===t&&(this.multiLastValidSelection=this.$el.val()),this.validateSelectionLimit()||this.selectionLimitOver()},onChangeSelected:function(){var e=+this.fieldConfig.pick_limit,t=this.fieldConfig.view_name,i=this.fieldConfig.pick_format_type;if("select"===t&&"multi"===i&&null!==this.$el.val()&&0!==e&&e<this.$el.val().length)return this.$el.val(this.multiLastValidSelection),window.alert("".concat(PodsI18n.__("You can only select")," ").concat(sprintf(PodsI18n._n("%s item","%s items",e),e))),void this.trigger("childview:change:selected",this);this.collection.setSelected(this.$el.val()),this.multiLastValidSelection=this.$el.val(),this.validateSelectionLimit()?this.selectionLimitUnder():this.selectionLimitOver(),this.trigger("childview:change:selected",this)},onBeforeDetach:function(){this.$el.selectWoo("destroy")},validateSelectionLimit:function(){var e,t;return e=+this.fieldConfig.pick_limit,t=this.collection.filterBySelected().length,0===e||t<e},selectionLimitOver:function(){var e=this.fieldConfig.view_name,t=this.fieldConfig.pick_format_type;"select"===e&&"multi"===t&&this.$el.find("option:not(:selected)").prop("disabled",!0),this.trigger("childview:selection:limit:over",this)},selectionLimitUnder:function(){var e=this.fieldConfig.view_name,t=this.fieldConfig.pick_format_type;"select"===e&&"multi"===t&&this.$el.find("option").prop("disabled",!1),this.trigger("childview:selection:limit:under",this)},filterAjaxList:function(e){var t=this.collection.filterBySelected(),i=[];return _.each(e.results,function(e){e.text=e.name,t.get(e.id)||i.push(e)}),{results:i}},setupSelect2:function(){var e,t,i=this,n=this.$el,o=this.options.fieldModel.get("fieldConfig"),l=o.ajax_data,a=o.select2_overrides,r=o.pick_limit,s="single"===o.pick_format_type;0===this.collection.filterBySelected().length&&s&&n.prepend('<option selected="selected">'),t={maximumSelectionLength:s?void 0:r,placeholder:o.limitDisable?"".concat(PodsI18n.__("You can only select")," ").concat(sprintf(PodsI18n._n("%s item","%s items",r),r)):"".concat(PodsI18n.__("Search")," ").concat(o.label,"..."),allowClear:s,disabled:o.limitDisable,tags:o.pick_taggable,escapeMarkup:function(e){return e}},l.ajax&&jQuery.extend(t,{minimumInputLength:l.minimum_input_length,ajax:{url:ajaxurl+"?pods_ajax=1",type:"POST",dataType:"json",delay:l.delay,data:function(e){return{_wpnonce:l._wpnonce,action:"pods_relationship",method:"select2",pod:l.pod,field:l.field,uri:l.uri,id:l.id,query:e.term}},processResults:function(e,t){return i.filterAjaxList(e,t)}}}),n.selectWoo(jQuery.extend(!0,t,a)),(e=n.parent().find("ul.select2-selection__rendered")).sortable({containment:"parent"}),e.on("sortstop",function(){var t=e.find(".select2-selection__choice").get().reverse();jQuery(t).each(function(){var e=jQuery(this).data("data").id,t=n.find('option[value="'+e+'"]')[0];n.prepend(t)})})}}),vt=Qe.extend({childViewEventPrefix:!1,tagName:"li",className:"pods-dfv-list-item pods-relationship",template:_.template('<input\n\t\t<% if ( \'single\' === fieldConfig.pick_format_type ) { %>\n\t\t\tname="<%- htmlAttr.name %>" id="<%- htmlAttr.id %>"\n\t\t<% } else { %>\n\t\t\tname="<%- htmlAttr.name %>[<%= ordinal %>]" id="<%- htmlAttr.id %><%= ordinal %>"\n\t\t<% } %>\n\t\tdata-name-clean="<%- htmlAttr.name_clean %>" type="hidden" value="<%- id %>">\n<ul class="pods-dfv-list-meta relationship-item">\n\t<% if ( 1 != fieldConfig.pick_limit ) { %>\n\t\t<li class="pods-dfv-list-col pods-dfv-list-handle"><span><%- PodsI18n.__( \'Reorder\' ) %></span></li>\n\t<% } %>\n\t<% if ( 1 == fieldConfig.pick_show_icon ) { %>\n\t\t<li class="pods-dfv-list-col pods-dfv-list-icon">\n\t\t\t<% if ( \'\' == icon ) { %>\n\t\t\t\t<% if ( /^dashicons/.test( fieldConfig.default_icon ) ) { %>\n\t\t\t\t\t<span class="pinkynail dashicons <%- fieldConfig.default_icon %>"></span>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<img class="pinkynail" src="<%- fieldConfig.default_icon %>" alt="Icon">\n\t\t\t\t<% } %>\n\t\t\t<% } else { %>\n\t\t\t\t<% if ( /^dashicons/.test( icon ) ) { %>\n\t\t\t\t\t<span class="pinkynail dashicons <%- icon %>"></span>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<img class="pinkynail" src="<%- icon %>" alt="Icon">\n\t\t\t\t<% } %>\n\t\t\t<% } %>\n\t\t</li>\n\t<% } %>\n\t<li class="pods-dfv-list-col pods-dfv-list-name">\n\t\t<%= name %>\n\t</li>\n\t<li class="pods-dfv-list-col pods-dfv-list-remove"><a href="#remove" title="<%- PodsI18n.__( \'Deselect\' ) %>"><%- PodsI18n.__( \'Deselect\' ) %></a></li>\n\t<% if ( 1 == fieldConfig.pick_show_view_link && \'\' != link ) { %>\n\t\t<li class="pods-dfv-list-col pods-dfv-list-link"><a href="<%- link %>" title="<%- PodsI18n.__( \'View\' ) %>" target="_blank"><%- PodsI18n.__( \'View\' ) %></a></li>\n\t<% } %>\n\t<% if ( 1 == fieldConfig.pick_show_edit_link && \'\' != edit_link ) { %>\n\t\t<li class="pods-dfv-list-col pods-dfv-list-edit"><a href="<%- edit_link %>" title="<%- PodsI18n.__( \'Edit\' ) %>" target="_blank"><%- PodsI18n.__( \'Edit\' ) %></a></li>\n\t<% } %>\n</ul>\n'),ui:{removeButton:".pods-dfv-list-remove a",editButton:".pods-dfv-list-edit a"},triggers:{"click @ui.removeButton":"remove:item:click","click @ui.editButton":"edit:item:click"},templateContext:function(){return{ordinal:this.model.collection.indexOf(this.model)}}}),gt=qe.extend({childViewEventPrefix:!1,tagName:"ul",className:"pods-dfv-list pods-relationship",childView:vt,childViewTriggers:{"remove:item:click":"childview:remove:item:click","edit:item:click":"childview:edit:item:click"},filter:function(e,t,i){return e.attributes.selected},onAttach:function(){1!==this.options.fieldModel.get("fieldConfig").pick_limit&&this.$el.sortable({containment:"parent",axis:"y",scrollSensitivity:40,tolerance:"pointer",opacity:.6})}}),bt=Qe.extend({childViewEventPrefix:!1,tagName:"div",className:"podsform-dfv-list-relationship-container",ui:{addButton:"a.pods-related-add-new"},template:_.template('<a href="/wp-admin?pods_modal=1" class="button pods-related-add-new pods-modal" data-pod-id="<%- fieldConfig.pod_id %>" data-field-id="<%- fieldConfig.id %>" data-item-id="<%- fieldConfig.item_id %>">\n\t<%- PodsI18n.__( \'Add New\' ) %>\n</a>\n'),triggers:{"click @ui.addButton":"add:new:click"},disable:function(){this.getUI("addButton").addClass("button-disabled")},enable:function(){this.getUI("addButton").removeClass("button-disabled")},onAddNewClick:function(){this.getUI("addButton").hasClass("button-disabled")||this.trigger("childview:add:new",this)}}),wt={checkbox:ft,select:ht,select2:ht,radio:ct,list:gt},yt=We.extend({childViewEventPrefix:!1,template:_.template('<%if ( fieldConfig.view_name === \'list\' ) { %>\n\t<div class="pods-ui-list-autocomplete"></div>\n<% } %>\n\n<div class="pods-pick-values"></div>\n\n<% if ( fieldConfig.iframe_src != \'\' ) { %>\n\t<div class="pods-ui-add-new"></div>\n<% } %>'),regions:{autocomplete:".pods-ui-list-autocomplete",list:".pods-pick-values",addNew:".pods-ui-add-new"},childViewEvents:{"childview:remove:item:click":"onChildviewRemoveItemClick","childview:edit:item:click":"onChildviewEditItemClick","childview:selection:limit:over":"onChildviewSelectionLimitOver","childview:selection:limit:under":"onChildviewSelectionLimitUnder","childview:change:selected":"onChildviewChangeSelected","childview:add:new":"onChildviewAddNew"},onBeforeRender:function(){void 0===this.collection&&(this.collection=new rt(this.fieldItemData))},onRender:function(){this.fieldConfig=new st(this.model.get("fieldConfig")),""!==this.fieldConfig.get("iframe_src")&&1==this.fieldConfig.get("pick_allow_add_new")&&this.showAddNew(),"list"===this.fieldConfig.get("view_name")&&this.buildAutocomplete(),this.showList()},buildAutocomplete:function(){var e,t,i,n,l=+this.fieldConfig.get("pick_limit");e={view_name:"select2",pick_format_type:"multi",selectFromExisting:!0,ajax_data:this.fieldConfig.get("ajax_data"),select2_overrides:this.fieldConfig.get("select2_overrides"),label:this.fieldConfig.get("label"),pick_limit:l},this.collection.filterBySelected().length>=l&&0!==l?(e.limitDisable=!0,this.onChildviewSelectionLimitOver()):this.onChildviewSelectionLimitUnder(),t=new o({fieldConfig:e}),i=this.collection.filterByUnselected(),(n=new ht({collection:i,fieldModel:t})).filterAjaxList=this.filterAjaxList.bind(this),this.showChildView("autocomplete",n)},showList:function(){var e,t;if(e=this.fieldConfig.get("view_name"),void 0===wt[e])throw new Error('Invalid view name "'.concat(e,'"'));t=new(0,wt[e])({collection:this.collection,fieldModel:this.model}),this.showChildView("list",t)},showAddNew:function(){var e=new bt({fieldModel:this.model});this.showChildView("addNew",e)},filterAjaxList:function(e){var t=this.collection.filterBySelected(),i=[];return _.each(e.results,function(e){e.text=e.name,t.get(e.id)||i.push(e)}),this.collection.add(i),this.getChildView("autocomplete").setCollection(this.collection.filterByUnselected()),{results:i}},onChildviewSelectionLimitOver:function(e){var t=this.getChildView("addNew");t&&t.disable()},onChildviewSelectionLimitUnder:function(e){var t=this.getChildView("addNew");t&&t.enable()},onChildviewRemoveItemClick:function(e){e.model.toggleSelected(),this.getChildView("list").render(),"list"===this.fieldConfig.get("view_name")&&this.buildAutocomplete()},onChildviewAddNew:function(e){var t=this.model.get("fieldConfig");ze=new lt({title:t.iframe_title_add,src:t.iframe_src}),this.setModalListeners(),ze.modal.open()},onChildviewEditItemClick:function(e){var t=this.model.get("fieldConfig");ze=new lt({title:t.iframe_title_edit,src:e.ui.editButton.attr("href")}),this.setModalListeners(),ze.modal.open()},onChildviewChangeSelected:function(e){e.fieldConfig.selectFromExisting&&(_.defer(this.buildAutocomplete.bind(this)),this.getChildView("list").render())},setModalListeners:function(){jQuery(window).on("dfv:modal:update",this.modalSuccess.bind(this)),jQuery(window).on("dfv:modal:cancel",this.modalCancel.bind(this))},clearModalListeners:function(){jQuery(window).off("dfv:modal:update"),jQuery(window).off("dfv:modal:cancel")},modalSuccess:function(e,t){var i=this.collection.get(t.id);i?(i.set(t),this.getChildView("list").render()):this.collection.add(t),this.clearModalListeners(),ze.modal.close({})},modalCancel:function(){this.clearModalListeners()}}),_t=function(e){return t.createElement("input",{type:e.type,name:e.htmlAttr.name,id:e.htmlAttr.id,className:e.className,"data-name-clean":e.htmlAttr.name_clean,placeholder:e.fieldConfig.text_placeholder,maxLength:e.fieldConfig.text_max_length,value:e.value,readOnly:!!e.fieldConfig.readonly,onChange:e.onChange||function(t){e.setValue(t.target.value)},onBlur:e.onBlur,min:e.min,max:e.max})},Et=wp.i18n.__,Ct=(0,wp.data.withSelect)(function(e){return{saveStatus:e("pods/edit-pod").getSaveStatus()}})(function(e){switch(e.saveStatus){case _e.SAVING:return t.createElement("div",{id:"message",className:"notice notice-warning"},t.createElement("p",null,t.createElement("b",null,Et("Saving Pod...","pods"))));case _e.SAVE_SUCCESS:return t.createElement("div",{id:"message",className:"updated fade"},t.createElement("p",null,t.createElement("strong",null,Et("Success!","pods")),"Â ",Et("Pod saved successfully.","pods")));case _e.SAVE_ERROR:return t.createElement("div",{id:"message",className:"notice error"},t.createElement("p",null,t.createElement("b",null,Et("Save Error","pods"))));default:return null}}),Ot="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function At(){}function St(){}St.resetWarningCache=At;f(function(e){e.exports=function(){function e(e,t,i,n,o,l){if(l!==Ot){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:St,resetWarningCache:At};return i.PropTypes=i,i}()});var xt=t.useState,kt=wp.i18n.__,Nt=function(e){var i=c(xt(!1),2),n=i[0],o=i[1],l=c(xt(e.value),2),a=l[0],r=l[1];return n?t.createElement(Pt,{value:a,handleValueChange:function(e){r(e)},handleOkClick:function(){o(!1),e.updateValue(a)},handleCancelClick:function(t){t.preventDefault(),o(!1),r(e.value)}}):t.createElement(Tt,{value:e.value,handleEditClick:function(){o(!0)}})},Tt=function(e){return t.createElement("span",null,t.createElement("em",{onClick:e.handleEditClick,style:{cursor:"pointer"}},e.value),"Â ",t.createElement("input",{type:"button",className:"edit-slug-button button",value:kt("Edit","pods"),onClick:e.handleEditClick}))},Pt=function(e){return t.createElement("span",null,t.createElement("input",{type:"text",autoFocus:!0,id:"pods-form-ui-name",name:"name",className:"pods-form-ui-field pods-form-ui-field-type-text pods-form-ui-field-name-name",value:e.value,onChange:function(t){return e.handleValueChange(t.target.value)},onFocus:function(e){return e.target.select()},maxLength:"46",size:"25"}),"Â ",t.createElement("input",{type:"button",className:"save-button button",value:kt("OK","pods"),onClick:e.handleOkClick}),"Â ",t.createElement("a",{className:"cancel",onClick:e.handleCancelClick},kt("Cancel","pods")))},Mt=wp.i18n.__,Vt=wp.data,jt=Vt.withSelect,It=Vt.withDispatch,Rt=(0,wp.compose.compose)([jt(function(e){return{podName:e("pods/edit-pod").getPodName()}}),It(function(e){return{setPodName:e("pods/edit-pod").setPodName}})])(function(e){return t.createElement("h2",null,Mt("Edit Pod: ","pods"),"Â ",t.createElement(Nt,{value:e.podName,updateValue:e.setPodName}))}),Ft=function(e){return t.createElement("h2",{className:"nav-tab-wrapper pods-nav-tabs"},e.tabs.map(function(i){return t.createElement("a",{key:i.name,href:"#pods-".concat(i.name),className:(n=i.name,m("nav-tab pods-nav-tab-link",{"nav-tab-active":n===e.activeTab})),onClick:function(t){return function(t,i){t.preventDefault(),e.setActiveTab(i)}(t,i.name)}},i.titleText);var n}))},Lt=wp.i18n.__,Dt=(0,wp.data.withSelect)(function(e){return{fields:e("pods/edit-pod").getFields()}})(function(e){return t.createElement("div",{id:"pods-manage-fields"},t.createElement("p",{className:"pods-manage-row-add pods-float-right"},t.createElement("a",{href:"#add-field",className:"button-primary"},Lt("Add Field","pods"))),t.createElement("h2",null,Lt("Manage Fields","pods")),t.createElement(Ut,{fields:e.fields}))}),Ut=function(e){return t.createElement("table",{className:"widefat fixed pages"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{scope:"col",id:"cb",className:"manage-column field-cb check-column"},t.createElement("span",null,"Â ")),t.createElement("th",{scope:"col",id:"label",className:"manage-column field-label"},t.createElement("span",null,Lt("Label","pods"))),t.createElement("th",{scope:"col",id:"machine-name",className:"manage-column field-machine-name"},t.createElement("span",null,Lt("Name","pods"))),t.createElement("th",{scope:"col",id:"field-type",className:"manage-column field-field-type"},t.createElement("span",null,Lt("Field Type","pods"))))),t.createElement("tbody",{className:"pods-manage-list"},e.fields.map(function(e){return t.createElement(Bt,{key:e.id,id:e.id,fieldLabel:e.label,fieldName:e.name,required:e.required,type:e.type})})),t.createElement("tfoot",null,t.createElement("tr",null,t.createElement("th",{scope:"col",className:"manage-column field-cb check-column"},t.createElement("span",null,"Â ")),t.createElement("th",{scope:"col",className:"manage-column field-label"},t.createElement("span",null,Lt("Label","pods"))),t.createElement("th",{scope:"col",className:"manage-column field-machine-name"},t.createElement("span",null,Lt("Name","pods"))),t.createElement("th",{scope:"col",className:"manage-column field-field-type"},t.createElement("span",null,Lt("Field Type","pods"))))))},Bt=function(e){return t.createElement("tr",{className:"pods-manage-row pods-field-init"},t.createElement("th",{scope:"row",className:"check-field pods-manage-sort"},t.createElement("img",{src:"".concat(PODS_URL,"/ui/images/handle.gif"),alt:Lt("Move","pods")})),t.createElement("td",{className:"pods-manage-row-label"},t.createElement("strong",null,t.createElement("a",{title:Lt("Edit this field","pods"),className:"pods-manage-row-edit row-label",href:"#edit-field"},e.fieldLabel),"Â ",t.createElement("abbr",{title:"required",className:"required"+("1"===e.required?"":" hidden")},"*")),t.createElement("span",{className:"pods-manage-row-more"},"[id: ".concat(e.id,"]")),t.createElement($t,null)),t.createElement("td",{className:"pods-manage-row-name"},t.createElement("a",{title:Lt("Edit this field","pods"),className:"pods-manage-row-edit row-name",href:"#edit-field"},e.fieldName)),t.createElement("td",{className:"pods-manage-row-type"},e.type))},$t=function(){return t.createElement("div",{className:"row-actions"},t.createElement("span",{className:"edit"},t.createElement("a",{title:Lt("Edit this field","pods"),className:"pods-manage-row-edit",href:"#edit-field"},Lt("Edit","pods"))," |")," ",t.createElement("span",{className:"duplicate"},t.createElement("a",{title:_("Duplicate this field","pods"),className:"pods-manage-row-duplicate",href:"#duplicate-field"},Lt("Duplicate","pods"))," |")," ",t.createElement("span",{className:"trash pods-manage-row-delete"},t.createElement("a",{className:"submitdelete",title:Lt("Delete this field","pods"),href:"#delete-field"},Lt("Delete","pods"))))},zt=wp.components,qt=zt.Tooltip,Qt=zt.Dashicon,Wt=function(e){return t.createElement(qt,{text:e.helpText},t.createElement("span",null,t.createElement(Qt,{icon:"editor-help"})))},Gt=function(e){var i,n=e.fieldType,o=e.name,l=e.value,a=e.label,r=e.onChange,s=e.helpText;return t.createElement("div",{className:"pods-field-option"},t.createElement("label",{className:"pods-form-ui-label pods-form-ui-label-".concat(o),htmlFor:o},a,s&&"help"!==s&&t.createElement(Wt,{helpText:s})),"boolean"===n?t.createElement("input",{type:"checkbox",id:o,name:o,checked:(i=l,!!+i),onChange:r}):t.createElement("input",{type:"text",id:o,name:o,value:l,onChange:r}))},Jt=wp.i18n,Zt=Jt.sprintf,Ht=(0,Jt.__)("[MISSING DEFAULT]","pods"),Yt=function(e){var i=e.tabOptions,n=e.getOptionValue,o=e.setOptionValue,l=function(e,t,i){if(!t)return e;var o=n(t)||i||Ht;return Zt(e,o)};return i.map(function(e){return t.createElement(Kt,{key:e.name,fieldType:e.type,name:e.name,label:l(e.label,e.label_param,e.param_default),value:e.value||"",dependents:e["depends-on"],helpText:e.help,getOptionValue:n,setOptionValue:o})})},Kt=function(e){var i=e.fieldType,n=e.name,o=e.label,l=e.value,a=e.dependents,r=e.getOptionValue,s=e.setOptionValue;return Xt(a,r)?t.createElement(Gt,{fieldType:i,name:n,value:l,label:o,onChange:function(e){var t=e.target,i="checkbox"===t.type?t.checked:t.value;s(n,i)},helpText:e.helpText}):null},Xt=function(e,t){var i=!0;return e&&n.isObject(e)&&n.each(e,function(e,n){if(t(n)!=e)return i=!1,!1}),i},ei=function(e){return t.createElement("div",{id:"post-body-content",className:"pods-nav-tab-group pods-manage-field"},"manage-fields"===e.activeTab?t.createElement(Dt,null):t.createElement(Yt,{tabOptions:e.tabOptions,getOptionValue:e.getOptionValue,setOptionValue:e.setOptionValue}))},ti=wp.i18n.__,ii=(0,wp.data.withSelect)(function(e){return{isSaving:e("pods/edit-pod").isSaving()}})(function(e){return t.createElement("div",{id:"postbox-container-1",className:"postbox-container pods_floatmenu"},t.createElement("div",{id:"side-info-field",className:"inner-sidebar"},t.createElement("div",{id:"side-sortables"},t.createElement("div",{id:"submitdiv",className:"postbox pods-no-toggle"},t.createElement("h3",null,t.createElement("span",null,ti("Manage","pods"),"Â ",t.createElement("small",null,"(",t.createElement("a",{href:"/wp-admin/admin.php?page=pods&action=manage"},ti("Â« Back to Manage","pods")),")"))),t.createElement("div",{className:"inside"},t.createElement("div",{className:"submitbox",id:"submitpost"},t.createElement("div",{id:"major-publishing-actions"},t.createElement("div",{id:"delete-action"},t.createElement("a",{href:"#not-implemented",className:"submitdelete deletion pods-confirm"},ti("Delete Pod","pods"))),t.createElement("div",{id:"publishing-action"},t.createElement(ni,{isSaving:e.isSaving}),"Â ",t.createElement("button",{className:"button-primary",type:"submit"},ti("Save Pod","pods"))),t.createElement("div",{className:"clear"}))))),t.createElement("div",{className:"pods-submittable-fields"},t.createElement("div",{id:"side-sortables",className:"meta-box-sortables"})))))}),ni=function(e){return e.isSaving?t.createElement("img",{src:"/wp-admin/images/wpspin_light.gif",alt:""}):null},oi=wp.data,li=oi.withSelect,ai=oi.withDispatch,ri=(0,wp.compose.compose)([li(function(e){var t=e("pods/edit-pod");return{tabs:t.getTabs(),activeTab:t.getActiveTab(),tabOptions:t.getTabOptions(t.getActiveTab()),getOptionValue:t.getOptionValue}}),ai(function(e){var t=e("pods/edit-pod");return{setActiveTab:t.setActiveTab,setOptionValue:t.setOptionValue}})])(function(e){var i=e.activeTab,n=e.tabs,o=e.setActiveTab,l=e.tabOptions,a=e.getOptionValue,r=e.setOptionValue;return window.select=wp.data.select("pods/edit-pod"),window.dispatch=wp.data.dispatch("pods/edit-pod"),t.createElement("form",{onSubmit:function(t){return function(e,t){e.preventDefault();t.podMeta.id,t.podMeta.name,t.podMeta.name,t.nonce,t.fields}(t,e)}},t.createElement("div",null,t.createElement(Rt,null),t.createElement(Ct,null),t.createElement(Ft,{tabs:n,activeTab:i,setActiveTab:o})),t.createElement("div",{id:"poststuff"},t.createElement("div",{id:"post-body",className:"columns-2"},t.createElement(ei,{activeTab:i,tabOptions:l,getOptionValue:a,setOptionValue:r}),t.createElement(ii,null))))}),si={file:{FieldClass:nt,renderer:l},avatar:{FieldClass:nt,renderer:l},pick:{FieldClass:yt,renderer:l},text:{FieldClass:function(e){return t.createElement(_t,s({type:"text"},e))},renderer:de},password:{FieldClass:function(e){return t.createElement(_t,s({type:"password"},e))},renderer:de},number:{FieldClass:function(e){return e.validation.addRules([{rule:y(e.value,e.fieldConfig.number_max),condition:!0},{rule:E(e.value,e.fieldConfig.number_min),condition:!0}]),t.createElement(_t,s({type:"1"===e.fieldConfig.number_html5?"number":"text",min:e.fieldConfig.number_min,max:e.fieldConfig.number_max},e))},renderer:de},email:{FieldClass:function(e){return e.validation.addRules([{rule:C(e.value),condition:!0}]),t.createElement(_t,s({type:"1"===e.fieldConfig.email_html5?"email":"text"},e))},renderer:de},paragraph:{FieldClass:function(e){return t.createElement("textarea",{value:e.value,name:e.htmlAttr.name,id:e.htmlAttr.id,className:e.className,"data-name-clean":e.htmlAttr.name_clean,"data-label":e.fieldConfig.label,onChange:e.onChange||function(t){e.setValue(t.target.value)},onBlur:e.onBlur},e.value)},renderer:de},"edit-pod":{FieldClass:ri,renderer:function(e,n,o){var l=t.createFactory(e);Ie(o),i.render(l(o),n)}}},di={fields:si,models:Object.freeze({PodsDFVFieldModel:o,RelationshipModel:at,RelationshipCollection:rt,FileUploadModel:Ge,FileUploadCollection:Je}),fieldInstances:{},init:function(){e("script.pods-dfv-field-data").each(function(){var t=e(this).parent().get(0),i=e.parseJSON(e(this).html());if(e(this).parents(".media-modal-content").length&&(i.fieldConfig.pick_allow_add_new=0),void 0!==i.fieldType){var n=si[i.fieldType];void 0!==n&&n.renderer(n.FieldClass,t,i)}e(this).remove()})},isModalWindow:function(){return-1!==location.search.indexOf("pods_modal=")},isGutenbergEditorLoaded:function(){return void 0!==wp.data&&void 0!==wp.data.select("core/editor")}};return document.addEventListener("DOMContentLoaded",function(){di.init(),di.isModalWindow()&&di.isGutenbergEditorLoaded()&&Le()}),di}(jQuery,React,ReactDOM,lodash);
//# sourceMappingURL=pods-dfv.min.js.map
